<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>public/plugins/rs-plugin/js/jquery.themepunch.revolution.js - Engagement Lab Website</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="Engagement Lab Website" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.3</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/about.html">about</a></li>
                                <li><a href="../classes/academics.html">academics</a></li>
                                <li><a href="../classes/category.html">category</a></li>
                                <li><a href="../classes/directory.html">directory</a></li>
                                <li><a href="../classes/EventEmitter Manages event registering and emitting..html">EventEmitter Manages event registering and emitting.</a></li>
                                <li><a href="../classes/index.html">index</a></li>
                                <li><a href="../classes/news.html">news</a></li>
                                <li><a href="../classes/program.html">program</a></li>
                                <li><a href="../classes/project.html">project</a></li>
                                <li><a href="../classes/routes.middleware.html">routes.middleware</a></li>
                                <li><a href="../classes/team.html">team</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/$.JQPlugin.html">$.JQPlugin</a></li>
                                <li><a href="../modules/about.html">about</a></li>
                                <li><a href="../modules/category.html">category</a></li>
                                <li><a href="../modules/program.html">program</a></li>
                                <li><a href="../modules/programs.html">programs</a></li>
                                <li><a href="../modules/project.html">project</a></li>
                                <li><a href="../modules/research.html">research</a></li>
                                <li><a href="../modules/resource.html">resource</a></li>
                                <li><a href="../modules/team.html">team</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: public/plugins/rs-plugin/js/jquery.themepunch.revolution.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**************************************************************************
 * jquery.themepunch.revolution.js - jQuery Plugin for Revolution Slider
 * @version: 4.6.4 (26.11.2014)
 * @requires jQuery v1.7 or later (tested on 1.9)
 * @author ThemePunch
**************************************************************************/


(function(jQuery,undefined){




	////////////////////////////////////////
	// THE REVOLUTION PLUGIN STARTS HERE //
	///////////////////////////////////////

	jQuery.fn.extend({

		// OUR PLUGIN HERE :)
		revolution: function(options) {



				////////////////////////////////
				// SET DEFAULT VALUES OF ITEM //
				////////////////////////////////
				var defaults = {
					delay:9000,
					startheight:500,
					startwidth:960,
					fullScreenAlignForce:&quot;off&quot;,
					autoHeight:&quot;off&quot;,
					hideTimerBar:&quot;off&quot;,
					hideThumbs:200,
					hideNavDelayOnMobile:1500,

					thumbWidth:100,							// Thumb With and Height and Amount (only if navigation Tyope set to thumb !)
					thumbHeight:50,
					thumbAmount:3,

					navigationType:&quot;bullet&quot;,				// bullet, thumb, none
					navigationArrows:&quot;solo&quot;,				// nextto, solo, none
					navigationInGrid:&quot;off&quot;,					// on/off

					hideThumbsOnMobile:&quot;off&quot;,
					hideBulletsOnMobile:&quot;off&quot;,
					hideArrowsOnMobile:&quot;off&quot;,
					hideThumbsUnderResoluition:0,

					navigationStyle:&quot;round&quot;,				// round,square,navbar,round-old,square-old,navbar-old, or any from the list in the docu (choose between 50+ different item),

					navigationHAlign:&quot;center&quot;,				// Vertical Align top,center,bottom
					navigationVAlign:&quot;bottom&quot;,				// Horizontal Align left,center,right
					navigationHOffset:0,
					navigationVOffset:20,

					soloArrowLeftHalign:&quot;left&quot;,
					soloArrowLeftValign:&quot;center&quot;,
					soloArrowLeftHOffset:20,
					soloArrowLeftVOffset:0,

					soloArrowRightHalign:&quot;right&quot;,
					soloArrowRightValign:&quot;center&quot;,
					soloArrowRightHOffset:20,
					soloArrowRightVOffset:0,

					keyboardNavigation:&quot;on&quot;,

					touchenabled:&quot;on&quot;,						// Enable Swipe Function : on/off
					onHoverStop:&quot;on&quot;,						// Stop Banner Timet at Hover on Slide on/off


					stopAtSlide:-1,							// Stop Timer if Slide &quot;x&quot; has been Reached. If stopAfterLoops set to 0, then it stops already in the first Loop at slide X which defined. -1 means do not stop at any slide. stopAfterLoops has no sinn in this case.
					stopAfterLoops:-1,						// Stop Timer if All slides has been played &quot;x&quot; times. IT will stop at THe slide which is defined via stopAtSlide:x, if set to -1 slide never stop automatic

					hideCaptionAtLimit:0,					// It Defines if a caption should be shown under a Screen Resolution ( Basod on The Width of Browser)
					hideAllCaptionAtLimit:0,				// Hide all The Captions if Width of Browser is less then this value
					hideSliderAtLimit:0,					// Hide the whole slider, and stop also functions if Width of Browser is less than this value

					shadow:0,								//0 = no Shadow, 1,2,3 = 3 Different Art of Shadows  (No Shadow in Fullwidth Version !)
					fullWidth:&quot;off&quot;,						// Turns On or Off the Fullwidth Image Centering in FullWidth Modus
					fullScreen:&quot;off&quot;,
					minFullScreenHeight:0,					// The Minimum FullScreen Height
					fullScreenOffsetContainer:&quot;&quot;,			// Size for FullScreen Slider minimising Calculated on the Container sizes
					fullScreenOffset:&quot;0&quot;,					// Size for FullScreen Slider minimising
					dottedOverlay:&quot;none&quot;,					//twoxtwo, threexthree, twoxtwowhite, threexthreewhite

					forceFullWidth:&quot;off&quot;,						// Force The FullWidth

					spinner:&quot;spinner0&quot;,

					swipe_treshold : 75,					// The number of pixels that the user must move their finger by before it is considered a swipe.
					swipe_min_touches : 1,					// Min Finger (touch) used for swipe
					drag_block_vertical:false,				// Prevent Vertical Scroll during Swipe
					isJoomla:false,
					parallax:&quot;off&quot;,
					parallaxLevels: [10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85],
					parallaxBgFreeze: &quot;off&quot;,
					parallaxOpacity:&quot;on&quot;,
					parallaxDisableOnMobile:&quot;off&quot;,
					panZoomDisableOnMobile:&quot;off&quot;,
					simplifyAll:&quot;on&quot;,
					minHeight:0,
					nextSlideOnWindowFocus:&quot;off&quot;,

					startDelay:0		// Delay before the first Animation starts.


				};

					options = jQuery.extend({}, defaults, options);

					return this.each(function() {


						// REPORT SOME IMPORTAN INFORMATION ABOUT THE SLIDER
						if (window.tplogs==true)
						 try{
								console.groupCollapsed(&quot;Slider Revolution 4.6.3 Initialisation on &quot;+jQuery(this).attr(&#x27;id&#x27;));
								console.groupCollapsed(&quot;Used Options:&quot;);
								console.info(options);
								console.groupEnd();
								console.groupCollapsed(&quot;Tween Engine:&quot;)
							} catch(e) {}

						// CHECK IF TweenLite IS LOADED AT ALL
						if (punchgs.TweenLite==undefined) {
						   if (window.tplogs==true)
						    try{ console.error(&quot;GreenSock Engine Does not Exist!&quot;);
						    } catch(e) {}
							return false;
						}

						punchgs.force3D = true;

						if (window.tplogs==true)
							try{ console.info(&quot;GreenSock Engine Version in Slider Revolution:&quot;+punchgs.TweenLite.version);
							} catch(e) {

							}

						if (options.simplifyAll==&quot;on&quot;) {

						} else {
							punchgs.TweenLite.lagSmoothing(1000,16);
							punchgs.force3D = &quot;true&quot;;
						}

						if (window.tplogs==true)
							try{
								console.groupEnd();
								console.groupEnd();
							} catch(e) {}


						initSlider(jQuery(this),options)


					})
				},


		// METHODE PAUSE
		revscroll: function(oy) {
					return this.each(function() {
						var container=jQuery(this);
						if (container!=undefined &amp;&amp; container.length&gt;0 &amp;&amp; jQuery(&#x27;body&#x27;).find(&#x27;#&#x27;+container.attr(&#x27;id&#x27;)).length&gt;0)
							jQuery(&#x27;body,html&#x27;).animate({scrollTop:(container.offset().top+(container.find(&#x27;&gt;ul &gt;li&#x27;).height())-oy)+&quot;px&quot;},{duration:400});
					})
				},

		// METHODE PAUSE
		revredraw: function(oy) {
					return this.each(function() {
						var container=jQuery(this);
						if (container!=undefined &amp;&amp; container.length&gt;0 &amp;&amp; jQuery(&#x27;body&#x27;).find(&#x27;#&#x27;+container.attr(&#x27;id&#x27;)).length&gt;0) {
							var bt = container.parent().find(&#x27;.tp-bannertimer&#x27;);
							var opt = bt.data(&#x27;opt&#x27;);
							containerResized(container,opt);
						}
					})
				},
		// METHODE PAUSE
		revkill: function(oy) {

						var self = this,
							container=jQuery(this);

						if (container!=undefined &amp;&amp; container.length&gt;0 &amp;&amp; jQuery(&#x27;body&#x27;).find(&#x27;#&#x27;+container.attr(&#x27;id&#x27;)).length&gt;0) {

							container.data(&#x27;conthover&#x27;,1);
							container.data(&#x27;conthover-changed&#x27;,1);
							container.trigger(&#x27;revolution.slide.onpause&#x27;);
							var bt = container.parent().find(&#x27;.tp-bannertimer&#x27;);
							var opt = bt.data(&#x27;opt&#x27;);
							opt.bannertimeronpause = true;
							container.trigger(&#x27;stoptimer&#x27;);

							punchgs.TweenLite.killTweensOf(container.find(&#x27;*&#x27;),false);
							punchgs.TweenLite.killTweensOf(container,false);
							container.unbind(&#x27;hover, mouseover, mouseenter,mouseleave, resize&#x27;);
							var resizid = &quot;resize.revslider-&quot;+container.attr(&#x27;id&#x27;);
							jQuery(window).off(resizid);
							container.find(&#x27;*&#x27;).each(function() {
									var el = jQuery(this);

									el.unbind(&#x27;on, hover, mouseenter,mouseleave,mouseover, resize,restarttimer, stoptimer&#x27;);
									el.off(&#x27;on, hover, mouseenter,mouseleave,mouseover, resize&#x27;);
									el.data(&#x27;mySplitText&#x27;,null);
									el.data(&#x27;ctl&#x27;,null);
									if (el.data(&#x27;tween&#x27;)!=undefined)
										el.data(&#x27;tween&#x27;).kill();
									if (el.data(&#x27;kenburn&#x27;)!=undefined)
										el.data(&#x27;kenburn&#x27;).kill();
									el.remove();
									el.empty();
									el=null;
							})


							punchgs.TweenLite.killTweensOf(container.find(&#x27;*&#x27;),false);
							punchgs.TweenLite.killTweensOf(container,false);
							bt.remove();
							try{container.closest(&#x27;.forcefullwidth_wrapper_tp_banner&#x27;).remove();} catch(e) {}
							try{container.closest(&#x27;.rev_slider_wrapper&#x27;).remove()} catch(e) {}
							try{container.remove();} catch(e) {}
							container.empty();
							container.html();
							container = null;

							opt = null;
							delete(self.container);
							delete(self.opt);

							return true;
						} else {
							return false;
						}


				},

		// METHODE PAUSE
		revpause: function(options) {

					return this.each(function() {
						var container=jQuery(this);
						if (container!=undefined &amp;&amp; container.length&gt;0 &amp;&amp; jQuery(&#x27;body&#x27;).find(&#x27;#&#x27;+container.attr(&#x27;id&#x27;)).length&gt;0) {
							container.data(&#x27;conthover&#x27;,1);
							container.data(&#x27;conthover-changed&#x27;,1);
							container.trigger(&#x27;revolution.slide.onpause&#x27;);
							var bt = container.parent().find(&#x27;.tp-bannertimer&#x27;);
							var opt = bt.data(&#x27;opt&#x27;);
							opt.bannertimeronpause = true;
							container.trigger(&#x27;stoptimer&#x27;);
						}
					})


				},

		// METHODE RESUME
		revresume: function(options) {
					return this.each(function() {
						var container=jQuery(this);
						if (container!=undefined &amp;&amp; container.length&gt;0 &amp;&amp; jQuery(&#x27;body&#x27;).find(&#x27;#&#x27;+container.attr(&#x27;id&#x27;)).length&gt;0) {
							container.data(&#x27;conthover&#x27;,0);
							container.data(&#x27;conthover-changed&#x27;,1);
							container.trigger(&#x27;revolution.slide.onresume&#x27;);
							var bt = container.parent().find(&#x27;.tp-bannertimer&#x27;);
							var opt = bt.data(&#x27;opt&#x27;);
							opt.bannertimeronpause = false;
							container.trigger(&#x27;starttimer&#x27;);
						}
					})

				},

		// METHODE NEXT
		revnext: function(options) {
					return this.each(function() {

						// CATCH THE CONTAINER
						var container=jQuery(this);
						if (container!=undefined &amp;&amp; container.length&gt;0 &amp;&amp; jQuery(&#x27;body&#x27;).find(&#x27;#&#x27;+container.attr(&#x27;id&#x27;)).length&gt;0)
							container.parent().find(&#x27;.tp-rightarrow&#x27;).click();


					})

				},

		// METHODE RESUME
		revprev: function(options) {
					return this.each(function() {
						// CATCH THE CONTAINER
						var container=jQuery(this);
						if (container!=undefined &amp;&amp; container.length&gt;0 &amp;&amp; jQuery(&#x27;body&#x27;).find(&#x27;#&#x27;+container.attr(&#x27;id&#x27;)).length&gt;0)
							container.parent().find(&#x27;.tp-leftarrow&#x27;).click();
					})

				},

		// METHODE LENGTH
		revmaxslide: function(options) {
						// CATCH THE CONTAINER
						return jQuery(this).find(&#x27;&gt;ul:first-child &gt;li&#x27;).length;
				},


		// METHODE CURRENT
		revcurrentslide: function(options) {
						// CATCH THE CONTAINER
						var container=jQuery(this);
						if (container!=undefined &amp;&amp; container.length&gt;0 &amp;&amp; jQuery(&#x27;body&#x27;).find(&#x27;#&#x27;+container.attr(&#x27;id&#x27;)).length&gt;0) {
							var bt = container.parent().find(&#x27;.tp-bannertimer&#x27;);
							var opt = bt.data(&#x27;opt&#x27;);
							return opt.act;
						}
				},

		// METHODE CURRENT
		revlastslide: function(options) {
						// CATCH THE CONTAINER
						var container=jQuery(this);
						if (container!=undefined &amp;&amp; container.length&gt;0 &amp;&amp; jQuery(&#x27;body&#x27;).find(&#x27;#&#x27;+container.attr(&#x27;id&#x27;)).length&gt;0) {
							var bt = container.parent().find(&#x27;.tp-bannertimer&#x27;);
							var opt = bt.data(&#x27;opt&#x27;);
							return opt.lastslide;
						}
				},


		// METHODE JUMP TO SLIDE
		revshowslide: function(slide) {
					return this.each(function() {
						// CATCH THE CONTAINER
						var container=jQuery(this);
						if (container!=undefined &amp;&amp; container.length&gt;0 &amp;&amp; jQuery(&#x27;body&#x27;).find(&#x27;#&#x27;+container.attr(&#x27;id&#x27;)).length&gt;0) {
							container.data(&#x27;showus&#x27;,slide);
							container.parent().find(&#x27;.tp-rightarrow&#x27;).click();
						}
					})

				}


})
		/*******************************************
			-	IS IOS VERSION OLDER THAN 5 ??	-
		*******************************************/

		function iOSVersion() {
			var oldios = false;
			if((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i)) || (navigator.userAgent.match(/iPad/i))) {
		        if (navigator.userAgent.match(/OS 4_\d like Mac OS X/i)) {
		        	oldios = true;
				}
		    } else {
				   oldios = false;
		    }
			return oldios;
		}

		function initSlider(container,opt) {
						if (container==undefined) return false;

						if (container.data(&#x27;aimg&#x27;)!=undefined) {
							if ((container.data(&#x27;aie8&#x27;)==&quot;enabled&quot; &amp;&amp; isIE(8)) || (container.data(&#x27;amobile&#x27;)==&quot;enabled&quot; &amp;&amp; is_mobile()))
								container.html(&#x27;&lt;img class=&quot;tp-slider-alternative-image&quot; src=&quot;&#x27;+container.data(&quot;aimg&quot;)+&#x27;&quot;&gt;&#x27;);
						}
						// PREPARE FALL BACK SETTINGS
						if (opt.navigationStyle==&quot;preview1&quot; ||  opt.navigationStyle==&quot;preview3&quot; || opt.navigationStyle==&quot;preview4&quot;) {
									opt.soloArrowLeftHalign=&quot;left&quot;;
									opt.soloArrowLeftValign=&quot;center&quot;;
									opt.soloArrowLeftHOffset=0;
									opt.soloArrowLeftVOffset=0;
									opt.soloArrowRightHalign=&quot;right&quot;;
									opt.soloArrowRightValign=&quot;center&quot;;
									opt.soloArrowRightHOffset=0;
									opt.soloArrowRightVOffset=0;
									opt.navigationArrows=&quot;solo&quot;;
						}


						// SIMPLIFY ANIMATIONS ON OLD IOS AND IE8 IF NEEDED
						if (opt.simplifyAll==&quot;on&quot; &amp;&amp; (isIE(8) || iOSVersion())) {
							container.find(&#x27;.tp-caption&#x27;).each(function() {
								var tc = jQuery(this);
								tc.removeClass(&quot;customin&quot;).removeClass(&quot;customout&quot;).addClass(&quot;fadein&quot;).addClass(&quot;fadeout&quot;);
								tc.data(&#x27;splitin&#x27;,&quot;&quot;);
								tc.data(&#x27;speed&#x27;,400);
							})
							container.find(&#x27;&gt;ul&gt;li&#x27;).each(function() {
								var li= jQuery(this);
								li.data(&#x27;transition&#x27;,&quot;fade&quot;);
								li.data(&#x27;masterspeed&#x27;,500);
								li.data(&#x27;slotamount&#x27;,1);
								var img = li.find(&#x27;&gt;img&#x27;).first();
								img.data(&#x27;kenburns&#x27;,&quot;off&quot;);
							});
						}





						opt.desktop = !navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|mobi|tablet|opera mini|nexus 7)/i);

						if (opt.fullWidth!=&quot;on&quot; &amp;&amp; opt.fullScreen!=&quot;on&quot;) opt.autoHeight = &quot;off&quot;;
						if (opt.fullScreen==&quot;on&quot;) opt.autoHeight = &quot;on&quot;;
						if (opt.fullWidth!=&quot;on&quot; &amp;&amp; opt.fullScreen!=&quot;on&quot;) forceFulWidth=&quot;off&quot;;

						if (opt.fullWidth==&quot;on&quot; &amp;&amp; opt.autoHeight==&quot;off&quot;)
							container.css({maxHeight:opt.startheight+&quot;px&quot;});

						if (is_mobile() &amp;&amp; opt.hideThumbsOnMobile==&quot;on&quot; &amp;&amp; opt.navigationType==&quot;thumb&quot;)
						   opt.navigationType = &quot;none&quot;

						if (is_mobile() &amp;&amp; opt.hideBulletsOnMobile==&quot;on&quot; &amp;&amp; opt.navigationType==&quot;bullet&quot;)
						   opt.navigationType = &quot;none&quot;

						if (is_mobile() &amp;&amp; opt.hideBulletsOnMobile==&quot;on&quot; &amp;&amp; opt.navigationType==&quot;both&quot;)
						   opt.navigationType = &quot;none&quot;

						if (is_mobile() &amp;&amp; opt.hideArrowsOnMobile==&quot;on&quot;)
						   opt.navigationArrows = &quot;none&quot;

						if (opt.forceFullWidth==&quot;on&quot; &amp;&amp; container.closest(&#x27;.forcefullwidth_wrapper_tp_banner&#x27;).length==0) {

							var loff = container.parent().offset().left;
							var mb = container.parent().css(&#x27;marginBottom&#x27;);
							var mt = container.parent().css(&#x27;marginTop&#x27;);
							if (mb==undefined) mb=0;
							if (mt==undefined) mt=0;

							container.parent().wrap(&#x27;&lt;div style=&quot;position:relative;width:100%;height:auto;margin-top:&#x27;+mt+&#x27;;margin-bottom:&#x27;+mb+&#x27;&quot; class=&quot;forcefullwidth_wrapper_tp_banner&quot;&gt;&lt;/div&gt;&#x27;);
							container.closest(&#x27;.forcefullwidth_wrapper_tp_banner&#x27;).append(&#x27;&lt;div class=&quot;tp-fullwidth-forcer&quot; style=&quot;width:100%;height:&#x27;+container.height()+&#x27;px&quot;&gt;&lt;/div&gt;&#x27;);
							container.css({&#x27;backgroundColor&#x27;:container.parent().css(&#x27;backgroundColor&#x27;),&#x27;backgroundImage&#x27;:container.parent().css(&#x27;backgroundImage&#x27;)});
							//container.parent().css({&#x27;position&#x27;:&#x27;absolute&#x27;,&#x27;width&#x27;:jQuery(window).width()});
							container.parent().css({&#x27;left&#x27;:(0-loff)+&quot;px&quot;,position:&#x27;absolute&#x27;,&#x27;width&#x27;:jQuery(window).width()});
							opt.width=jQuery(window).width();
						}

						// HIDE THUMBS UNDER RESOLUTION
						try{
							if (opt.hideThumbsUnderResolution&gt;jQuery(window).width() &amp;&amp; opt.hideThumbsUnderResolution!=0) {
								container.parent().find(&#x27;.tp-bullets.tp-thumbs&#x27;).css({display:&quot;none&quot;});
							} else {
								container.parent().find(&#x27;.tp-bullets.tp-thumbs&#x27;).css({display:&quot;block&quot;});
							}
						} catch(e) {}

						if (!container.hasClass(&quot;revslider-initialised&quot;)) {

									container.addClass(&quot;revslider-initialised&quot;);
									if (container.attr(&#x27;id&#x27;)==undefined) container.attr(&#x27;id&#x27;,&quot;revslider-&quot;+Math.round(Math.random()*1000+5));

									// CHECK IF FIREFOX 13 IS ON WAY.. IT HAS A STRANGE BUG, CSS ANIMATE SHOULD NOT BE USED



									opt.firefox13 = false;
									opt.ie = !jQuery.support.opacity;
									opt.ie9 = (document.documentMode == 9);

									opt.origcd=opt.delay;

									// CHECK THE jQUERY VERSION
									var version = jQuery.fn.jquery.split(&#x27;.&#x27;),
										versionTop = parseFloat(version[0]),
										versionMinor = parseFloat(version[1]),
										versionIncrement = parseFloat(version[2] || &#x27;0&#x27;);

									if (versionTop==1 &amp;&amp; versionMinor &lt; 7) {
										container.html(&#x27;&lt;div style=&quot;text-align:center; padding:40px 0px; font-size:20px; color:#992222;&quot;&gt; The Current Version of jQuery:&#x27;+version+&#x27; &lt;br&gt;Please update your jQuery Version to min. 1.7 in Case you wish to use the Revolution Slider Plugin&lt;/div&gt;&#x27;);
									}

									if (versionTop&gt;1) opt.ie=false;


									// Delegate .transition() calls to .animate()
									// if the browser can&#x27;t do CSS transitions.
									if (!jQuery.support.transition)
										jQuery.fn.transition = jQuery.fn.animate;

									// CATCH THE CONTAINER


									 // LOAD THE YOUTUBE API IF NECESSARY

									container.find(&#x27;.caption&#x27;).each(function() { jQuery(this).addClass(&#x27;tp-caption&#x27;)});

									if (is_mobile()) {
										container.find(&#x27;.tp-caption&#x27;).each(function() {
											var nextcaption = jQuery(this);
											if (nextcaption.data(&#x27;autoplayonlyfirsttime&#x27;) == true || nextcaption.data(&#x27;autoplayonlyfirsttime&#x27;)==&quot;true&quot;)
													nextcaption.data(&#x27;autoplayonlyfirsttime&#x27;,&quot;false&quot;);
											if (nextcaption.data(&#x27;autoplay&#x27;)==true || nextcaption.data(&#x27;autoplay&#x27;)==&quot;true&quot;)
												 nextcaption.data(&#x27;autoplay&#x27;,false);

										})
									}


									var addedyt=0;
									var addedvim=0;
									var addedvid=0;
									var httpprefix = &quot;http&quot;;

									if (location.protocol === &#x27;https:&#x27;) {
											httpprefix = &quot;https&quot;;
									}
									container.find(&#x27;.tp-caption&#x27;).each(function(i) {
										// IF SRC EXIST, RESET SRC&#x27;S since WE DONT NEED THEM !!

										try {

												if ((jQuery(this).data(&#x27;ytid&#x27;)!=undefined  || jQuery(this).find(&#x27;iframe&#x27;).attr(&#x27;src&#x27;).toLowerCase().indexOf(&#x27;youtube&#x27;)&gt;0) &amp;&amp; addedyt==0) {
													addedyt=1;
													var s = document.createElement(&quot;script&quot;);
													var httpprefix2 = &quot;https&quot;;
													s.src = httpprefix2+&quot;://www.youtube.com/iframe_api&quot;; /* Load Player API*/

													var before = document.getElementsByTagName(&quot;script&quot;)[0];
													var loadit = true;
													jQuery(&#x27;head&#x27;).find(&#x27;*&#x27;).each(function(){
														if (jQuery(this).attr(&#x27;src&#x27;) == httpprefix2+&quot;://www.youtube.com/iframe_api&quot;)
														   loadit = false;
													});
													if (loadit) {
														before.parentNode.insertBefore(s, before);


													}
												}
											} catch(e) {}

										try{
											   if ((jQuery(this).data(&#x27;vimeoid&#x27;)!=undefined || jQuery(this).find(&#x27;iframe&#x27;).attr(&#x27;src&#x27;).toLowerCase().indexOf(&#x27;vimeo&#x27;)&gt;0) &amp;&amp; addedvim==0) {
													addedvim=1;
													var f = document.createElement(&quot;script&quot;);
													f.src = httpprefix+&quot;://a.vimeocdn.com/js/froogaloop2.min.js&quot;; /* Load Player API*/
													var before = document.getElementsByTagName(&quot;script&quot;)[0];

													var loadit = true;
													jQuery(&#x27;head&#x27;).find(&#x27;*&#x27;).each(function(){
														if (jQuery(this).attr(&#x27;src&#x27;) == httpprefix+&quot;://a.vimeocdn.com/js/froogaloop2.min.js&quot;)
														   loadit = false;
													});
													if (loadit)
														before.parentNode.insertBefore(f, before);
												}
											} catch(e) {}

										try{
											if ((jQuery(this).data(&#x27;videomp4&#x27;)!=undefined || jQuery(this).data(&#x27;videowebm&#x27;)!=undefined))  {

											}
										} catch(e) {}
									});




									// REMOVE ANY VIDEO JS SETTINGS OF THE VIDEO  IF NEEDED
									container.find(&#x27;.tp-caption video&#x27;).each(function(i) {
										jQuery(this).removeClass(&quot;video-js&quot;).removeClass(&quot;vjs-default-skin&quot;);
										jQuery(this).attr(&quot;preload&quot;,&quot;&quot;);
										jQuery(this).css({display:&quot;none&quot;});
									});

									container.find(&#x27;&gt;ul:first-child &gt;li&#x27;).each(function() {
											var t = jQuery(this);
											t.data(&#x27;origindex&#x27;,t.index());
										})

									// SHUFFLE MODE
									if (opt.shuffle==&quot;on&quot;) {
										var fsa = new Object,
											fli = container.find(&#x27;&gt;ul:first-child &gt;li:first-child&#x27;)

										fsa.fstransition = fli.data(&#x27;fstransition&#x27;);
										fsa.fsmasterspeed = fli.data(&#x27;fsmasterspeed&#x27;);
										fsa.fsslotamount = fli.data(&#x27;fsslotamount&#x27;);



										for (var u=0;u&lt;container.find(&#x27;&gt;ul:first-child &gt;li&#x27;).length;u++) {
											var it = Math.round(Math.random()*container.find(&#x27;&gt;ul:first-child &gt;li&#x27;).length);
											container.find(&#x27;&gt;ul:first-child &gt;li:eq(&#x27;+it+&#x27;)&#x27;).prependTo(container.find(&#x27;&gt;ul:first-child&#x27;));
										}

										var newfli = container.find(&#x27;&gt;ul:first-child &gt;li:first-child&#x27;);
										 newfli.data(&#x27;fstransition&#x27;,fsa.fstransition);
										 newfli.data(&#x27;fsmasterspeed&#x27;,fsa.fsmasterspeed);
										 newfli.data(&#x27;fsslotamount&#x27;,fsa.fsslotamount);
									}


									// CREATE SOME DEFAULT OPTIONS FOR LATER
									opt.slots=4;
									opt.act=-1;
									opt.next=0;

									// IF START SLIDE IS SET
									if (opt.startWithSlide !=undefined) opt.next=opt.startWithSlide;

									// IF DEEPLINK HAS BEEN SET
									var deeplink = getUrlVars(&quot;#&quot;)[0];
									if (deeplink.length&lt;9) {
										if (deeplink.split(&#x27;slide&#x27;).length&gt;1) {
											var dslide=parseInt(deeplink.split(&#x27;slide&#x27;)[1],0);
											if (dslide&lt;1) dslide=1;
											if (dslide&gt;container.find(&#x27;&gt;ul:first &gt;li&#x27;).length) dslide=container.find(&#x27;&gt;ul:first &gt;li&#x27;).length;
											opt.next=dslide-1;
										}
									}


									opt.firststart=1;

									// BASIC OFFSET POSITIONS OF THE BULLETS
									if (opt.navigationHOffset==undefined) opt.navOffsetHorizontal=0;
									if (opt.navigationVOffset==undefined) opt.navOffsetVertical=0;



									container.append(&#x27;&lt;div class=&quot;tp-loader &#x27;+opt.spinner+&#x27;&quot;&gt;&#x27;+
												  		&#x27;&lt;div class=&quot;dot1&quot;&gt;&lt;/div&gt;&#x27;+
												  	    &#x27;&lt;div class=&quot;dot2&quot;&gt;&lt;/div&gt;&#x27;+
												  	    &#x27;&lt;div class=&quot;bounce1&quot;&gt;&lt;/div&gt;&#x27;+
														&#x27;&lt;div class=&quot;bounce2&quot;&gt;&lt;/div&gt;&#x27;+
														&#x27;&lt;div class=&quot;bounce3&quot;&gt;&lt;/div&gt;&#x27;+
													 &#x27;&lt;/div&gt;&#x27;);

									// RESET THE TIMER
									if (container.find(&#x27;.tp-bannertimer&#x27;).length==0) container.append(&#x27;&lt;div class=&quot;tp-bannertimer&quot; style=&quot;visibility:hidden&quot;&gt;&lt;/div&gt;&#x27;);
									var bt=container.find(&#x27;.tp-bannertimer&#x27;);
									if (bt.length&gt;0) {
										bt.css({&#x27;width&#x27;:&#x27;0%&#x27;});
									};


									// WE NEED TO ADD A BASIC CLASS FOR SETTINGS.CSS
									container.addClass(&quot;tp-simpleresponsive&quot;);
									opt.container=container;

									//if (container.height()==0) container.height(opt.startheight);

									// AMOUNT OF THE SLIDES
									opt.slideamount = container.find(&#x27;&gt;ul:first &gt;li&#x27;).length;


									// A BASIC GRID MUST BE DEFINED. IF NO DEFAULT GRID EXIST THAN WE NEED A DEFAULT VALUE, ACTUAL SIZE OF CONAINER
									if (container.height()==0) container.height(opt.startheight);
									if (opt.startwidth==undefined || opt.startwidth==0) opt.startwidth=container.width();
									if (opt.startheight==undefined || opt.startheight==0) opt.startheight=container.height();

									// OPT WIDTH &amp;&amp; HEIGHT SHOULD BE SET
									opt.width=container.width();
									opt.height=container.height();


									// DEFAULT DEPENDECIES
									opt.bw= opt.startwidth / container.width();
									opt.bh = opt.startheight / container.height();

									// IF THE ITEM ALREADY IN A RESIZED FORM
									if (opt.width!=opt.startwidth) {

										opt.height = Math.round(opt.startheight * (opt.width/opt.startwidth));

										container.height(opt.height);

									}

									// LETS SEE IF THERE IS ANY SHADOW
									if (opt.shadow!=0) {
										container.parent().append(&#x27;&lt;div class=&quot;tp-bannershadow tp-shadow&#x27;+opt.shadow+&#x27;&quot;&gt;&lt;/div&gt;&#x27;);
										var loff=0;
										if (opt.forceFullWidth==&quot;on&quot;)
													loff = 0-opt.container.parent().offset().left;
										container.parent().find(&#x27;.tp-bannershadow&#x27;).css({&#x27;width&#x27;:opt.width,&#x27;left&#x27;:loff});
									}


									container.find(&#x27;ul&#x27;).css({&#x27;display&#x27;:&#x27;none&#x27;});

									var fliparent = container;


									// PREPARE THE SLIDES
									container.find(&#x27;ul&#x27;).css({&#x27;display&#x27;:&#x27;block&#x27;});
									prepareSlides(container,opt);
									if (opt.parallax!=&quot;off&quot;) checkForParallax(container,opt);

									// CREATE BULLETS
									if (opt.slideamount &gt;1) createBullets(container,opt);

									if (opt.slideamount &gt;1 &amp;&amp; opt.navigationType==&quot;thumb&quot;) createThumbs(container,opt);
									if (opt.slideamount &gt;1) createArrows(container,opt);
									if (opt.keyboardNavigation==&quot;on&quot;) createKeyboard(container,opt);


									swipeAction(container,opt);


									if (opt.hideThumbs&gt;0) hideThumbs(container,opt);
									setTimeout(function() {
										swapSlide(container,opt);
									},opt.startDelay);
									opt.startDelay=0;
									// START COUNTDOWN
									if (opt.slideamount &gt;1) countDown(container,opt);
									setTimeout(function() {
										container.trigger(&#x27;revolution.slide.onloaded&#x27;);
									},500);



									/******************************
										-	FULLSCREEN CHANGE	-
									********************************/
									// FULLSCREEN MODE TESTING
									jQuery(&quot;body&quot;).data(&#x27;rs-fullScreenMode&#x27;,false);
									jQuery(window).on (&#x27;mozfullscreenchange webkitfullscreenchange fullscreenchange&#x27;,function(){
									     jQuery(&quot;body&quot;).data(&#x27;rs-fullScreenMode&#x27;,!jQuery(&quot;body&quot;).data(&#x27;rs-fullScreenMode&#x27;));
									     if (jQuery(&quot;body&quot;).data(&#x27;rs-fullScreenMode&#x27;)) {
										     setTimeout(function() {
										     	jQuery(window).trigger(&quot;resize&quot;);

										     },200);
									     }
									})


									var resizid = &quot;resize.revslider-&quot;+container.attr(&#x27;id&#x27;);

									// IF RESIZED, NEED TO STOP ACTUAL TRANSITION AND RESIZE ACTUAL IMAGES
									jQuery(window).on(resizid,function() {
										if (container==undefined) return false;
										if (jQuery(&#x27;body&#x27;).find(container)!=0)
											if (opt.forceFullWidth==&quot;on&quot; ) {

												var loff = opt.container.closest(&#x27;.forcefullwidth_wrapper_tp_banner&#x27;).offset().left;
												//opt.container.parent().css({&#x27;width&#x27;:jQuery(window).width()});
												opt.container.parent().css({&#x27;left&#x27;:(0-loff)+&quot;px&quot;,&#x27;width&#x27;:jQuery(window).width()});
											}

											if (container.outerWidth(true)!=opt.width || container.is(&quot;:hidden&quot;)) {
													containerResized(container,opt);
											}




									});

									// HIDE THUMBS UNDER SIZE...
									try{
										if (opt.hideThumbsUnderResoluition!=0 &amp;&amp; opt.navigationType==&quot;thumb&quot;) {
											if (opt.hideThumbsUnderResoluition&gt;jQuery(window).width())
												jQuery(&#x27;.tp-bullets&#x27;).css({display:&quot;none&quot;});
											 else
											 	jQuery(&#x27;.tp-bullets&#x27;).css({display:&quot;block&quot;});
										}
									} catch(e) {}



									// CHECK IF THE CAPTION IS A &quot;SCROLL ME TO POSITION&quot; CAPTION IS
									//if (opt.fullScreen==&quot;on&quot;) {
										container.find(&#x27;.tp-scrollbelowslider&#x27;).on(&#x27;click&#x27;,function() {
												var off=0;
												try{
												 	off = jQuery(&#x27;body&#x27;).find(opt.fullScreenOffsetContainer).height();
												 } catch(e) {}
												try{
												 	off = off - parseInt(jQuery(this).data(&#x27;scrolloffset&#x27;),0);
												 } catch(e) {}


												jQuery(&#x27;body,html&#x27;).animate(
													{scrollTop:(container.offset().top+(container.find(&#x27;&gt;ul &gt;li&#x27;).height())-off)+&quot;px&quot;},{duration:400});
											});
									//}


									// FIRST TIME STOP/START HIDE / SHOW SLIDER
									//REMOVE AND SHOW SLIDER ON DEMAND
									var contpar= container.parent();
									if (jQuery(window).width()&lt;opt.hideSliderAtLimit) {
										container.trigger(&#x27;stoptimer&#x27;);
										if (contpar.css(&#x27;display&#x27;)!=&quot;none&quot;)
											contpar.data(&#x27;olddisplay&#x27;,contpar.css(&#x27;display&#x27;));
										contpar.css({display:&quot;none&quot;});
									}

									tabBlurringCheck(container,opt);

						}

	}



/******************************
	-	MODULES	-
********************************/


		/////////////////////////////////////////
		// main visibility API function
		// check if current tab is active or not
		var vis = (function(){
		    var stateKey,
		        eventKey,
		        keys = {
		                hidden: &quot;visibilitychange&quot;,
		                webkitHidden: &quot;webkitvisibilitychange&quot;,
		                mozHidden: &quot;mozvisibilitychange&quot;,
		                msHidden: &quot;msvisibilitychange&quot;
		    };
		    for (stateKey in keys) {
		        if (stateKey in document) {
		            eventKey = keys[stateKey];
		            break;
		        }
		    }
		    return function(c) {
		        if (c) document.addEventListener(eventKey, c);
		        return !document[stateKey];
		    }
		})();

		var tabBlurringCheck = function(container,opt) {

			var notIE = (document.documentMode === undefined),
			    isChromium = window.chrome;

			if (notIE &amp;&amp; !isChromium) {

			    // checks for Firefox and other  NON IE Chrome versions
			    jQuery(window).on(&quot;focusin&quot;, function () {
					if (container==undefined) return false;

			        setTimeout(function(){
			            // TAB IS ACTIVE, WE CAN START ANY PART OF THE SLIDER
			            if (opt.nextSlideOnWindowFocus==&quot;on&quot;) container.revnext();
			            container.revredraw();
			        },300);

			    }).on(&quot;focusout&quot;, function () {
					// TAB IS NOT ACTIVE, WE CAN STOP ANY PART OF THE SLIDER
			    });

			} else {

			    // checks for IE and Chromium versions
			    if (window.addEventListener) {

			        // bind focus event
			        window.addEventListener(&quot;focus&quot;, function (event) {
						if (container==undefined) return false;
			            setTimeout(function(){
			                 // TAB IS ACTIVE, WE CAN START ANY PART OF THE SLIDER
				            if (opt.nextSlideOnWindowFocus==&quot;on&quot;) container.revnext();
							container.revredraw();
			            },300);

			        }, false);

			        // bind blur event
			        window.addEventListener(&quot;blur&quot;, function (event) {
						// TAB IS NOT ACTIVE, WE CAN STOP ANY PART OF THE SLIDER
			        }, false);

			    } else {

			        // bind focus event
			        window.attachEvent(&quot;focus&quot;, function (event) {

			            setTimeout(function(){
							if (container==undefined) return false;
							// TAB IS ACTIVE, WE CAN START ANY PART OF THE SLIDER
				            if (opt.nextSlideOnWindowFocus==&quot;on&quot;) container.revnext();
							container.revredraw();
				         },300);

			        });

			        // bind focus event
			        window.attachEvent(&quot;blur&quot;, function (event) {
						// TAB IS NOT ACTIVE, WE CAN STOP ANY PART OF THE SLIDER
			        });
			    }
			}
		}

		///////////////////////////
		// GET THE URL PARAMETER //
		///////////////////////////
		var getUrlVars = function (hashdivider)
			{
				var vars = [], hash;
				var hashes = window.location.href.slice(window.location.href.indexOf(hashdivider) + 1).split(&#x27;_&#x27;);
				for(var i = 0; i &lt; hashes.length; i++)
				{
					hashes[i] = hashes[i].replace(&#x27;%3D&#x27;,&quot;=&quot;);
					hash = hashes[i].split(&#x27;=&#x27;);
					vars.push(hash[0]);
					vars[hash[0]] = hash[1];
				}
				return vars;
			}

		//////////////////////////
		//	CONTAINER RESIZED	//
		/////////////////////////
		var containerResized = function (container,opt) {

			if (container==undefined) return false;
			// HIDE THUMBS UNDER SIZE...
			try{
				if (opt.hideThumbsUnderResoluition!=0 &amp;&amp; opt.navigationType==&quot;thumb&quot;) {
					if (opt.hideThumbsUnderResoluition&gt;jQuery(window).width())
						jQuery(&#x27;.tp-bullets&#x27;).css({display:&quot;none&quot;});
					 else
					 	jQuery(&#x27;.tp-bullets&#x27;).css({display:&quot;block&quot;});
				}
			} catch(e) {}



			container.find(&#x27;.defaultimg&#x27;).each(function(i) {
					setSize(jQuery(this),opt);
			});


			//REMOVE AND SHOW SLIDER ON DEMAND
			var contpar= container.parent();
			if (jQuery(window).width()&lt;opt.hideSliderAtLimit) {
				container.trigger(&#x27;stoptimer&#x27;);
				if (contpar.css(&#x27;display&#x27;)!=&quot;none&quot;)
					contpar.data(&#x27;olddisplay&#x27;,contpar.css(&#x27;display&#x27;));
				contpar.css({display:&quot;none&quot;});

			} else {

				if (container.is(&quot;:hidden&quot;)) {
					if (contpar.data(&#x27;olddisplay&#x27;)!=undefined &amp;&amp; contpar.data(&#x27;olddisplay&#x27;)!=&quot;undefined&quot; &amp;&amp; contpar.data(&#x27;olddisplay&#x27;) != &quot;none&quot;)
						contpar.css({display:contpar.data(&#x27;olddisplay&#x27;)});
					else
						contpar.css({display:&quot;block&quot;});
					container.trigger(&#x27;restarttimer&#x27;);
					setTimeout(function() {
						containerResized(container,opt);
					},150)
				}
			}


			var loff=0;
			if (opt.forceFullWidth==&quot;on&quot;)
						loff = 0-opt.container.parent().offset().left;
			try{
				container.parent().find(&#x27;.tp-bannershadow&#x27;).css({&#x27;width&#x27;:opt.width,&#x27;left&#x27;:loff});
			} catch(e) {}

			var actsh = container.find(&#x27;&gt;ul &gt;li:eq(&#x27;+opt.act+&#x27;) .slotholder&#x27;);
			var nextsh = container.find(&#x27;&gt;ul &gt;li:eq(&#x27;+opt.next+&#x27;) .slotholder&#x27;);
			removeSlots(container,opt,container);
			punchgs.TweenLite.set(nextsh.find(&#x27;.defaultimg&#x27;),{opacity:0});
			actsh.find(&#x27;.defaultimg&#x27;).css({&#x27;opacity&#x27;:1});

			nextsh.find(&#x27;.defaultimg&#x27;).each(function() {
				var dimg = jQuery(this);

				if (opt.panZoomDisableOnMobile == &quot;on&quot;) {
					// NO KEN BURNS ON MOBILE DEVICES

				} else {
					if (dimg.data(&#x27;kenburn&#x27;)!=undefined) {
					   dimg.data(&#x27;kenburn&#x27;).restart();
					   startKenBurn(container,opt,true)
					}
				}
			});

			var nextli = container.find(&#x27;&gt;ul &gt;li:eq(&#x27;+opt.next+&#x27;)&#x27;);



			var arr = container.parent().find(&#x27;.tparrows&#x27;);
			if (arr.hasClass(&quot;preview2&quot;))
				arr.css({width:(parseInt(arr.css(&#x27;minWidth&#x27;),0))});


			animateTheCaptions(nextli, opt,true);
			//restartBannerTimer(opt,container);
			setBulPos(container,opt);

		}




		/*********************************
			-	CHECK IF BROWSER IS IE	-
		********************************/
		var isIE = function( version, comparison ){
		    var $div = jQuery(&#x27;&lt;div style=&quot;display:none;&quot;/&gt;&#x27;).appendTo(jQuery(&#x27;body&#x27;));
		    $div.html(&#x27;&lt;!--[if &#x27;+(comparison||&#x27;&#x27;)+&#x27; IE &#x27;+(version||&#x27;&#x27;)+&#x27;]&gt;&lt;a&gt;&amp;nbsp;&lt;/a&gt;&lt;![endif]--&gt;&#x27;);
		    var ieTest = $div.find(&#x27;a&#x27;).length;
		    $div.remove();
		    return ieTest;
		}



		var callingNewSlide = function(opt,container) {
						// CHECK THE LOOPS !!
						if (opt.next==container.find(&#x27;&gt;ul &gt;li&#x27;).length-1) {
								opt.looptogo=opt.looptogo-1;
								if (opt.looptogo&lt;=0)
										opt.stopLoop=&quot;on&quot;;
							}
						swapSlide(container,opt);

		}






		////////////////////////////////
		//	-	CREATE THE BULLETS -  //
		////////////////////////////////
		var createBullets = function(container,opt) {
			var starthidebullets = &quot;hidebullets&quot;;
			if (opt.hideThumbs==0) starthidebullets = &quot;&quot;;

			if (opt.navigationType==&quot;bullet&quot;  || opt.navigationType==&quot;both&quot;) {
						container.parent().append(&#x27;&lt;div class=&quot;tp-bullets &#x27;+starthidebullets+&#x27; simplebullets &#x27;+opt.navigationStyle+&#x27;&quot;&gt;&lt;/div&gt;&#x27;);
			}

			var bullets = container.parent().find(&#x27;.tp-bullets&#x27;);
			container.find(&#x27;&gt;ul:first &gt;li&#x27;).each(function(i) {
							var src=container.find(&quot;&gt;ul:first &gt;li:eq(&quot;+i+&quot;) img:first&quot;).attr(&#x27;src&#x27;);
							bullets.append(&#x27;&lt;div class=&quot;bullet&quot;&gt;&lt;/div&gt;&#x27;);
							var bullet= bullets.find(&#x27;.bullet:first&#x27;);
				});
			// ADD THE BULLET CLICK FUNCTION HERE
			bullets.find(&#x27;.bullet&#x27;).each(function(i) {
				var bul = jQuery(this);
				if (i==opt.slideamount-1) bul.addClass(&#x27;last&#x27;);
				if (i==0) bul.addClass(&#x27;first&#x27;);

				bul.click(function() {
					var sameslide = false,
						buli = bul.index();

					if (opt.navigationArrows==&quot;withbullet&quot; || opt.navigationArrows==&quot;nexttobullets&quot;)
						buli = bul.index()-1;

					if (buli == opt.act) sameslide=true;

					if (opt.transition==0 &amp;&amp; !sameslide) {
						opt.next = buli;
						callingNewSlide(opt,container);
					}
				});

			});
			bullets.append(&#x27;&lt;div class=&quot;tpclear&quot;&gt;&lt;/div&gt;&#x27;);
			setBulPos(container,opt);
		}

		//////////////////////
		//	CREATE ARROWS	//
		/////////////////////
		var createArrows = function(container,opt) {
						var bullets = container.find(&#x27;.tp-bullets&#x27;),
							hidden=&quot;&quot;,
							starthidearrows = &quot;hidearrows&quot;,
							arst= opt.navigationStyle;

						if (opt.hideThumbs==0) starthidearrows = &quot;&quot;;


						if (opt.navigationArrows==&quot;none&quot;) hidden=&quot;visibility:hidden;display:none&quot;;
						opt.soloArrowStyle = &quot;default&quot;+&quot; &quot;+opt.navigationStyle;

						if (opt.navigationArrows!=&quot;none&quot; &amp;&amp; opt.navigationArrows!=&quot;nexttobullets&quot;) arst = opt.soloArrowStyle;

						function aArrow(dir) {
							container.parent().append(&#x27;&lt;div style=&quot;&#x27;+hidden+&#x27;&quot; class=&quot;tp-&#x27;+dir+&#x27;arrow &#x27;+starthidearrows+&#x27; tparrows &#x27;+arst+&#x27;&quot;&gt;&lt;div class=&quot;tp-arr-allwrapper&quot;&gt;&lt;div class=&quot;tp-arr-iwrapper&quot;&gt;&lt;div class=&quot;tp-arr-imgholder&quot;&gt;&lt;/div&gt;&lt;div class=&quot;tp-arr-imgholder2&quot;&gt;&lt;/div&gt;&lt;div class=&quot;tp-arr-titleholder&quot;&gt;&lt;/div&gt;&lt;div class=&quot;tp-arr-subtitleholder&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&#x27;);
						}
						aArrow(&quot;left&quot;);
						aArrow(&quot;right&quot;);

						// 	THE LEFT / RIGHT BUTTON CLICK !	 //
						container.parent().find(&#x27;.tp-rightarrow&#x27;).click(function() {
							if (opt.transition==0) {
									if (container.data(&#x27;showus&#x27;) !=undefined &amp;&amp; container.data(&#x27;showus&#x27;) != -1)
										opt.next = container.data(&#x27;showus&#x27;)-1;
									else
										opt.next = opt.next+1;
									container.data(&#x27;showus&#x27;,-1);
									if (opt.next &gt;= opt.slideamount) opt.next=0;
									if (opt.next&lt;0) opt.next=0;

									if (opt.act !=opt.next)
										callingNewSlide(opt,container);
							}
						});

						container.parent().find(&#x27;.tp-leftarrow&#x27;).click(function() {
							if (opt.transition==0) {
									opt.next = opt.next-1;
									opt.leftarrowpressed=1;
									if (opt.next &lt; 0) opt.next=opt.slideamount-1;
									callingNewSlide(opt,container);
							}
						});

						setBulPos(container,opt);

		}

		//////////////////////////////////
		//	ENABLE KEYBOARD INTERACTION	//
		//////////////////////////////////
		var createKeyboard = function(container,opt) {
						// 	THE LEFT / RIGHT BUTTON CLICK !	 //
						jQuery(document).keydown(function(e){
							if (opt.transition==0 &amp;&amp; e.keyCode == 39) {
									if (container.data(&#x27;showus&#x27;) !=undefined &amp;&amp; container.data(&#x27;showus&#x27;) != -1)
										opt.next = container.data(&#x27;showus&#x27;)-1;
									else
										opt.next = opt.next+1;
									container.data(&#x27;showus&#x27;,-1);
									if (opt.next &gt;= opt.slideamount) opt.next=0;
									if (opt.next&lt;0) opt.next=0;
									if (opt.act !=opt.next)
										callingNewSlide(opt,container);
							}

							if (opt.transition==0 &amp;&amp; e.keyCode == 37) {
									opt.next = opt.next-1;
									opt.leftarrowpressed=1;
									if (opt.next &lt; 0) opt.next=opt.slideamount-1;
									callingNewSlide(opt,container);
							}
						});

						setBulPos(container,opt);

		}

		////////////////////////////
		// SET THE SWIPE FUNCTION //
		////////////////////////////
		var swipeAction = function(container,opt) {
			// TOUCH ENABLED SCROLL
				var aps = &quot;vertical&quot;;

				if (opt.touchenabled==&quot;on&quot;) {
							if (opt.drag_block_vertical == true)
							    aps = &quot;none&quot;;

							container.swipe({
								allowPageScroll:aps,
								fingers:opt.swipe_min_touches,
								treshold:opt.swipe_treshold,
								swipe:function(event,direction,distance,duration,fingerCount,fingerData) {
									switch (direction) {
										case &quot;left&quot;:
											 if (opt.transition==0) {
																opt.next = opt.next+1;
																if (opt.next == opt.slideamount) opt.next=0;
																callingNewSlide(opt,container);
														}
										break;
										case &quot;right&quot;:
											if (opt.transition==0) {
																opt.next = opt.next-1;
																opt.leftarrowpressed=1;
																if (opt.next &lt; 0) opt.next=opt.slideamount-1;
																callingNewSlide(opt,container);
														}
										break;
										case &quot;up&quot;:
											if (aps==&quot;none&quot;)
												jQuery(&quot;html, body&quot;).animate({scrollTop:(container.offset().top + container.height())+&quot;px&quot;});
										break;
										case &quot;down&quot;:
											if (aps==&quot;none&quot;)
												jQuery(&quot;html, body&quot;).animate({scrollTop:(container.offset().top - jQuery(window).height())+&quot;px&quot;});
										break;
									}
								}
							})

				}

		}




		////////////////////////////////////////////////////////////////
		// SHOW AND HIDE THE THUMBS IF MOUE GOES OUT OF THE BANNER  ///
		//////////////////////////////////////////////////////////////
		var hideThumbs = function(container,opt) {

			var bullets = container.parent().find(&#x27;.tp-bullets&#x27;),
				ca = container.parent().find(&#x27;.tparrows&#x27;);

			if (bullets==null) {
				container.append(&#x27;&lt;div class=&quot;.tp-bullets&quot;&gt;&lt;/div&gt;&#x27;);
				var bullets = container.parent().find(&#x27;.tp-bullets&#x27;);
			}

			if (ca==null) {
				container.append(&#x27;&lt;div class=&quot;.tparrows&quot;&gt;&lt;/div&gt;&#x27;);
				var ca = container.parent().find(&#x27;.tparrows&#x27;);
			}


			//var bp = (thumbs.parent().outerHeight(true) - opt.height)/2;

			//	ADD THUMBNAIL IMAGES FOR THE BULLETS //
			container.data(&#x27;hideThumbs&#x27;,opt.hideThumbs);

			bullets.addClass(&quot;hidebullets&quot;);
			ca.addClass(&quot;hidearrows&quot;);

			if (is_mobile()) {
				try{
					container.hammer().on(&#x27;touch&#x27;, function() {
						container.addClass(&quot;hovered&quot;);
						if (opt.onHoverStop==&quot;on&quot;)
							container.trigger(&#x27;stoptimer&#x27;);
						clearTimeout(container.data(&#x27;hideThumbs&#x27;));
						bullets.removeClass(&quot;hidebullets&quot;);
						ca.removeClass(&quot;hidearrows&quot;);


					});

					container.hammer().on(&#x27;release&#x27;, function() {
						container.removeClass(&quot;hovered&quot;);
						container.trigger(&#x27;starttimer&#x27;);
						if (!container.hasClass(&quot;hovered&quot;) &amp;&amp; !bullets.hasClass(&quot;hovered&quot;))
							container.data(&#x27;hideThumbs&#x27;, setTimeout(function() {
									bullets.addClass(&quot;hidebullets&quot;);
									ca.addClass(&quot;hidearrows&quot;);
									container.trigger(&#x27;starttimer&#x27;);
							},opt.hideNavDelayOnMobile));
					});
				} catch(e) {}

			} else {
				bullets.hover(function() {
				opt.overnav = true;
				if (opt.onHoverStop==&quot;on&quot;)
					container.trigger(&#x27;stoptimer&#x27;);
				bullets.addClass(&quot;hovered&quot;);
				clearTimeout(container.data(&#x27;hideThumbs&#x27;));
				bullets.removeClass(&quot;hidebullets&quot;);
				ca.removeClass(&quot;hidearrows&quot;);
					},
				function() {
					opt.overnav = false;
					container.trigger(&#x27;starttimer&#x27;);
					bullets.removeClass(&quot;hovered&quot;);
					if (!container.hasClass(&quot;hovered&quot;) &amp;&amp; !bullets.hasClass(&quot;hovered&quot;))
						container.data(&#x27;hideThumbs&#x27;, setTimeout(function() {
						bullets.addClass(&quot;hidebullets&quot;);
						ca.addClass(&quot;hidearrows&quot;);
						},opt.hideThumbs));
				});


				ca.hover(function() {
					opt.overnav = true;
					if (opt.onHoverStop==&quot;on&quot;)
						container.trigger(&#x27;stoptimer&#x27;);
					bullets.addClass(&quot;hovered&quot;);
					clearTimeout(container.data(&#x27;hideThumbs&#x27;));
					bullets.removeClass(&quot;hidebullets&quot;);
					ca.removeClass(&quot;hidearrows&quot;);

				},
				function() {
					opt.overnav = false;
					container.trigger(&#x27;starttimer&#x27;);
					bullets.removeClass(&quot;hovered&quot;);
					});



				container.on(&#x27;mouseenter&#x27;, function() {
					container.addClass(&quot;hovered&quot;);
					if (opt.onHoverStop==&quot;on&quot;)
						container.trigger(&#x27;stoptimer&#x27;);
					clearTimeout(container.data(&#x27;hideThumbs&#x27;));
					bullets.removeClass(&quot;hidebullets&quot;);
					ca.removeClass(&quot;hidearrows&quot;);


				});

				container.on(&#x27;mouseleave&#x27;, function() {
					container.removeClass(&quot;hovered&quot;);
					container.trigger(&#x27;starttimer&#x27;);
					if (!container.hasClass(&quot;hovered&quot;) &amp;&amp; !bullets.hasClass(&quot;hovered&quot;))
						container.data(&#x27;hideThumbs&#x27;, setTimeout(function() {
								bullets.addClass(&quot;hidebullets&quot;);
								ca.addClass(&quot;hidearrows&quot;);
						},opt.hideThumbs));
				});
			}


		}


		//////////////////////////////
		//	SET POSITION OF BULLETS	//
		//////////////////////////////
		var setBulPos = function(container,opt) {
			var topcont=container.parent();
			var bullets=topcont.find(&#x27;.tp-bullets&#x27;);

			if (opt.navigationType==&quot;thumb&quot;) {
				bullets.find(&#x27;.thumb&#x27;).each(function(i) {
					var thumb = jQuery(this);

					thumb.css({&#x27;width&#x27;:opt.thumbWidth * opt.bw+&quot;px&quot;, &#x27;height&#x27;:opt.thumbHeight*opt.bh+&quot;px&quot;});

				})
				var bup = bullets.find(&#x27;.tp-mask&#x27;);

				bup.width(opt.thumbWidth*opt.thumbAmount * opt.bw);
				bup.height(opt.thumbHeight * opt.bh);
				bup.parent().width(opt.thumbWidth*opt.thumbAmount * opt.bw);
				bup.parent().height(opt.thumbHeight * opt.bh);
			}


			var tl = topcont.find(&#x27;.tp-leftarrow&#x27;);
			var tr = topcont.find(&#x27;.tp-rightarrow&#x27;);

			if (opt.navigationType==&quot;thumb&quot; &amp;&amp; opt.navigationArrows==&quot;nexttobullets&quot;) opt.navigationArrows=&quot;solo&quot;;
			// IM CASE WE HAVE NAVIGATION BULLETS TOGETHER WITH ARROWS
			if (opt.navigationArrows==&quot;nexttobullets&quot;) {
				tl.prependTo(bullets).css({&#x27;float&#x27;:&#x27;left&#x27;});
				tr.insertBefore(bullets.find(&#x27;.tpclear&#x27;)).css({&#x27;float&#x27;:&#x27;left&#x27;});
			}
			var loff=0;
			if (opt.forceFullWidth==&quot;on&quot;)
						loff = 0-opt.container.parent().offset().left;

			var gridposX = 0,
				gridposY = 0;

			if (opt.navigationInGrid==&quot;on&quot;) {
				gridposX = container.width()&gt;opt.startwidth ? (container.width() - opt.startwidth)/2 : 0,
				gridposY = container.height()&gt;opt.startheight ? (container.height() - opt.startheight)/2 : 0;
			}



			if (opt.navigationArrows!=&quot;none&quot; &amp;&amp; opt.navigationArrows!=&quot;nexttobullets&quot;) {
				var lv = opt.soloArrowLeftValign,
					lh = opt.soloArrowLeftHalign,
					rv = opt.soloArrowRightValign,
					rh = opt.soloArrowRightHalign,
					lvo = opt.soloArrowLeftVOffset,
					lho = opt.soloArrowLeftHOffset,
					rvo = opt.soloArrowRightVOffset,
					rho = opt.soloArrowRightHOffset;

				tl.css({&#x27;position&#x27;:&#x27;absolute&#x27;});
				tr.css({&#x27;position&#x27;:&#x27;absolute&#x27;});

				if (lv==&quot;center&quot;)	tl.css({&#x27;top&#x27;:&#x27;50%&#x27;,&#x27;marginTop&#x27;:(lvo-Math.round(tl.innerHeight()/2))+&quot;px&quot;})
				else
				if (lv==&quot;bottom&quot;)	tl.css({&#x27;top&#x27;:&#x27;auto&#x27;,&#x27;bottom&#x27;:(0+lvo)+&quot;px&quot;})
				else
				if (lv==&quot;top&quot;)	 	tl.css({&#x27;bottom&#x27;:&#x27;auto&#x27;,&#x27;top&#x27;:(0+lvo)+&quot;px&quot;});

				if (lh==&quot;center&quot;)	tl.css({&#x27;left&#x27;:&#x27;50%&#x27;,&#x27;marginLeft&#x27;:(loff+lho-Math.round(tl.innerWidth()/2))+&quot;px&quot;})
				else
				if (lh==&quot;left&quot;)	tl.css({&#x27;left&#x27;:(gridposX+lho+loff)+&quot;px&quot;})
				else
				if (lh==&quot;right&quot;)	tl.css({&#x27;right&#x27;:(gridposX+lho-loff)+&quot;px&quot;});

				if (rv==&quot;center&quot;)	tr.css({&#x27;top&#x27;:&#x27;50%&#x27;,&#x27;marginTop&#x27;:(rvo-Math.round(tr.innerHeight()/2))+&quot;px&quot;})
				else
				if (rv==&quot;bottom&quot;)	tr.css({&#x27;top&#x27;:&#x27;auto&#x27;,&#x27;bottom&#x27;:(0+rvo)+&quot;px&quot;})
				else
				if (rv==&quot;top&quot;)	tr.css({&#x27;bottom&#x27;:&#x27;auto&#x27;,&#x27;top&#x27;:(0+rvo)+&quot;px&quot;})

				if (rh==&quot;center&quot;)	tr.css({&#x27;left&#x27;:&#x27;50%&#x27;,&#x27;marginLeft&#x27;:(loff+rho-Math.round(tr.innerWidth()/2))+&quot;px&quot;})
				else
				if (rh==&quot;left&quot;)	tr.css({&#x27;left&#x27;:(gridposX+rho+loff)+&quot;px&quot;})
				else
				if (rh==&quot;right&quot;)	tr.css({&#x27;right&#x27;:(gridposX+rho-loff)+&quot;px&quot;})


				if (tl.position()!=null)
					tl.css({&#x27;top&#x27;:Math.round(parseInt(tl.position().top,0))+&quot;px&quot;});

				if (tr.position()!=null)
					tr.css({&#x27;top&#x27;:Math.round(parseInt(tr.position().top,0))+&quot;px&quot;});
			}

			if (opt.navigationArrows==&quot;none&quot;) {
				tl.css({&#x27;visibility&#x27;:&#x27;hidden&#x27;});
				tr.css({&#x27;visibility&#x27;:&#x27;hidden&#x27;});
			}

			// SET THE POSITIONS OF THE BULLETS // THUMBNAILS
			var nv = opt.navigationVAlign,
				nh = opt.navigationHAlign,
				nvo = opt.navigationVOffset * opt.bh,
				nho = opt.navigationHOffset * opt.bw;

			if (nv==&quot;center&quot;)	 bullets.css({&#x27;top&#x27;:&#x27;50%&#x27;,&#x27;marginTop&#x27;:(nvo-Math.round(bullets.innerHeight()/2))+&quot;px&quot;});
			if (nv==&quot;bottom&quot;)	 bullets.css({&#x27;bottom&#x27;:(0+nvo)+&quot;px&quot;});
			if (nv==&quot;top&quot;)	 bullets.css({&#x27;top&#x27;:(0+nvo)+&quot;px&quot;});

			if (nh==&quot;center&quot;)	bullets.css({&#x27;left&#x27;:&#x27;50%&#x27;,&#x27;marginLeft&#x27;:(loff+nho-Math.round(bullets.innerWidth()/2))+&quot;px&quot;});
			if (nh==&quot;left&quot;)	bullets.css({&#x27;left&#x27;:(0+nho+loff)+&quot;px&quot;});
			if (nh==&quot;right&quot;)	bullets.css({&#x27;right&#x27;:(0+nho-loff)+&quot;px&quot;});
		}


		/*******************************************************
			-	HANDLING OF PREVIEWS AND CUSTOM PREVIEWS	-
		*******************************************************/

		var handleSpecialPreviews = function(opt) {

			var container= opt.container;
			// FILL WITH INFOS THE NAVIGATION ARROWS
			opt.beforli = opt.next-1;
			opt.comingli = opt.next+1;

			if (opt.beforli&lt;0) opt.beforli = opt.slideamount-1;
			if (opt.comingli&gt;=opt.slideamount) opt.comingli = 0;

			var comingli = container.find(&#x27;&gt;ul:first-child &gt;li:eq(&#x27;+opt.comingli+&#x27;)&#x27;),
				beforli = container.find(&#x27;&gt;ul:first-child &gt;li:eq(&#x27;+opt.beforli+&#x27;)&#x27;),
				previmgsrc = beforli.find(&#x27;.defaultimg&#x27;).attr(&#x27;src&#x27;),
				nextimgsrc = comingli.find(&#x27;.defaultimg&#x27;).attr(&#x27;src&#x27;);

			// SAVE REFERENCES
			if (opt.arr == undefined) {
				opt.arr = container.parent().find(&#x27;.tparrows&#x27;),
				opt.rar = container.parent().find(&#x27;.tp-rightarrow&#x27;),
				opt.lar = container.parent().find(&#x27;.tp-leftarrow&#x27;),
				opt.raimg = opt.rar.find(&#x27;.tp-arr-imgholder&#x27;),
				opt.laimg = opt.lar.find(&#x27;.tp-arr-imgholder&#x27;),
				opt.raimg_b = opt.rar.find(&#x27;.tp-arr-imgholder2&#x27;),
				opt.laimg_b = opt.lar.find(&#x27;.tp-arr-imgholder2&#x27;),
				opt.ratit = opt.rar.find(&#x27;.tp-arr-titleholder&#x27;),
				opt.latit = opt.lar.find(&#x27;.tp-arr-titleholder&#x27;);
			}

			// READ REFERENCES
				var arr = opt.arr,
					rar = opt.rar,
					lar = opt.lar,
					raimg = opt.raimg,
					laimg = opt.laimg,
					raimg_b = opt.raimg_b,
					laimg_b = opt.laimg_b,
					ratit = opt.ratit,
					latit = opt.latit;


			if (comingli.data(&#x27;title&#x27;) != undefined) ratit.html(comingli.data(&#x27;title&#x27;));
			if (beforli.data(&#x27;title&#x27;) != undefined) latit.html(beforli.data(&#x27;title&#x27;));


			if (rar.hasClass(&quot;itishovered&quot;)) {
					rar.width(ratit.outerWidth(true)+parseInt(rar.css(&#x27;minWidth&#x27;),0));
				}

			if (lar.hasClass(&quot;itishovered&quot;)) {
					lar.width(latit.outerWidth(true)+parseInt(lar.css(&#x27;minWidth&#x27;),0));
				}

			if (arr.hasClass(&quot;preview2&quot;) &amp;&amp; !arr.hasClass(&quot;hashoveralready&quot;)) {

				arr.addClass(&quot;hashoveralready&quot;);

				if (!is_mobile())
					arr.hover(function() {

						var arr = jQuery(this),
							th = arr.find(&#x27;.tp-arr-titleholder&#x27;);
						if (jQuery(window).width()&gt;767)
							arr.width(th.outerWidth(true)+parseInt(arr.css(&#x27;minWidth&#x27;),0));
						arr.addClass(&quot;itishovered&quot;);
					},function() {
						var arr = jQuery(this),
							th = arr.find(&#x27;.tp-arr-titleholder&#x27;);
						arr.css({width:parseInt(arr.css(&#x27;minWidth&#x27;),0)});
						arr.removeClass(&quot;itishovered&quot;);
					});
				else {
					var arr = jQuery(this),
						th = arr.find(&#x27;.tp-arr-titleholder&#x27;);
						th.addClass(&quot;alwayshidden&quot;);
					punchgs.TweenLite.set(th,{autoAlpha:0});
				}

			}

			if (beforli.data(&#x27;thumb&#x27;)!=undefined) previmgsrc = beforli.data(&#x27;thumb&#x27;);
			if (comingli.data(&#x27;thumb&#x27;)!=undefined) nextimgsrc = comingli.data(&#x27;thumb&#x27;)


			// CHANGE THE IMAGE SOURCE (AND ANIMATE IF PREVIEW4 MODE IS ON
			if (!arr.hasClass(&quot;preview4&quot;)) {

				punchgs.TweenLite.to(raimg,0.5,{autoAlpha:0,onComplete:function() {
					raimg.css({&#x27;backgroundImage&#x27;:&#x27;url(&#x27;+nextimgsrc+&#x27;)&#x27;});
					laimg.css({&#x27;backgroundImage&#x27;:&#x27;url(&#x27;+previmgsrc+&#x27;)&#x27;});
				}});
				punchgs.TweenLite.to(laimg,0.5,{autoAlpha:0,onComplete:function() {
					punchgs.TweenLite.to(raimg,0.5,{autoAlpha:1,delay:0.2});
					punchgs.TweenLite.to(laimg,0.5,{autoAlpha:1,delay:0.2});
				}});
			} else {

				raimg_b.css({&#x27;backgroundImage&#x27;:&#x27;url(&#x27;+nextimgsrc+&#x27;)&#x27;});
				laimg_b.css({&#x27;backgroundImage&#x27;:&#x27;url(&#x27;+previmgsrc+&#x27;)&#x27;});

				punchgs.TweenLite.fromTo(raimg_b,0.8,{force3D:punchgs.force3d,x:0},{x:-raimg.width(),ease:punchgs.Power3.easeOut,delay:1,onComplete:function() {
					raimg.css({&#x27;backgroundImage&#x27;:&#x27;url(&#x27;+nextimgsrc+&#x27;)&#x27;});
					punchgs.TweenLite.set(raimg_b,{x:0});
				}});
				punchgs.TweenLite.fromTo(laimg_b,0.8,{force3D:punchgs.force3d,x:0},{x:raimg.width(),ease:punchgs.Power3.easeOut,delay:1,onComplete:function() {
					laimg.css({&#x27;backgroundImage&#x27;:&#x27;url(&#x27;+previmgsrc+&#x27;)&#x27;});
					punchgs.TweenLite.set(laimg_b,{x:0});
				}});



				punchgs.TweenLite.fromTo(raimg,0.8,{x:0},{force3D:punchgs.force3d,x:-raimg.width(),ease:punchgs.Power3.easeOut,delay:1,onComplete:function() {
					punchgs.TweenLite.set(raimg,{x:0});
				}});
				punchgs.TweenLite.fromTo(laimg,0.8,{x:0},{force3D:punchgs.force3d,x:raimg.width(),ease:punchgs.Power3.easeOut,delay:1,onComplete:function() {
					punchgs.TweenLite.set(laimg,{x:0});
				}});
			}

			// HOVER EFFECTS ARE SPECIAL ON PREVIEW4
			if (rar.hasClass(&quot;preview4&quot;) &amp;&amp; !rar.hasClass(&quot;hashoveralready&quot;)) {

				rar.addClass(&quot;hashoveralready&quot;);
				rar.hover(function() {
					var iw = jQuery(this).find(&#x27;.tp-arr-iwrapper&#x27;);
					var all = jQuery(this).find(&#x27;.tp-arr-allwrapper&#x27;);
					punchgs.TweenLite.fromTo(iw,0.4,{x:iw.width()},{x:0,delay:0.3,ease:punchgs.Power3.easeOut,overwrite:&quot;all&quot;});
					punchgs.TweenLite.to(all,0.2,{autoAlpha:1,overwrite:&quot;all&quot;});

				},function() {
					var iw = jQuery(this).find(&#x27;.tp-arr-iwrapper&#x27;);
					var all = jQuery(this).find(&#x27;.tp-arr-allwrapper&#x27;);
					punchgs.TweenLite.to(iw,0.4,{x:iw.width(),ease:punchgs.Power3.easeOut,delay:0.2,overwrite:&quot;all&quot;});
					punchgs.TweenLite.to(all,0.2,{delay:0.6,autoAlpha:0,overwrite:&quot;all&quot;});
				});


				lar.hover(function() {
					var iw = jQuery(this).find(&#x27;.tp-arr-iwrapper&#x27;);
					var all = jQuery(this).find(&#x27;.tp-arr-allwrapper&#x27;);
					punchgs.TweenLite.fromTo(iw,0.4,{x:(0-iw.width())},{x:0,delay:0.3,ease:punchgs.Power3.easeOut,overwrite:&quot;all&quot;});
					punchgs.TweenLite.to(all,0.2,{autoAlpha:1,overwrite:&quot;all&quot;});

				},function() {
					var iw = jQuery(this).find(&#x27;.tp-arr-iwrapper&#x27;);
					var all = jQuery(this).find(&#x27;.tp-arr-allwrapper&#x27;);
					punchgs.TweenLite.to(iw,0.4,{x:(0-iw.width()),ease:punchgs.Power3.easeOut,delay:0.2,overwrite:&quot;all&quot;});
					punchgs.TweenLite.to(all,0.2,{delay:0.6,autoAlpha:0,overwrite:&quot;all&quot;});
				});

			}
			// END OF NAVIGATION ARROW CONTENT FILLING

		}
		//////////////////////////////////////////////////////////
		//	-	SET THE IMAGE SIZE TO FIT INTO THE CONTIANER -  //
		////////////////////////////////////////////////////////
		var setSize = function(img,opt) {


				opt.container.closest(&#x27;.forcefullwidth_wrapper_tp_banner&#x27;).find(&#x27;.tp-fullwidth-forcer&#x27;).css({&#x27;height&#x27;:opt.container.height()});
				opt.container.closest(&#x27;.rev_slider_wrapper&#x27;).css({&#x27;height&#x27;:opt.container.height()});


				opt.width=parseInt(opt.container.width(),0);
				opt.height=parseInt(opt.container.height(),0);



				opt.bw= (opt.width / opt.startwidth);
				opt.bh = (opt.height / opt.startheight);

				if (opt.bh&gt;opt.bw) opt.bh=opt.bw;
				if (opt.bh&lt;opt.bw) opt.bw = opt.bh;
				if (opt.bw&lt;opt.bh) opt.bh = opt.bw;
				if (opt.bh&gt;1) { opt.bw=1; opt.bh=1; }
				if (opt.bw&gt;1) {opt.bw=1; opt.bh=1; }


				//opt.height= opt.startheight * opt.bh;
				opt.height = Math.round(opt.startheight * (opt.width/opt.startwidth));


				if (opt.height&gt;opt.startheight &amp;&amp; opt.autoHeight!=&quot;on&quot;) opt.height=opt.startheight;


				if (opt.fullScreen==&quot;on&quot;) {
						opt.height = opt.bw * opt.startheight;
						var cow = opt.container.parent().width();
						var coh = jQuery(window).height();

						if (opt.fullScreenOffsetContainer!=undefined) {
							try{
								var offcontainers = opt.fullScreenOffsetContainer.split(&quot;,&quot;);
								jQuery.each(offcontainers,function(index,searchedcont) {
									coh = coh - jQuery(searchedcont).outerHeight(true);
									if (coh&lt;opt.minFullScreenHeight) coh=opt.minFullScreenHeight;
								});
							} catch(e) {}

							 try{

								 if (opt.fullScreenOffset.split(&quot;%&quot;).length&gt;1 &amp;&amp; opt.fullScreenOffset!=undefined &amp;&amp; opt.fullScreenOffset.length&gt;0) {

										coh = coh - (jQuery(window).height()* parseInt(opt.fullScreenOffset,0)/100);
								 } else {
								 	if (opt.fullScreenOffset!=undefined &amp;&amp; opt.fullScreenOffset.length&gt;0)
								 		coh = coh - parseInt(opt.fullScreenOffset,0);
								 }


								 if (coh&lt;opt.minFullScreenHeight) coh=opt.minFullScreenHeight;

							} catch(e) {}
						}

						opt.container.parent().height(coh);

						opt.container.closest(&#x27;.rev_slider_wrapper&#x27;).height(coh);
						opt.container.css({&#x27;height&#x27;:&#x27;100%&#x27;});

						opt.height=coh;
						if (opt.minHeight!=undefined &amp;&amp; opt.height&lt;opt.minHeight)
							opt.height = opt.minHeight;
				} else {
						if (opt.minHeight!=undefined &amp;&amp; opt.height&lt;opt.minHeight)
							opt.height = opt.minHeight;

						opt.container.height(opt.height);
				}


				opt.slotw=Math.ceil(opt.width/opt.slots);

				if (opt.fullScreen==&quot;on&quot;)
					opt.sloth=Math.ceil(jQuery(window).height()/opt.slots);
				else
					opt.sloth=Math.ceil(opt.height/opt.slots);

				if (opt.autoHeight==&quot;on&quot;)
				 	opt.sloth=Math.ceil(img.height()/opt.slots);




		}




		/////////////////////////////////////////
		//	-	PREPARE THE SLIDES / SLOTS -  //
		///////////////////////////////////////
		var prepareSlides = function(container,opt) {

			container.find(&#x27;.tp-caption&#x27;).each(function() { jQuery(this).addClass(jQuery(this).data(&#x27;transition&#x27;)); jQuery(this).addClass(&#x27;start&#x27;) });

			// PREPARE THE UL CONTAINER TO HAVEING MAX HEIGHT AND HEIGHT FOR ANY SITUATION
			container.find(&#x27;&gt;ul:first&#x27;).css({overflow:&#x27;hidden&#x27;,width:&#x27;100%&#x27;,height:&#x27;100%&#x27;,maxHeight:container.parent().css(&#x27;maxHeight&#x27;)}).addClass(&quot;tp-revslider-mainul&quot;);
			if (opt.autoHeight==&quot;on&quot;) {
			   container.find(&#x27;&gt;ul:first&#x27;).css({overflow:&#x27;hidden&#x27;,width:&#x27;100%&#x27;,height:&#x27;100%&#x27;,maxHeight:&quot;none&quot;});
			   container.css({&#x27;maxHeight&#x27;:&#x27;none&#x27;});
			   container.parent().css({&#x27;maxHeight&#x27;:&#x27;none&#x27;});
			 }

			container.find(&#x27;&gt;ul:first &gt;li&#x27;).each(function(j) {
				var li=jQuery(this);
				li.addClass(&quot;tp-revslider-slidesli&quot;);

				// MAKE LI OVERFLOW HIDDEN FOR FURTHER ISSUES
				li.css({&#x27;width&#x27;:&#x27;100%&#x27;,&#x27;height&#x27;:&#x27;100%&#x27;,&#x27;overflow&#x27;:&#x27;hidden&#x27;});

				// IF LINK ON SLIDE EXISTS, NEED TO CREATE A PROPER LAYER FOR IT.
				if (li.data(&#x27;link&#x27;)!=undefined) {
					var link = li.data(&#x27;link&#x27;);
					var target=&quot;_self&quot;;
					var zindex=60;
					if (li.data(&#x27;slideindex&#x27;)==&quot;back&quot;) zindex=0;
					var linktoslide=checksl = li.data(&#x27;linktoslide&#x27;);
					if (linktoslide != undefined) {
						if (linktoslide!=&quot;next&quot; &amp;&amp; linktoslide!=&quot;prev&quot;)
							container.find(&#x27;&gt;ul:first-child &gt;li&#x27;).each(function() {
									var t = jQuery(this);
									if (t.data(&#x27;origindex&#x27;)+1==checksl) linktoslide = t.index()+1;
							});
					}
					if (li.data(&#x27;target&#x27;)!=undefined) target=li.data(&#x27;target&#x27;);
					if (link!=&quot;slide&quot;) linktoslide=&quot;no&quot;;
					var apptxt = &#x27;&lt;div class=&quot;tp-caption sft slidelink&quot; style=&quot;width:100%;height:100%;z-index:&#x27;+zindex+&#x27;;&quot; data-x=&quot;center&quot; data-y=&quot;center&quot; data-linktoslide=&quot;&#x27;+linktoslide+&#x27;&quot; data-start=&quot;0&quot;&gt;&lt;a style=&quot;width:100%;height:100%;display:block&quot;&#x27;;
					if (link!=&quot;slide&quot;) apptxt = apptxt + &#x27; target=&quot;&#x27;+target+&#x27;&quot; href=&quot;&#x27;+link+&#x27;&quot;&#x27;;
					apptxt = apptxt + &#x27;&gt;&lt;span style=&quot;width:100%;height:100%;display:block&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&#x27;;

					li.append(apptxt);
				}
			});

			// RESOLVE OVERFLOW HIDDEN OF MAIN CONTAINER
			container.parent().css({&#x27;overflow&#x27;:&#x27;visible&#x27;});


			container.find(&#x27;&gt;ul:first &gt;li &gt;img&#x27;).each(function(j) {

				var img=jQuery(this);

				img.addClass(&#x27;defaultimg&#x27;);
				if (img.data(&#x27;lazyload&#x27;)!=undefined &amp;&amp; img.data(&#x27;lazydone&#x27;) != 1) {

				} else {
					setSize(img,opt);
				}

				if (isIE(8)) {
					img.data(&#x27;kenburns&#x27;,&quot;off&quot;);
				}

				// TURN OF KEN BURNS IF WE ARE ON MOBILE AND IT IS WISHED SO
				if (opt.panZoomDisableOnMobile == &quot;on&quot;  &amp;&amp; is_mobile()) {
					img.data(&#x27;kenburns&#x27;,&quot;off&quot;);
					img.data(&#x27;bgfit&#x27;,&quot;cover&quot;);
				}

				img.wrap(&#x27;&lt;div class=&quot;slotholder&quot; style=&quot;width:100%;height:100%;&quot;&#x27;+
						  &#x27;data-duration=&quot;&#x27;+img.data(&#x27;duration&#x27;)+&#x27;&quot;&#x27;+
						  &#x27;data-zoomstart=&quot;&#x27;+img.data(&quot;zoomstart&quot;)+&#x27;&quot;&#x27;+
						  &#x27;data-zoomend=&quot;&#x27;+img.data(&quot;zoomend&quot;)+&#x27;&quot;&#x27;+
						  &#x27;data-rotationstart=&quot;&#x27;+img.data(&quot;rotationstart&quot;)+&#x27;&quot;&#x27;+
						  &#x27;data-rotationend=&quot;&#x27;+img.data(&quot;rotationend&quot;)+&#x27;&quot;&#x27;+
						  &#x27;data-ease=&quot;&#x27;+img.data(&quot;ease&quot;)+&#x27;&quot;&#x27;+
						  &#x27;data-duration=&quot;&#x27;+img.data(&quot;duration&quot;)+&#x27;&quot;&#x27;+
						  &#x27;data-bgpositionend=&quot;&#x27;+img.data(&quot;bgpositionend&quot;)+&#x27;&quot;&#x27;+
						  &#x27;data-bgposition=&quot;&#x27;+img.data(&quot;bgposition&quot;)+&#x27;&quot;&#x27;+
						  &#x27;data-duration=&quot;&#x27;+img.data(&quot;duration&quot;)+&#x27;&quot;&#x27;+
						  &#x27;data-kenburns=&quot;&#x27;+img.data(&quot;kenburns&quot;)+&#x27;&quot;&#x27;+
						  &#x27;data-easeme=&quot;&#x27;+img.data(&quot;ease&quot;)+&#x27;&quot;&#x27;+
						  &#x27;data-bgfit=&quot;&#x27;+img.data(&quot;bgfit&quot;)+&#x27;&quot;&#x27;+
						  &#x27;data-bgfitend=&quot;&#x27;+img.data(&quot;bgfitend&quot;)+&#x27;&quot;&#x27;+
						  &#x27;data-owidth=&quot;&#x27;+img.data(&quot;owidth&quot;)+&#x27;&quot;&#x27;+
						  &#x27;data-oheight=&quot;&#x27;+img.data(&quot;oheight&quot;)+&#x27;&quot;&#x27;+
						  &#x27;&gt;&lt;/div&gt;&#x27;);

				if (opt.dottedOverlay!=&quot;none&quot; &amp;&amp; opt.dottedOverlay!=undefined)
						img.closest(&#x27;.slotholder&#x27;).append(&#x27;&lt;div class=&quot;tp-dottedoverlay &#x27;+opt.dottedOverlay+&#x27;&quot;&gt;&lt;/div&gt;&#x27;);

				var src=img.attr(&#x27;src&#x27;),
					ll = img.data(&#x27;lazyload&#x27;),
					bgfit = img.data(&#x27;bgfit&#x27;),
					bgrepeat = img.data(&#x27;bgrepeat&#x27;),
					bgposition = img.data(&#x27;bgposition&#x27;);


				if (bgfit==undefined) bgfit=&quot;cover&quot;;
				if (bgrepeat==undefined) bgrepeat=&quot;no-repeat&quot;;
				if (bgposition==undefined) bgposition=&quot;center center&quot;


				var pari = img.closest(&#x27;.slotholder&#x27;);
				img.replaceWith(&#x27;&lt;div class=&quot;tp-bgimg defaultimg&quot; data-lazyload=&quot;&#x27;+img.data(&#x27;lazyload&#x27;)+&#x27;&quot; data-bgfit=&quot;&#x27;+bgfit+&#x27;&quot;data-bgposition=&quot;&#x27;+bgposition+&#x27;&quot; data-bgrepeat=&quot;&#x27;+bgrepeat+&#x27;&quot; data-lazydone=&quot;&#x27;+img.data(&#x27;lazydone&#x27;)+&#x27;&quot; src=&quot;&#x27;+src+&#x27;&quot; data-src=&quot;&#x27;+src+&#x27;&quot; style=&quot;background-color:&#x27;+img.css(&quot;backgroundColor&quot;)+&#x27;;background-repeat:&#x27;+bgrepeat+&#x27;;background-image:url(&#x27;+src+&#x27;);background-size:&#x27;+bgfit+&#x27;;background-position:&#x27;+bgposition+&#x27;;width:100%;height:100%;&quot;&gt;&lt;/div&gt;&#x27;);

				if (isIE(8)) {
					pari.find(&#x27;.tp-bgimg&#x27;).css({backgroundImage:&quot;none&quot;,&#x27;background-image&#x27;:&#x27;none&#x27;});
					pari.find(&#x27;.tp-bgimg&#x27;).append(&#x27;&lt;img class=&quot;ieeightfallbackimage defaultimg&quot; src=&quot;&#x27;+src+&#x27;&quot; style=&quot;width:100%&quot;&gt;&#x27;);
				}

				img.css({&#x27;opacity&#x27;:0});
				img.data(&#x27;li-id&#x27;,j);

			});
		}


		///////////////////////
		// PREPARE THE SLIDE //
		//////////////////////
		var prepareOneSlide = function(slotholder,opt,visible,vorh) {

				var sh=slotholder,
					img = sh.find(&#x27;.defaultimg&#x27;),
					scalestart = sh.data(&#x27;zoomstart&#x27;),
					rotatestart = sh.data(&#x27;rotationstart&#x27;);

				if (img.data(&#x27;currotate&#x27;)!=undefined)
					rotatestart = img.data(&#x27;currotate&#x27;);
				if (img.data(&#x27;curscale&#x27;)!=undefined &amp;&amp; vorh==&quot;box&quot;)
					scalestart = img.data(&#x27;curscale&#x27;)*100;
				else
				if (img.data(&#x27;curscale&#x27;)!=undefined)
					scalestart = img.data(&#x27;curscale&#x27;);

				setSize(img,opt)

				var src = img.data(&#x27;src&#x27;),
					bgcolor=img.css(&#x27;backgroundColor&#x27;),
					w = opt.width,
					h = opt.height,
					fulloff = img.data(&quot;fxof&quot;),
					fullyoff=0;

				if (opt.autoHeight==&quot;on&quot;) h = opt.container.height();
				if (fulloff==undefined) fulloff=0;



				var off=0,
					bgfit = img.data(&#x27;bgfit&#x27;),
					bgrepeat = img.data(&#x27;bgrepeat&#x27;),
					bgposition = img.data(&#x27;bgposition&#x27;);

				if (bgfit==undefined) bgfit=&quot;cover&quot;;
				if (bgrepeat==undefined) bgrepeat=&quot;no-repeat&quot;;
				if (bgposition==undefined) bgposition=&quot;center center&quot;;

				if (isIE(8)) {
					sh.data(&#x27;kenburns&#x27;,&quot;off&quot;);
					var imgsrc=src;
			    	src=&quot;&quot;;
				}

				switch (vorh) {
					// BOX ANIMATION PREPARING
					case &quot;box&quot;:
						// SET THE MINIMAL SIZE OF A BOX
						var basicsize = 0,
							x = 0,
							y = 0;

						if (opt.sloth&gt;opt.slotw)
							basicsize=opt.sloth
						else
							basicsize=opt.slotw;

						if (!visible) {
							var off=0-basicsize;
						}

						opt.slotw = basicsize;
						opt.sloth = basicsize;
						var x=0;
						var y=0;

						if (sh.data(&#x27;kenburns&#x27;)==&quot;on&quot;) {
						   bgfit=scalestart;
						   if (bgfit.toString().length&lt;4)
							   bgfit = calculateKenBurnScales(bgfit,sh,opt);
						 }

						for (var j=0;j&lt;opt.slots;j++) {

							y=0;
							for (var i=0;i&lt;opt.slots;i++) 	{


								sh.append(&#x27;&lt;div class=&quot;slot&quot; &#x27;+
										  &#x27;style=&quot;position:absolute;&#x27;+
													&#x27;top:&#x27;+(fullyoff+y)+&#x27;px;&#x27;+
													&#x27;left:&#x27;+(fulloff+x)+&#x27;px;&#x27;+
													&#x27;width:&#x27;+basicsize+&#x27;px;&#x27;+
													&#x27;height:&#x27;+basicsize+&#x27;px;&#x27;+
													&#x27;overflow:hidden;&quot;&gt;&#x27;+

										  &#x27;&lt;div class=&quot;slotslide&quot; data-x=&quot;&#x27;+x+&#x27;&quot; data-y=&quot;&#x27;+y+&#x27;&quot; &#x27;+
										  			&#x27;style=&quot;position:absolute;&#x27;+
													&#x27;top:&#x27;+(0)+&#x27;px;&#x27;+
													&#x27;left:&#x27;+(0)+&#x27;px;&#x27;+
													&#x27;width:&#x27;+basicsize+&#x27;px;&#x27;+
													&#x27;height:&#x27;+basicsize+&#x27;px;&#x27;+
													&#x27;overflow:hidden;&quot;&gt;&#x27;+

										  &#x27;&lt;div style=&quot;position:absolute;&#x27;+
													&#x27;top:&#x27;+(0-y)+&#x27;px;&#x27;+
													&#x27;left:&#x27;+(0-x)+&#x27;px;&#x27;+
													&#x27;width:&#x27;+w+&#x27;px;&#x27;+
													&#x27;height:&#x27;+h+&#x27;px;&#x27;+
													&#x27;background-color:&#x27;+bgcolor+&#x27;;&#x27;+
													&#x27;background-image:url(&#x27;+src+&#x27;);&#x27;+
													&#x27;background-repeat:&#x27;+bgrepeat+&#x27;;&#x27;+
													&#x27;background-size:&#x27;+bgfit+&#x27;;background-position:&#x27;+bgposition+&#x27;;&quot;&gt;&#x27;+
										  &#x27;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&#x27;);
								y=y+basicsize;

								if (isIE(8)) {

									sh.find(&#x27;.slot &#x27;).last().find(&#x27;.slotslide&#x27;).append(&#x27;&lt;img src=&quot;&#x27;+imgsrc+&#x27;&quot;&gt;&#x27;);
									ieimgposition(sh,opt);
								}

								if (scalestart!=undefined &amp;&amp; rotatestart!=undefined)
										punchgs.TweenLite.set(sh.find(&#x27;.slot&#x27;).last(),{rotationZ:rotatestart});
							}
							x=x+basicsize;
						}
					break;

					// SLOT ANIMATION PREPARING
					case &quot;vertical&quot;:
					case &quot;horizontal&quot;:
						if (sh.data(&#x27;kenburns&#x27;)==&quot;on&quot;) {
						   bgfit=scalestart;
						   if (bgfit.toString().length&lt;4)
							   bgfit = calculateKenBurnScales(bgfit,sh,opt);
						 }
						 if (vorh == &quot;horizontal&quot;) {
							if (!visible) var off=0-opt.slotw;
							for (var i=0;i&lt;opt.slots;i++) {
									sh.append(&#x27;&lt;div class=&quot;slot&quot; style=&quot;position:absolute;&#x27;+
																	&#x27;top:&#x27;+(0+fullyoff)+&#x27;px;&#x27;+
																	&#x27;left:&#x27;+(fulloff+(i*opt.slotw))+&#x27;px;&#x27;+
																	&#x27;overflow:hidden;width:&#x27;+(opt.slotw+0.6)+&#x27;px;&#x27;+
																	&#x27;height:&#x27;+h+&#x27;px&quot;&gt;&#x27;+
									&#x27;&lt;div class=&quot;slotslide&quot; style=&quot;position:absolute;&#x27;+
																	&#x27;top:0px;left:&#x27;+off+&#x27;px;&#x27;+
																	&#x27;width:&#x27;+(opt.slotw+0.6)+&#x27;px;&#x27;+
																	&#x27;height:&#x27;+h+&#x27;px;overflow:hidden;&quot;&gt;&#x27;+
									&#x27;&lt;div style=&quot;background-color:&#x27;+bgcolor+&#x27;;&#x27;+
																	&#x27;position:absolute;top:0px;&#x27;+
																	&#x27;left:&#x27;+(0-(i*opt.slotw))+&#x27;px;&#x27;+
																	&#x27;width:&#x27;+w+&#x27;px;height:&#x27;+h+&#x27;px;&#x27;+
																	&#x27;background-image:url(&#x27;+src+&#x27;);&#x27;+
																	&#x27;background-repeat:&#x27;+bgrepeat+&#x27;;&#x27;+
																	&#x27;background-size:&#x27;+bgfit+&#x27;;background-position:&#x27;+bgposition+&#x27;;&quot;&gt;&#x27;+
									&#x27;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&#x27;);
									if (scalestart!=undefined &amp;&amp; rotatestart!=undefined)
										punchgs.TweenLite.set(sh.find(&#x27;.slot&#x27;).last(),{rotationZ:rotatestart});
									if (isIE(8)) {
									   sh.find(&#x27;.slot &#x27;).last().find(&#x27;.slotslide&#x27;).append(&#x27;&lt;img class=&quot;ieeightfallbackimage&quot; src=&quot;&#x27;+imgsrc+&#x27;&quot; style=&quot;width:100%;height:auto&quot;&gt;&#x27;);
									   ieimgposition(sh,opt);
								}
							}
						} else {
							if (!visible) var off=0-opt.sloth;
							for (var i=0;i&lt;opt.slots+2;i++) {
								sh.append(&#x27;&lt;div class=&quot;slot&quot; style=&quot;position:absolute;&#x27;+
														 &#x27;top:&#x27;+(fullyoff+(i*opt.sloth))+&#x27;px;&#x27;+
														 &#x27;left:&#x27;+(fulloff)+&#x27;px;&#x27;+
														 &#x27;overflow:hidden;&#x27;+
														 &#x27;width:&#x27;+w+&#x27;px;&#x27;+
														 &#x27;height:&#x27;+(opt.sloth)+&#x27;px&quot;&gt;&#x27;+

											 &#x27;&lt;div class=&quot;slotslide&quot; style=&quot;position:absolute;&#x27;+
																 &#x27;top:&#x27;+(off)+&#x27;px;&#x27;+
																 &#x27;left:0px;width:&#x27;+w+&#x27;px;&#x27;+
																 &#x27;height:&#x27;+opt.sloth+&#x27;px;&#x27;+
																 &#x27;overflow:hidden;&quot;&gt;&#x27;+
											&#x27;&lt;div style=&quot;background-color:&#x27;+bgcolor+&#x27;;&#x27;+
																	&#x27;position:absolute;&#x27;+
																	&#x27;top:&#x27;+(0-(i*opt.sloth))+&#x27;px;&#x27;+
																	&#x27;left:0px;&#x27;+
																	&#x27;width:&#x27;+w+&#x27;px;height:&#x27;+h+&#x27;px;&#x27;+
																	&#x27;background-image:url(&#x27;+src+&#x27;);&#x27;+
																	&#x27;background-repeat:&#x27;+bgrepeat+&#x27;;&#x27;+
																	&#x27;background-size:&#x27;+bgfit+&#x27;;background-position:&#x27;+bgposition+&#x27;;&quot;&gt;&#x27;+

											&#x27;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&#x27;);
									if (scalestart!=undefined &amp;&amp; rotatestart!=undefined)
										punchgs.TweenLite.set(sh.find(&#x27;.slot&#x27;).last(),{rotationZ:rotatestart});
									if (isIE(8)) {
								    	sh.find(&#x27;.slot &#x27;).last().find(&#x27;.slotslide&#x27;).append(&#x27;&lt;img class=&quot;ieeightfallbackimage&quot; src=&quot;&#x27;+imgsrc+&#x27;&quot; style=&quot;width:100%;height:auto;&quot;&gt;&#x27;);
								    	ieimgposition(sh,opt);
									}
							}
						}
					break;
				}
		}

		/***********************************************
			-	MOVE IE8 IMAGE IN RIGHT POSITION	-
		***********************************************/

		var ieimgposition = function(nextsh,opt) {

			if (isIE(8)) {

					var ie8img = nextsh.find(&#x27;.ieeightfallbackimage&#x27;);

					var ie8w = ie8img.width(),
						ie8h = ie8img.height();



					if (opt.startwidth/opt.startheight &lt;nextsh.data(&#x27;owidth&#x27;)/nextsh.data(&#x27;oheight&#x27;))
						ie8img.css({width:&quot;auto&quot;,height:&quot;100%&quot;})
					else
						ie8img.css({width:&quot;100%&quot;,height:&quot;auto&quot;})


					setTimeout(function() {

						var ie8w = ie8img.width(),
						    ie8h = ie8img.height(),
						    bgp = nextsh.data(&#x27;bgposition&#x27;);


						if (bgp==&quot;center center&quot;)
							ie8img.css({position:&quot;absolute&quot;,top:opt.height/2 - ie8h/2+&quot;px&quot;, left:opt.width/2-ie8w/2+&quot;px&quot;});

						if (bgp==&quot;center top&quot; || bgp==&quot;top center&quot;)
							ie8img.css({position:&quot;absolute&quot;,top:&quot;0px&quot;, left:opt.width/2-ie8w/2+&quot;px&quot;});

						if (bgp==&quot;center bottom&quot; || bgp==&quot;bottom center&quot;)
							ie8img.css({position:&quot;absolute&quot;,bottom:&quot;0px&quot;, left:opt.width/2-ie8w/2+&quot;px&quot;});


						if (bgp==&quot;right top&quot; || bgp==&quot;top right&quot;)
							ie8img.css({position:&quot;absolute&quot;,top:&quot;0px&quot;, right:&quot;0px&quot;});

						if (bgp==&quot;right bottom&quot; || bgp==&quot;bottom right&quot;)
							ie8img.css({position:&quot;absolute&quot;,bottom:&quot;0px&quot;, right:&quot;0px&quot;});

						if (bgp==&quot;right center&quot; || bgp==&quot;center right&quot;)
							ie8img.css({position:&quot;absolute&quot;,top:opt.height/2 - ie8h/2+&quot;px&quot;, right:&quot;0px&quot;});

						if (bgp==&quot;left bottom&quot; || bgp==&quot;bottom left&quot;)
							ie8img.css({position:&quot;absolute&quot;,bottom:&quot;0px&quot;, left:&quot;0px&quot;});

						if (bgp==&quot;left center&quot; || bgp==&quot;center left&quot;)
							ie8img.css({position:&quot;absolute&quot;,top:opt.height/2 - ie8h/2+&quot;px&quot;, left:&quot;0px&quot;});
					},20);
				}
		}

		///////////////////////
		//	REMOVE SLOTS	//
		/////////////////////
		var removeSlots = function(container,opt,where) {
				where.find(&#x27;.slot&#x27;).each(function() {
					jQuery(this).remove();
				});
				opt.transition = 0;
		}


		/*******************************************
			-	PREPARE LOADING OF IMAGES	-
		********************************************/
		var loadAllPrepared = function(container,alreadyinload) {

			container.find(&#x27;img, .defaultimg&#x27;).each(function(i) {
				var img = jQuery(this),
					ill = img.data(&#x27;lazyload&#x27;);

				if (ill!=img.attr(&#x27;src&#x27;) &amp;&amp; alreadyinload&lt;3 &amp;&amp; ill!=undefined &amp;&amp; ill!=&#x27;undefined&#x27;) {

					if (ill !=undefined &amp;&amp; ill !=&#x27;undefined&#x27;) {
						img.attr(&#x27;src&#x27;,ill);

						var limg = new Image();

						limg.onload = function(i) {
							img.data(&#x27;lazydone&#x27;,1);
							if (img.hasClass(&quot;defaultimg&quot;)) setDefImg(img,limg);
						}
						limg.error = function() {
							img.data(&#x27;lazydone&#x27;,1);
						}

						limg.src=img.attr(&#x27;src&#x27;);
						if (limg.complete) {
								if (img.hasClass(&quot;defaultimg&quot;)) setDefImg(img,limg);
								img.data(&#x27;lazydone&#x27;,1);
						}

					}
				} else {

					if ((ill === undefined || ill === &#x27;undefined&#x27;) &amp;&amp; img.data(&#x27;lazydone&#x27;)!=1) {
						var limg = new Image();
						limg.onload = function() {
							if (img.hasClass(&quot;defaultimg&quot;)) setDefImg(img,limg);
							img.data(&#x27;lazydone&#x27;,1);
						}
						limg.error = function() {
							img.data(&#x27;lazydone&#x27;,1);
						}


						if (img.attr(&#x27;src&#x27;)!=undefined &amp;&amp; img.attr(&#x27;src&#x27;)!=&#x27;undefined&#x27;) 	{
							limg.src = img.attr(&#x27;src&#x27;);
						} else
							limg.src = img.data(&#x27;src&#x27;);

						if (limg.complete) {
								if (img.hasClass(&quot;defaultimg&quot;)) {
									setDefImg(img,limg);
								}
								img.data(&#x27;lazydone&#x27;,1);
						}
					}
				}
			})
		}

		var setDefImg = function(img,limg) {
			var nextli = img.closest(&#x27;li&#x27;),
				ww = limg.width,
				hh = limg.height;

			nextli.data(&#x27;owidth&#x27;,ww);
			nextli.data(&#x27;oheight&#x27;,hh);
			nextli.find(&#x27;.slotholder&#x27;).data(&#x27;owidth&#x27;,ww);
			nextli.find(&#x27;.slotholder&#x27;).data(&#x27;oheight&#x27;,hh);
			nextli.data(&#x27;loadeddone&#x27;,1);
		}

		var waitForLoads = function(element,call,opt) {

			loadAllPrepared(element,0);
			var inter = setInterval(function() {
				opt.bannertimeronpause = true;
				opt.container.trigger(&#x27;stoptimer&#x27;);
				opt.cd=0;
				 var found = 0;
				 element.find(&#x27;img, .defaultimg&#x27;).each(function(i) {
				 	if (jQuery(this).data(&#x27;lazydone&#x27;)!=1) {
				 		found++;

				 	}
				 });

				 if (found&gt;0)
					 loadAllPrepared(element,found);
				 else {
					 clearInterval(inter);
					 if (call!=undefined)
					 	call();
				 }

			},100)
		}


		//////////////////////////////
		//	-	SWAP THE SLIDES -  //
		////////////////////////////
		var swapSlide = function(container,opt) {

				try{
					var actli =container.find(&#x27;&gt;ul:first-child &gt;li:eq(&#x27;+opt.act+&#x27;)&#x27;);
				} catch(e) {
					var actli=container.find(&#x27;&gt;ul:first-child &gt;li:eq(1)&#x27;);
				}
				opt.lastslide=opt.act;
				var nextli = container.find(&#x27;&gt;ul:first-child &gt;li:eq(&#x27;+opt.next+&#x27;)&#x27;);

				var defimg= nextli.find(&#x27;.defaultimg&#x27;);


				opt.bannertimeronpause = true;
				container.trigger(&#x27;stoptimer&#x27;);
				opt.cd=0;

				if (defimg.data(&#x27;lazyload&#x27;) !=undefined &amp;&amp; defimg.data(&#x27;lazyload&#x27;) !=&quot;undefined&quot; &amp;&amp; defimg.data(&#x27;lazydone&#x27;) !=1 ) {

					if (!isIE(8))
						defimg.css({backgroundImage:&#x27;url(&quot;&#x27;+nextli.find(&#x27;.defaultimg&#x27;).data(&#x27;lazyload&#x27;)+&#x27;&quot;)&#x27;});
					else {
						defimg.attr(&#x27;src&#x27;,nextli.find(&#x27;.defaultimg&#x27;).data(&#x27;lazyload&#x27;));
					}

					defimg.data(&#x27;src&#x27;,nextli.find(&#x27;.defaultimg&#x27;).data(&#x27;lazyload&#x27;));
					defimg.data(&#x27;lazydone&#x27;,1);
					defimg.data(&#x27;orgw&#x27;,0);
					nextli.data(&#x27;loadeddone&#x27;,1);

					container.find(&#x27;.tp-loader&#x27;).css({display:&quot;block&quot;});
					waitForLoads(container.find(&#x27;.tp-static-layers&#x27;),function() {
						waitForLoads(nextli,function() {
								var nextsh = nextli.find(&#x27;.slotholder&#x27;);
								if (nextsh.data(&#x27;kenburns&#x27;)==&quot;on&quot;) {
									var waitfordimension = setInterval(function() {
										var ow = nextsh.data(&#x27;owidth&#x27;);
										if (ow&gt;=0) {
											clearInterval(waitfordimension);
											swapSlideCall(opt,defimg,container)
										}
									},10)
								} else
								 swapSlideCall(opt,defimg,container)
						},opt);
					},opt);

				} else {

					if (nextli.data(&#x27;loadeddone&#x27;)===undefined) {
						nextli.data(&#x27;loadeddone&#x27;,1);
						waitForLoads(nextli,function() {
							  swapSlideCall(opt,defimg,container)
							},opt);
					} else

					 swapSlideCall(opt,defimg,container)
				}

		}

		var swapSlideCall = function(opt,defimg,container) {
			opt.bannertimeronpause = false;
		    opt.cd=0;
		    container.trigger(&#x27;nulltimer&#x27;);
		    container.find(&#x27;.tp-loader&#x27;).css({display:&quot;none&quot;});
		    setSize(defimg,opt);
			setBulPos(container,opt);
			setSize(defimg,opt);
		   	swapSlideProgress(container,opt);

		}

		/******************************
			-	SWAP SLIDE PROGRESS	-
		********************************/
		/*!SWAP SLIDE*/
		var swapSlideProgress = function(container,opt) {


			container.trigger(&#x27;revolution.slide.onbeforeswap&#x27;);

			opt.transition = 1;
			opt.videoplaying = false;
			//konsole.log(&quot;VideoPlay set to False due swapSlideProgress&quot;);

			try{
				var actli = container.find(&#x27;&gt;ul:first-child &gt;li:eq(&#x27;+opt.act+&#x27;)&#x27;);
			} catch(e) {
				var actli=container.find(&#x27;&gt;ul:first-child &gt;li:eq(1)&#x27;);
			}

			opt.lastslide=opt.act;

			var nextli = container.find(&#x27;&gt;ul:first-child &gt;li:eq(&#x27;+opt.next+&#x27;)&#x27;);

			setTimeout(function() {
				handleSpecialPreviews(opt);
			},200);

			var actsh = actli.find(&#x27;.slotholder&#x27;),
				nextsh = nextli.find(&#x27;.slotholder&#x27;);

			if (nextsh.data(&#x27;kenburns&#x27;)==&quot;on&quot; || actsh.data(&#x27;kenburns&#x27;)==&quot;on&quot;) {
				stopKenBurn(container,opt);
				container.find(&#x27;.kenburnimg&#x27;).remove();
			}


			// IF DELAY HAS BEEN SET VIA THE SLIDE, WE TAKE THE NEW VALUE, OTHER WAY THE OLD ONE...
			if (nextli.data(&#x27;delay&#x27;)!=undefined) {
						opt.cd=0;
						opt.delay=nextli.data(&#x27;delay&#x27;);
			} else {
				opt.delay=opt.origcd;
			}


			if (opt.firststart==1)
				punchgs.TweenLite.set(actli,{autoAlpha:0});

			punchgs.TweenLite.set(actli,{zIndex:18});
			punchgs.TweenLite.set(nextli,{autoAlpha:0,zIndex:20});

			///////////////////////////
			//	REMOVE THE CAPTIONS //
			///////////////////////////
			var removetime = 0;
			if (actli.index() != nextli.index() &amp;&amp; opt.firststart!=1) {
				removetime = removeTheCaptions(actli,opt);

			}

			if (actli.data(&#x27;saveperformance&#x27;)!=&quot;on&quot;) removetime = 0;

			setTimeout(function() {
				//opt.cd=0;
			    //container.trigger(&#x27;nulltimer&#x27;);
			    container.trigger(&#x27;restarttimer&#x27;);
				slideAnimation(container,opt,nextli,actli,actsh,nextsh);
			},removetime)

		}


		/******************************************
			-	START THE LAYER ANIMATION 	-
		*******************************************/

		var slideAnimation = function(container,opt,nextli,actli,actsh,nextsh) {

			// IF THERE IS AN OTHER FIRST SLIDE START HAS BEED SELECTED
			if (nextli.data(&#x27;differentissplayed&#x27;) ==&#x27;prepared&#x27;) {
				nextli.data(&#x27;differentissplayed&#x27;,&#x27;done&#x27;);
				nextli.data(&#x27;transition&#x27;,nextli.data(&#x27;savedtransition&#x27;));
				nextli.data(&#x27;slotamount&#x27;,nextli.data(&#x27;savedslotamount&#x27;));
				nextli.data(&#x27;masterspeed&#x27;,nextli.data(&#x27;savedmasterspeed&#x27;));
			}


			if (nextli.data(&#x27;fstransition&#x27;) != undefined &amp;&amp; nextli.data(&#x27;differentissplayed&#x27;) !=&quot;done&quot;) {
				nextli.data(&#x27;savedtransition&#x27;,nextli.data(&#x27;transition&#x27;));
				nextli.data(&#x27;savedslotamount&#x27;,nextli.data(&#x27;slotamount&#x27;));
				nextli.data(&#x27;savedmasterspeed&#x27;,nextli.data(&#x27;masterspeed&#x27;));

				nextli.data(&#x27;transition&#x27;,nextli.data(&#x27;fstransition&#x27;));
				nextli.data(&#x27;slotamount&#x27;,nextli.data(&#x27;fsslotamount&#x27;));
				nextli.data(&#x27;masterspeed&#x27;,nextli.data(&#x27;fsmasterspeed&#x27;));

				nextli.data(&#x27;differentissplayed&#x27;,&#x27;prepared&#x27;);
			}

			container.find(&#x27;.active-revslide&#x27;).removeClass(&#x27;.active-revslide&#x27;);
			nextli.addClass(&quot;active-revslide&quot;);

			///////////////////////////////////////
			// TRANSITION CHOOSE - RANDOM EFFECTS//
			///////////////////////////////////////


			if (nextli.data(&#x27;transition&#x27;)==undefined) nextli.data(&#x27;transition&#x27;,&quot;random&quot;);

			var nexttrans = 0,
				transtext = nextli.data(&#x27;transition&#x27;).split(&quot;,&quot;),
				curtransid = nextli.data(&#x27;nexttransid&#x27;) == undefined ? -1 : nextli.data(&#x27;nexttransid&#x27;);

			if (nextli.data(&#x27;randomtransition&#x27;)==&quot;on&quot;)
				curtransid = Math.round(Math.random()*transtext.length);
			else
				curtransid=curtransid+1;

			if (curtransid==transtext.length) curtransid=0;
			nextli.data(&#x27;nexttransid&#x27;,curtransid);



			var comingtransition = transtext[curtransid];

			if (opt.ie) {
				if (comingtransition==&quot;boxfade&quot;) comingtransition = &quot;boxslide&quot;;
				if (comingtransition==&quot;slotfade-vertical&quot;) comingtransition = &quot;slotzoom-vertical&quot;;
				if (comingtransition==&quot;slotfade-horizontal&quot;) comingtransition = &quot;slotzoom-horizontal&quot;;
			}

			if (isIE(8)) {
				comingtransition = 11;
			}


			var specials = 0;

			if (opt.parallax==&quot;scroll&quot; &amp;&amp; opt.parallaxFirstGo==undefined) {
				opt.parallaxFirstGo = true;
				scrollParallax(container,opt);
				setTimeout(function() {
					scrollParallax(container,opt);
				},210);
				setTimeout(function() {
					scrollParallax(container,opt);
				},420);

			}




		/*	if (opt.ffnn == undefined) opt.ffnn=0;
			comingtransition=opt.ffnn;

			if ( direction==1)
				opt.ffnn=opt.ffnn-1;
			else
				opt.ffnn=opt.ffnn+1;

			if (opt.ffnn&gt;46) opt.ffnn=0;
			if (opt.ffnn&lt;0) opt.ffnn = 46;

			jQuery(&#x27;.logo&#x27;).html(&#x27;Next Anim:&#x27;+comingtransition);


			if (comingtransition==&quot;boxslide&quot; || comingtransition == &quot;boxfade&quot; || comingtransition == &quot;papercut&quot; ||
				comingtransition==0 || comingtransition == 1 || comingtransition == 16)
				comingtransition = 9;*/


			/* Transition Name ,
			   Transition Code,
			   Transition Sub Code,
			   Max Slots,
			   MasterSpeed Delays,
			   Preparing Slots (box,slideh, slidev),
			   Call on nextsh (null = no, true/false for visibility first preparing),
			   Call on actsh (null = no, true/false for visibility first preparing),
			*/



			if (comingtransition==&quot;slidehorizontal&quot;) {
						comingtransition = &quot;slideleft&quot;
					if (opt.leftarrowpressed==1)
						comingtransition = &quot;slideright&quot;
				}

			if (comingtransition==&quot;slidevertical&quot;) {
						comingtransition = &quot;slideup&quot;
					if (opt.leftarrowpressed==1)
						comingtransition = &quot;slidedown&quot;
				}

			if (comingtransition==&quot;parallaxhorizontal&quot;) {
						comingtransition = &quot;parallaxtoleft&quot;
					if (opt.leftarrowpressed==1)
						comingtransition = &quot;parallaxtoright&quot;
				}


			if (comingtransition==&quot;parallaxvertical&quot;) {
						comingtransition = &quot;parallaxtotop&quot;
					if (opt.leftarrowpressed==1)
						comingtransition = &quot;parallaxtobottom&quot;
				}




			var transitionsArray = [ [&#x27;boxslide&#x27; , 0, 1, 10, 0,&#x27;box&#x27;,false,null,0],
									 [&#x27;boxfade&#x27;, 1, 0, 10, 0,&#x27;box&#x27;,false,null,1],
									 [&#x27;slotslide-horizontal&#x27;, 2, 0, 0, 200,&#x27;horizontal&#x27;,true,false,2],
									 [&#x27;slotslide-vertical&#x27;, 3, 0,0,200,&#x27;vertical&#x27;,true,false,3],
									 [&#x27;curtain-1&#x27;, 4, 3,0,0,&#x27;horizontal&#x27;,true,true,4],
									 [&#x27;curtain-2&#x27;, 5, 3,0,0,&#x27;horizontal&#x27;,true,true,5],
									 [&#x27;curtain-3&#x27;, 6, 3,25,0,&#x27;horizontal&#x27;,true,true,6],
									 [&#x27;slotzoom-horizontal&#x27;, 7, 0,0,400,&#x27;horizontal&#x27;,true,true,7],
									 [&#x27;slotzoom-vertical&#x27;, 8, 0,0,0,&#x27;vertical&#x27;,true,true,8],
									 [&#x27;slotfade-horizontal&#x27;, 9, 0,0,500,&#x27;horizontal&#x27;,true,null,9],
									 [&#x27;slotfade-vertical&#x27;, 10, 0,0 ,500,&#x27;vertical&#x27;,true,null,10],
									 [&#x27;fade&#x27;, 11, 0, 1 ,300,&#x27;horizontal&#x27;,true,null,11],
									 [&#x27;slideleft&#x27;, 12, 0,1,0,&#x27;horizontal&#x27;,true,true,12],
									 [&#x27;slideup&#x27;, 13, 0,1,0,&#x27;horizontal&#x27;,true,true,13],
									 [&#x27;slidedown&#x27;, 14, 0,1,0,&#x27;horizontal&#x27;,true,true,14],
									 [&#x27;slideright&#x27;, 15, 0,1,0,&#x27;horizontal&#x27;,true,true,15],
									 [&#x27;papercut&#x27;, 16, 0,0,600,&#x27;&#x27;,null,null,16],
									 [&#x27;3dcurtain-horizontal&#x27;, 17, 0,20,100,&#x27;vertical&#x27;,false,true,17],
									 [&#x27;3dcurtain-vertical&#x27;, 18, 0,10,100,&#x27;horizontal&#x27;,false,true,18],
									 [&#x27;cubic&#x27;, 19, 0,20,600,&#x27;horizontal&#x27;,false,true,19],
									 [&#x27;cube&#x27;,19,0,20,600,&#x27;horizontal&#x27;,false,true,20],
									 [&#x27;flyin&#x27;, 20, 0,4,600,&#x27;vertical&#x27;,false,true,21],
									 [&#x27;turnoff&#x27;, 21, 0,1,1600,&#x27;horizontal&#x27;,false,true,22],
									 [&#x27;incube&#x27;, 22, 0,20,200,&#x27;horizontal&#x27;,false,true,23],
									 [&#x27;cubic-horizontal&#x27;, 23, 0,20,500,&#x27;vertical&#x27;,false,true,24],
									 [&#x27;cube-horizontal&#x27;, 23, 0,20,500,&#x27;vertical&#x27;,false,true,25],
									 [&#x27;incube-horizontal&#x27;, 24, 0,20,500,&#x27;vertical&#x27;,false,true,26],
									 [&#x27;turnoff-vertical&#x27;, 25, 0,1,200,&#x27;horizontal&#x27;,false,true,27],
									 [&#x27;fadefromright&#x27;, 12, 1,1,0,&#x27;horizontal&#x27;,true,true,28],
									 [&#x27;fadefromleft&#x27;, 15, 1,1,0,&#x27;horizontal&#x27;,true,true,29],
									 [&#x27;fadefromtop&#x27;, 14, 1,1,0,&#x27;horizontal&#x27;,true,true,30],
									 [&#x27;fadefrombottom&#x27;, 13, 1,1,0,&#x27;horizontal&#x27;,true,true,31],
									 [&#x27;fadetoleftfadefromright&#x27;, 12, 2,1,0,&#x27;horizontal&#x27;,true,true,32],
									 [&#x27;fadetorightfadetoleft&#x27;, 15, 2,1,0,&#x27;horizontal&#x27;,true,true,33],
									 [&#x27;fadetobottomfadefromtop&#x27;, 14, 2,1,0,&#x27;horizontal&#x27;,true,true,34],
									 [&#x27;fadetotopfadefrombottom&#x27;, 13, 2,1,0,&#x27;horizontal&#x27;,true,true,35],
									 [&#x27;parallaxtoright&#x27;, 12, 3,1,0,&#x27;horizontal&#x27;,true,true,36],
									 [&#x27;parallaxtoleft&#x27;, 15, 3,1,0,&#x27;horizontal&#x27;,true,true,37],
									 [&#x27;parallaxtotop&#x27;, 14, 3,1,0,&#x27;horizontal&#x27;,true,true,38],
									 [&#x27;parallaxtobottom&#x27;, 13, 3,1,0,&#x27;horizontal&#x27;,true,true,39],
									 [&#x27;scaledownfromright&#x27;, 12, 4,1,0,&#x27;horizontal&#x27;,true,true,40],
									 [&#x27;scaledownfromleft&#x27;, 15, 4,1,0,&#x27;horizontal&#x27;,true,true,41],
									 [&#x27;scaledownfromtop&#x27;, 14, 4,1,0,&#x27;horizontal&#x27;,true,true,42],
									 [&#x27;scaledownfrombottom&#x27;, 13, 4,1,0,&#x27;horizontal&#x27;,true,true,43],
									 [&#x27;zoomout&#x27;, 13, 5,1,0,&#x27;horizontal&#x27;,true,true,44],
									 [&#x27;zoomin&#x27;, 13, 6,1,0,&#x27;horizontal&#x27;,true,true,45],
									 [&#x27;notransition&#x27;,26,0,1,0,&#x27;horizontal&#x27;,true,null,46]
								   ];


			var flatTransitions = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45];
			var premiumTransitions = [16,17,18,19,20,21,22,23,24,25,26,27]

			var nexttrans =0;
			var specials = 1;
			var STAindex = 0;
			var indexcounter =0;
			var STA = new Array;

			//START THE KEN BURN PAN ZOOM ANIMATION
			if (nextsh.data(&#x27;kenburns&#x27;)==&quot;on&quot;) {
					if (comingtransition == &quot;boxslide&quot; || comingtransition==0 ||
						comingtransition == &quot;boxfade&quot; || comingtransition==1 ||
						comingtransition == &quot;papercut&quot; || comingtransition==16
						)
						comingtransition = 11;

						startKenBurn(container,opt,true,true);
			}



			// RANDOM TRANSITIONS
			if (comingtransition == &quot;random&quot;) {
				comingtransition = Math.round(Math.random()*transitionsArray.length-1);
				if (comingtransition&gt;transitionsArray.length-1) comingtransition=transitionsArray.length-1;
			}

			// RANDOM FLAT TRANSITIONS
			if (comingtransition == &quot;random-static&quot;) {
				comingtransition = Math.round(Math.random()*flatTransitions.length-1);
				if (comingtransition&gt;flatTransitions.length-1) comingtransition=flatTransitions.length-1;
				comingtransition = flatTransitions[comingtransition];
			}

			// RANDOM PREMIUM TRANSITIONS
			if (comingtransition == &quot;random-premium&quot;) {
				comingtransition = Math.round(Math.random()*premiumTransitions.length-1);
				if (comingtransition&gt;premiumTransitions.length-1) comingtransition=premiumTransitions.length-1;
				comingtransition = premiumTransitions[comingtransition];
			}

			//joomla only change: avoid problematic transitions that don&#x27;t compatible with mootools
			var problematicTransitions = [12,13,14,15,16,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45];
			if(opt.isJoomla == true &amp;&amp; window.MooTools != undefined &amp;&amp; problematicTransitions.indexOf(comingtransition) != -1){

				var newTransIndex = Math.round(Math.random() * (premiumTransitions.length-2) ) + 1;

				//some limits fix
				if (newTransIndex &gt; premiumTransitions.length-1)
					newTransIndex = premiumTransitions.length-1;

				if(newTransIndex == 0)
					newTransIndex = 1;

				comingtransition = premiumTransitions[newTransIndex];
			}



			function findTransition() {
				// FIND THE RIGHT TRANSITION PARAMETERS HERE
				jQuery.each(transitionsArray,function(inde,trans) {
					if (trans[0] == comingtransition || trans[8] == comingtransition) {
						nexttrans = trans[1];
						specials = trans[2];
						STAindex = indexcounter;
					}
					indexcounter = indexcounter+1;
				})
			}

			findTransition();

			// CHECK IF WE HAVE IE8 AND THAN FALL BACK ON FLAT TRANSITIONS
			if (isIE(8) &amp;&amp; nexttrans&gt;15 &amp;&amp; nexttrans&lt;28) {
				comingtransition = Math.round(Math.random()*flatTransitions.length-1);
				if (comingtransition&gt;flatTransitions.length-1) comingtransition=flatTransitions.length-1;
				comingtransition = flatTransitions[comingtransition];
				indexcounter =0;
				findTransition();
			}




			// WHICH DIRECTION DID WE HAD ?
			var direction=-1;
			if (opt.leftarrowpressed==1 || opt.act&gt;opt.next) direction=1;



			opt.leftarrowpressed=0;

			if (nexttrans&gt;26) nexttrans = 26;
			if (nexttrans&lt;0) nexttrans = 0;


			// DEFINE THE MASTERSPEED FOR THE SLIDE //
			var masterspeed=300;
			if (nextli.data(&#x27;masterspeed&#x27;)!=undefined &amp;&amp; nextli.data(&#x27;masterspeed&#x27;)&gt;99 &amp;&amp; nextli.data(&#x27;masterspeed&#x27;)&lt;opt.delay)
				masterspeed = nextli.data(&#x27;masterspeed&#x27;);
			if (nextli.data(&#x27;masterspeed&#x27;)!=undefined &amp;&amp; nextli.data(&#x27;masterspeed&#x27;)&gt;opt.delay)
				masterspeed = opt.delay;

			// PREPARED DEFAULT SETTINGS PER TRANSITION
			STA = transitionsArray[STAindex];

			/////////////////////////////////////////////
			// SET THE BULLETS SELECTED OR UNSELECTED  //
			/////////////////////////////////////////////
			container.parent().find(&quot;.bullet&quot;).each(function() {
				var bul = jQuery(this),
					buli = bul.index();
				bul.removeClass(&quot;selected&quot;);

				if (opt.navigationArrows==&quot;withbullet&quot; || opt.navigationArrows==&quot;nexttobullets&quot;)
					buli = bul.index()-1;

				if (buli == opt.next) bul.addClass(&#x27;selected&#x27;);

			});

			///////////////////////////////
			//	MAIN TIMELINE DEFINITION //
			///////////////////////////////

			var mtl = new punchgs.TimelineLite({onComplete:function() {
							letItFree(container,opt,nextsh,actsh,nextli,actli,mtl);
						}});
			//SET DEFAULT IMG UNVISIBLE AT START
			mtl.add(punchgs.TweenLite.set(nextsh.find(&#x27;.defaultimg&#x27;),{opacity:0}));
			mtl.pause();




			/////////////////////////////////////////////
			//	SET THE ACTUAL AMOUNT OF SLIDES !!     //
			//  SET A RANDOM AMOUNT OF SLOTS          //
			///////////////////////////////////////////
			if (nextli.data(&#x27;slotamount&#x27;)==undefined || nextli.data(&#x27;slotamount&#x27;)&lt;1) {
				opt.slots=Math.round(Math.random()*12+4);
				if (comingtransition==&quot;boxslide&quot;)
					opt.slots=Math.round(Math.random()*6+3);
				else
				if (comingtransition==&quot;flyin&quot;)
					opt.slots=Math.round(Math.random()*4+1);
			 } else {
				opt.slots=nextli.data(&#x27;slotamount&#x27;);

			}

			/////////////////////////////////////////////
			//	SET THE ACTUAL AMOUNT OF SLIDES !!     //
			//  SET A RANDOM AMOUNT OF SLOTS          //
			///////////////////////////////////////////
			if (nextli.data(&#x27;rotate&#x27;)==undefined)
				opt.rotate = 0
			 else
				if (nextli.data(&#x27;rotate&#x27;)==999)
					opt.rotate=Math.round(Math.random()*360);
				 else
				    opt.rotate=nextli.data(&#x27;rotate&#x27;);
			if (!jQuery.support.transition  || opt.ie || opt.ie9) opt.rotate=0;




			//////////////////////////////
			//	FIRST START 			//
			//////////////////////////////
			if (opt.firststart==1) opt.firststart=0;


			// ADJUST MASTERSPEED
			masterspeed = masterspeed + STA[4];

			if ((nexttrans==4 || nexttrans==5 || nexttrans==6) &amp;&amp; opt.slots&lt;3 ) opt.slots=3;

			// ADJUST SLOTS
			if (STA[3] != 0) opt.slots = Math.min(opt.slots,STA[3]);
			if (nexttrans==9) opt.slots = opt.width/20;
			if (nexttrans==10) opt.slots = opt.height/20;

			// prepareOneSlide

			if (STA[7] !=null) prepareOneSlide(actsh,opt,STA[7],STA[5]);
			if (STA[6] !=null) prepareOneSlide(nextsh,opt,STA[6],STA[5]);


			/////////////////////////////////////
			// THE SLOTSLIDE - TRANSITION I.  //
			////////////////////////////////////
			if (nexttrans==0) {								// BOXSLIDE


						// ALL NEW SLOTS SHOULD BE SLIDED FROM THE LEFT TO THE RIGHT
						var maxz = Math.ceil(opt.height/opt.sloth);
						var curz = 0;
						nextsh.find(&#x27;.slotslide&#x27;).each(function(j) {
							var ss=jQuery(this);
							curz=curz+1;
							if (curz==maxz) curz=0;

							mtl.add(punchgs.TweenLite.from(ss,(masterspeed)/600,
												{opacity:0,top:(0-opt.sloth),left:(0-opt.slotw),rotation:opt.rotate,force3D:&quot;auto&quot;,ease:punchgs.Power2.easeOut}),((j*15) + ((curz)*30))/1500);
						});
			}
			/////////////////////////////////////
			// THE SLOTSLIDE - TRANSITION I.  //
			////////////////////////////////////
			if (nexttrans==1) {

						// ALL NEW SLOTS SHOULD BE SLIDED FROM THE LEFT TO THE RIGHT
						var maxtime,
							maxj = 0;

						nextsh.find(&#x27;.slotslide&#x27;).each(function(j) {
							var ss=jQuery(this),
								rand=Math.random()*masterspeed+300,
								rand2=Math.random()*500+200;
							if (rand+rand2&gt;maxtime) {
								maxtime = rand2+rand2;
								maxj = j;
							}
							mtl.add(punchgs.TweenLite.from(ss,rand/1000,
										{autoAlpha:0, force3D:&quot;auto&quot;,rotation:opt.rotate,ease:punchgs.Power2.easeInOut}),rand2/1000);
						});
			}


			/////////////////////////////////////
			// THE SLOTSLIDE - TRANSITION I.  //
			////////////////////////////////////
			if (nexttrans==2) {

						var subtl = new punchgs.TimelineLite();
						// ALL OLD SLOTS SHOULD BE SLIDED TO THE RIGHT
						actsh.find(&#x27;.slotslide&#x27;).each(function() {
							var ss=jQuery(this);
							subtl.add(punchgs.TweenLite.to(ss,masterspeed/1000,{left:opt.slotw, force3D:&quot;auto&quot;,rotation:(0-opt.rotate)}),0);
							mtl.add(subtl,0);
						});

						// ALL NEW SLOTS SHOULD BE SLIDED FROM THE LEFT TO THE RIGHT
						nextsh.find(&#x27;.slotslide&#x27;).each(function() {
							var ss=jQuery(this);
							subtl.add(punchgs.TweenLite.from(ss,masterspeed/1000,{left:0-opt.slotw, force3D:&quot;auto&quot;,rotation:opt.rotate}),0);
							mtl.add(subtl,0);
						});
			}



			/////////////////////////////////////
			// THE SLOTSLIDE - TRANSITION I.  //
			////////////////////////////////////
			if (nexttrans==3) {
						var subtl = new punchgs.TimelineLite();

						// ALL OLD SLOTS SHOULD BE SLIDED TO THE RIGHT
						actsh.find(&#x27;.slotslide&#x27;).each(function() {
							var ss=jQuery(this);
							subtl.add(punchgs.TweenLite.to(ss,masterspeed/1000,{top:opt.sloth,rotation:opt.rotate,force3D:&quot;auto&quot;,transformPerspective:600}),0);
							mtl.add(subtl,0);

						});

						// ALL NEW SLOTS SHOULD BE SLIDED FROM THE LEFT TO THE RIGHT
						nextsh.find(&#x27;.slotslide&#x27;).each(function() {
							var ss=jQuery(this);
							subtl.add(punchgs.TweenLite.from(ss,masterspeed/1000,{top:0-opt.sloth,rotation:opt.rotate,ease:punchgs.Power2.easeOut,force3D:&quot;auto&quot;,transformPerspective:600}),0);
							mtl.add(subtl,0);
						});
			}



			/////////////////////////////////////
			// THE SLOTSLIDE - TRANSITION I.  //
			////////////////////////////////////
			if (nexttrans==4 || nexttrans==5) {

						setTimeout(function() {
							actsh.find(&#x27;.defaultimg&#x27;).css({opacity:0});
						},100);


						// ALL NEW SLOTS SHOULD BE SLIDED FROM THE LEFT TO THE RIGHT
						var cspeed = (masterspeed)/1000,
							ticker = cspeed,
							subtl = new punchgs.TimelineLite();

						actsh.find(&#x27;.slotslide&#x27;).each(function(i) {
							var ss=jQuery(this);
							var del = (i*cspeed)/opt.slots;
							if (nexttrans==5) del = ((opt.slots-i-1)*cspeed)/(opt.slots)/1.5;
							subtl.add(punchgs.TweenLite.to(ss,cspeed*3,{transformPerspective:600,force3D:&quot;auto&quot;,top:0+opt.height,opacity:0.5,rotation:opt.rotate,ease:punchgs.Power2.easeInOut,delay:del}),0);
							mtl.add(subtl,0);
						});

						// ALL NEW SLOTS SHOULD BE SLIDED FROM THE LEFT TO THE RIGHT
						nextsh.find(&#x27;.slotslide&#x27;).each(function(i) {
							var ss=jQuery(this);
							var del = (i*cspeed)/opt.slots;
							if (nexttrans==5) del = ((opt.slots-i-1)*cspeed)/(opt.slots)/1.5;
							subtl.add(punchgs.TweenLite.from(ss,cspeed*3,
											{top:(0-opt.height),opacity:0.5,rotation:opt.rotate,force3D:&quot;auto&quot;,ease:punchgs.Power2.easeInOut,delay:del}),0);
							mtl.add(subtl,0);

						});


			}

			/////////////////////////////////////
			// THE SLOTSLIDE - TRANSITION I.  //
			////////////////////////////////////
			if (nexttrans==6) {


						if (opt.slots&lt;2) opt.slots=2;
						if (opt.slots % 2) opt.slots = opt.slots+1;

						var subtl = new punchgs.TimelineLite();

						//SET DEFAULT IMG UNVISIBLE
						setTimeout(function() {
							actsh.find(&#x27;.defaultimg&#x27;).css({opacity:0});
						},100);

						actsh.find(&#x27;.slotslide&#x27;).each(function(i) {
							var ss=jQuery(this);
							if (i+1&lt;opt.slots/2)
								var tempo = (i+2)*90;
							else
								var tempo = (2+opt.slots-i)*90;

							subtl.add(punchgs.TweenLite.to(ss,(masterspeed+tempo)/1000,{top:0+opt.height,opacity:1,force3D:&quot;auto&quot;,rotation:opt.rotate,ease:punchgs.Power2.easeInOut}),0);
							mtl.add(subtl,0);
						});

						// ALL NEW SLOTS SHOULD BE SLIDED FROM THE LEFT TO THE RIGHT
						nextsh.find(&#x27;.slotslide&#x27;).each(function(i) {
							var ss=jQuery(this);

							if (i+1&lt;opt.slots/2)
								var tempo = (i+2)*90;
							else
								var tempo = (2+opt.slots-i)*90;

							subtl.add(punchgs.TweenLite.from(ss,(masterspeed+tempo)/1000,
													{top:(0-opt.height),opacity:1,force3D:&quot;auto&quot;,rotation:opt.rotate,ease:punchgs.Power2.easeInOut}),0);
							mtl.add(subtl,0);
						});
			}


			////////////////////////////////////
			// THE SLOTSZOOM - TRANSITION II. //
			////////////////////////////////////
			if (nexttrans==7) {

						masterspeed = masterspeed *2;
						if (masterspeed&gt;opt.delay) masterspeed=opt.delay;
						var subtl = new punchgs.TimelineLite();

						//SET DEFAULT IMG UNVISIBLE
						setTimeout(function() {
							actsh.find(&#x27;.defaultimg&#x27;).css({opacity:0});
						},100);

						// ALL OLD SLOTS SHOULD BE SLIDED TO THE RIGHT
						actsh.find(&#x27;.slotslide&#x27;).each(function() {
							var ss=jQuery(this).find(&#x27;div&#x27;);
							subtl.add(punchgs.TweenLite.to(ss,masterspeed/1000,{
									left:(0-opt.slotw/2)+&#x27;px&#x27;,
									top:(0-opt.height/2)+&#x27;px&#x27;,
									width:(opt.slotw*2)+&quot;px&quot;,
									height:(opt.height*2)+&quot;px&quot;,
									opacity:0,
									rotation:opt.rotate,
									force3D:&quot;auto&quot;,
									ease:punchgs.Power2.easeOut}),0);
							mtl.add(subtl,0);

						});

						//////////////////////////////////////////////////////////////
						// ALL NEW SLOTS SHOULD BE SLIDED FROM THE LEFT TO THE RIGHT //
						///////////////////////////////////////////////////////////////
						nextsh.find(&#x27;.slotslide&#x27;).each(function(i) {
							var ss=jQuery(this).find(&#x27;div&#x27;);

							subtl.add(punchgs.TweenLite.fromTo(ss,masterspeed/1000,
										{left:0,top:0,opacity:0,transformPerspective:600},
										{left:(0-i*opt.slotw)+&#x27;px&#x27;,
										 ease:punchgs.Power2.easeOut,
										 force3D:&quot;auto&quot;,
									     top:(0)+&#x27;px&#x27;,
									     width:opt.width,
									     height:opt.height,
										 opacity:1,rotation:0,
										 delay:0.1}),0);
							mtl.add(subtl,0);
						});
			}




			////////////////////////////////////
			// THE SLOTSZOOM - TRANSITION II. //
			////////////////////////////////////
			if (nexttrans==8) {

						masterspeed = masterspeed * 3;
						if (masterspeed&gt;opt.delay) masterspeed=opt.delay;
						var subtl = new punchgs.TimelineLite();



						// ALL OLD SLOTS SHOULD BE SLIDED TO THE RIGHT
						actsh.find(&#x27;.slotslide&#x27;).each(function() {
							var ss=jQuery(this).find(&#x27;div&#x27;);
							subtl.add(punchgs.TweenLite.to(ss,masterspeed/1000,
										  {left:(0-opt.width/2)+&#x27;px&#x27;,
										   top:(0-opt.sloth/2)+&#x27;px&#x27;,
										   width:(opt.width*2)+&quot;px&quot;,
										   height:(opt.sloth*2)+&quot;px&quot;,
										   force3D:&quot;auto&quot;,
										   opacity:0,rotation:opt.rotate}),0);
							mtl.add(subtl,0);

						});


						// ALL NEW SLOTS SHOULD BE SLIDED FROM THE LEFT TO THE RIGHT //
						///////////////////////////////////////////////////////////////
						nextsh.find(&#x27;.slotslide&#x27;).each(function(i) {
							var ss=jQuery(this).find(&#x27;div&#x27;);

							subtl.add(punchgs.TweenLite.fromTo(ss,masterspeed/1000,
										  {left:0, top:0,opacity:0,force3D:&quot;auto&quot;},
										  {&#x27;left&#x27;:(0)+&#x27;px&#x27;,
										   &#x27;top&#x27;:(0-i*opt.sloth)+&#x27;px&#x27;,
										   &#x27;width&#x27;:(nextsh.find(&#x27;.defaultimg&#x27;).data(&#x27;neww&#x27;))+&quot;px&quot;,
										   &#x27;height&#x27;:(nextsh.find(&#x27;.defaultimg&#x27;).data(&#x27;newh&#x27;))+&quot;px&quot;,
										   opacity:1,rotation:0,
										   }),0);
							mtl.add(subtl,0);
						});
			}


			////////////////////////////////////////
			// THE SLOTSFADE - TRANSITION III.   //
			//////////////////////////////////////
			if (nexttrans==9 || nexttrans==10) {
						var ssamount=0;
						// ALL NEW SLOTS SHOULD BE SLIDED FROM THE LEFT TO THE RIGHT
						nextsh.find(&#x27;.slotslide&#x27;).each(function(i) {
							var ss=jQuery(this);
							ssamount++;
							mtl.add(punchgs.TweenLite.fromTo(ss,masterspeed/1000,{autoAlpha:0,force3D:&quot;auto&quot;,transformPerspective:600},
																				 {autoAlpha:1,ease:punchgs.Power2.easeInOut,delay:(i*5)/1000}),0);

						});
			}

			///////////////////////////
			// SIMPLE FADE ANIMATION //
			///////////////////////////
			if (nexttrans==11 || nexttrans==26) {


						var ssamount=0;
						if (nexttrans==26) masterspeed=0;

						// ALL NEW SLOTS SHOULD BE SLIDED FROM THE LEFT TO THE RIGHT
						nextsh.find(&#x27;.slotslide&#x27;).each(function(i) {
							var ss=jQuery(this);
							mtl.add(punchgs.TweenLite.from(ss,masterspeed/1000,{autoAlpha:0,force3D:&quot;auto&quot;,ease:punchgs.Power2.easeInOut}),0);
						});
			}

			if (nexttrans==12 || nexttrans==13 || nexttrans==14 || nexttrans==15) {
						masterspeed = masterspeed;
						if (masterspeed&gt;opt.delay) masterspeed=opt.delay;
						//masterspeed = 1000;

						setTimeout(function() {
							punchgs.TweenLite.set(actsh.find(&#x27;.defaultimg&#x27;),{autoAlpha:0});

						},100);

						var oow = opt.width,
							ooh = opt.height,
							ssn=nextsh.find(&#x27;.slotslide&#x27;),
							twx = 0,
							twy = 0,
							op = 1,
							scal = 1,
							fromscale = 1,
							easeitout = punchgs.Power2.easeInOut,
							easeitin = punchgs.Power2.easeInOut,
							speedy = masterspeed/1000,
							speedy2 = speedy;


						if (opt.fullWidth==&quot;on&quot; || opt.fullScreen==&quot;on&quot;) {
							oow=ssn.width();
							ooh=ssn.height();
						}

						if (nexttrans==12)
							twx = oow;
						else
						if (nexttrans==15)
							twx = 0-oow;
						else
						if (nexttrans==13)
							twy = ooh;
						else
						if (nexttrans==14)
							twy = 0-ooh;


						// DEPENDING ON EXTENDED SPECIALS, DIFFERENT SCALE AND OPACITY FUNCTIONS NEED TO BE ADDED
						if (specials == 1) op = 0;
						if (specials == 2) op = 0;
						if (specials == 3) {
								easeitout = punchgs.Power2.easeInOut;
								easeitin = punchgs.Power1.easeInOut;
								speedy = masterspeed / 1200;
						}

						if (specials==4 || specials==5)
							scal=0.6;
						if (specials==6 )
							scal=1.4;


						if (specials==5 || specials==6) {
						    fromscale=1.4;
						    op=0;
						    oow=0;
						    ooh=0;twx=0;twy=0;
						 }
						if (specials==6) fromscale=0.6;
						var dd = 0;

						mtl.add(punchgs.TweenLite.from(ssn,speedy,
										{left:twx, top:twy, scale:fromscale, opacity:op,rotation:opt.rotate,ease:easeitin,force3D:&quot;auto&quot;}),0);

						var ssa=actsh.find(&#x27;.slotslide&#x27;);

						if (specials==4 || specials==5) {
							oow = 0; ooh=0;
						}

						if (specials!=1)
							switch (nexttrans) {
								case 12:
									mtl.add(punchgs.TweenLite.to(ssa,speedy2,{&#x27;left&#x27;:(0-oow)+&#x27;px&#x27;,force3D:&quot;auto&quot;,scale:scal,opacity:op,rotation:opt.rotate,ease:easeitout}),0);
								break;
								case 15:
									mtl.add(punchgs.TweenLite.to(ssa,speedy2,{&#x27;left&#x27;:(oow)+&#x27;px&#x27;,force3D:&quot;auto&quot;,scale:scal,opacity:op,rotation:opt.rotate,ease:easeitout}),0);
								break;
								case 13:
									mtl.add(punchgs.TweenLite.to(ssa,speedy2,{&#x27;top&#x27;:(0-ooh)+&#x27;px&#x27;,force3D:&quot;auto&quot;,scale:scal,opacity:op,rotation:opt.rotate,ease:easeitout}),0);
								break;
								case 14:
									mtl.add(punchgs.TweenLite.to(ssa,speedy2,{&#x27;top&#x27;:(ooh)+&#x27;px&#x27;,force3D:&quot;auto&quot;,scale:scal,opacity:op,rotation:opt.rotate,ease:easeitout}),0);
								break;
							}

			}

			//////////////////////////////////////
			// THE SLOTSLIDE - TRANSITION XVI.  //
			//////////////////////////////////////
			if (nexttrans==16) {						// PAPERCUT


					var subtl = new punchgs.TimelineLite();
					mtl.add(punchgs.TweenLite.set(actli,{&#x27;position&#x27;:&#x27;absolute&#x27;,&#x27;z-index&#x27;:20}),0);
					mtl.add(punchgs.TweenLite.set(nextli,{&#x27;position&#x27;:&#x27;absolute&#x27;,&#x27;z-index&#x27;:15}),0);


					// PREPARE THE CUTS
					actli.wrapInner(&#x27;&lt;div class=&quot;tp-half-one&quot; style=&quot;position:relative; width:100%;height:100%&quot;&gt;&lt;/div&gt;&#x27;);

					actli.find(&#x27;.tp-half-one&#x27;).clone(true).appendTo(actli).addClass(&quot;tp-half-two&quot;);
					actli.find(&#x27;.tp-half-two&#x27;).removeClass(&#x27;tp-half-one&#x27;);

					var oow = opt.width,
						ooh = opt.height;
					if (opt.autoHeight==&quot;on&quot;)
						ooh = container.height();


					actli.find(&#x27;.tp-half-one .defaultimg&#x27;).wrap(&#x27;&lt;div class=&quot;tp-papercut&quot; style=&quot;width:&#x27;+oow+&#x27;px;height:&#x27;+ooh+&#x27;px;&quot;&gt;&lt;/div&gt;&#x27;)
					actli.find(&#x27;.tp-half-two .defaultimg&#x27;).wrap(&#x27;&lt;div class=&quot;tp-papercut&quot; style=&quot;width:&#x27;+oow+&#x27;px;height:&#x27;+ooh+&#x27;px;&quot;&gt;&lt;/div&gt;&#x27;)
					actli.find(&#x27;.tp-half-two .defaultimg&#x27;).css({position:&#x27;absolute&#x27;,top:&#x27;-50%&#x27;});
					actli.find(&#x27;.tp-half-two .tp-caption&#x27;).wrapAll(&#x27;&lt;div style=&quot;position:absolute;top:-50%;left:0px;&quot;&gt;&lt;/div&gt;&#x27;);

					mtl.add(punchgs.TweenLite.set(actli.find(&#x27;.tp-half-two&#x27;),
					                 {width:oow,height:ooh,overflow:&#x27;hidden&#x27;,zIndex:15,position:&#x27;absolute&#x27;,top:ooh/2,left:&#x27;0px&#x27;,transformPerspective:600,transformOrigin:&quot;center bottom&quot;}),0);

					mtl.add(punchgs.TweenLite.set(actli.find(&#x27;.tp-half-one&#x27;),
					                 {width:oow,height:ooh/2,overflow:&#x27;visible&#x27;,zIndex:10,position:&#x27;absolute&#x27;,top:&#x27;0px&#x27;,left:&#x27;0px&#x27;,transformPerspective:600,transformOrigin:&quot;center top&quot;}),0);

					// ANIMATE THE CUTS
					var img=actli.find(&#x27;.defaultimg&#x27;),
						ro1=Math.round(Math.random()*20-10),
						ro2=Math.round(Math.random()*20-10),
						ro3=Math.round(Math.random()*20-10),
						xof = Math.random()*0.4-0.2,
						yof = Math.random()*0.4-0.2,
						sc1=Math.random()*1+1,
						sc2=Math.random()*1+1,
						sc3=Math.random()*0.3+0.3;

					mtl.add(punchgs.TweenLite.set(actli.find(&#x27;.tp-half-one&#x27;),{overflow:&#x27;hidden&#x27;}),0);
					mtl.add(punchgs.TweenLite.fromTo(actli.find(&#x27;.tp-half-one&#x27;),masterspeed/800,
					                 {width:oow,height:ooh/2,position:&#x27;absolute&#x27;,top:&#x27;0px&#x27;,left:&#x27;0px&#x27;,force3D:&quot;auto&quot;,transformOrigin:&quot;center top&quot;},
					                 {scale:sc1,rotation:ro1,y:(0-ooh-ooh/4),autoAlpha:0,ease:punchgs.Power2.easeInOut}),0);
					mtl.add(punchgs.TweenLite.fromTo(actli.find(&#x27;.tp-half-two&#x27;),masterspeed/800,
					                 {width:oow,height:ooh,overflow:&#x27;hidden&#x27;,position:&#x27;absolute&#x27;,top:ooh/2,left:&#x27;0px&#x27;,force3D:&quot;auto&quot;,transformOrigin:&quot;center bottom&quot;},
					                 {scale:sc2,rotation:ro2,y:ooh+ooh/4,ease:punchgs.Power2.easeInOut,autoAlpha:0,onComplete:function() {
						                // CLEAN UP
										punchgs.TweenLite.set(actli,{&#x27;position&#x27;:&#x27;absolute&#x27;,&#x27;z-index&#x27;:15});
										punchgs.TweenLite.set(nextli,{&#x27;position&#x27;:&#x27;absolute&#x27;,&#x27;z-index&#x27;:20});
										if (actli.find(&#x27;.tp-half-one&#x27;).length&gt;0)  {
											actli.find(&#x27;.tp-half-one .defaultimg&#x27;).unwrap();
											actli.find(&#x27;.tp-half-one .slotholder&#x27;).unwrap();
										}
										actli.find(&#x27;.tp-half-two&#x27;).remove();
					                 }}),0);

					subtl.add(punchgs.TweenLite.set(nextsh.find(&#x27;.defaultimg&#x27;),{autoAlpha:1}),0);

					if (actli.html()!=null)
						mtl.add(punchgs.TweenLite.fromTo(nextli,(masterspeed-200)/1000,
														{scale:sc3,x:(opt.width/4)*xof, y:(ooh/4)*yof,rotation:ro3,force3D:&quot;auto&quot;,transformOrigin:&quot;center center&quot;,ease:punchgs.Power2.easeOut},
														{autoAlpha:1,scale:1,x:0,y:0,rotation:0}),0);

					mtl.add(subtl,0);


			}

			////////////////////////////////////////
			// THE SLOTSLIDE - TRANSITION XVII.  //
			///////////////////////////////////////
			if (nexttrans==17) {								// 3D CURTAIN HORIZONTAL


						// ALL NEW SLOTS SHOULD BE SLIDED FROM THE LEFT TO THE RIGHT

						nextsh.find(&#x27;.slotslide&#x27;).each(function(j) {
							var ss=jQuery(this);

							mtl.add(punchgs.TweenLite.fromTo(ss,(masterspeed)/800,
											{opacity:0,rotationY:0,scale:0.9,rotationX:-110,force3D:&quot;auto&quot;,transformPerspective:600,transformOrigin:&quot;center center&quot;},
											{opacity:1,top:0,left:0,scale:1,rotation:0,rotationX:0,force3D:&quot;auto&quot;,rotationY:0,ease:punchgs.Power3.easeOut,delay:j*0.06}),0);

						});
			}



			////////////////////////////////////////
			// THE SLOTSLIDE - TRANSITION XVIII.  //
			///////////////////////////////////////
			if (nexttrans==18) {								// 3D CURTAIN VERTICAL

						// ALL NEW SLOTS SHOULD BE SLIDED FROM THE LEFT TO THE RIGHT
						nextsh.find(&#x27;.slotslide&#x27;).each(function(j) {
							var ss=jQuery(this);

							mtl.add(punchgs.TweenLite.fromTo(ss,(masterspeed)/500,
											{autoAlpha:0,rotationY:310,scale:0.9,rotationX:10,force3D:&quot;auto&quot;,transformPerspective:600,transformOrigin:&quot;center center&quot;},
											{autoAlpha:1,top:0,left:0,scale:1,rotation:0,rotationX:0,force3D:&quot;auto&quot;,rotationY:0,ease:punchgs.Power3.easeOut,delay:j*0.06}),0);
						});



			}


			////////////////////////////////////////
			// THE SLOTSLIDE - TRANSITION XIX.  //
			///////////////////////////////////////
			if (nexttrans==19 || nexttrans==22) {								// IN CUBE

						var subtl = new punchgs.TimelineLite();
						//SET DEFAULT IMG UNVISIBLE

						mtl.add(punchgs.TweenLite.set(actli,{zIndex:20}),0);
						mtl.add(punchgs.TweenLite.set(nextli,{zIndex:20}),0);
						setTimeout(function() {
							actsh.find(&#x27;.defaultimg&#x27;).css({opacity:0});
						},100);
						var chix=nextli.css(&#x27;z-index&#x27;),
							chix2=actli.css(&#x27;z-index&#x27;),
							rot = 90,
							op = 1,
							torig =&quot;center center &quot;;

						if (direction==1) rot = -90;

						if (nexttrans==19) {
							torig = torig+&quot;-&quot;+opt.height/2;
							op=0;

						} else {
							torig = torig+opt.height/2;
						}

						// ALL NEW SLOTS SHOULD BE SLIDED FROM THE LEFT TO THE RIGHT
						punchgs.TweenLite.set(container,{transformStyle:&quot;flat&quot;,backfaceVisibility:&quot;hidden&quot;,transformPerspective:600});

						nextsh.find(&#x27;.slotslide&#x27;).each(function(j) {
							var ss=jQuery(this);

							subtl.add(punchgs.TweenLite.fromTo(ss,masterspeed/1000,
											{transformStyle:&quot;flat&quot;,backfaceVisibility:&quot;hidden&quot;,left:0,rotationY:opt.rotate,z:10,top:0,scale:1,force3D:&quot;auto&quot;,transformPerspective:600,transformOrigin:torig,rotationX:rot},
											{left:0,rotationY:0,top:0,z:0, scale:1,force3D:&quot;auto&quot;,rotationX:0, delay:(j*50)/1000,ease:punchgs.Power2.easeInOut}),0);
							subtl.add(punchgs.TweenLite.to(ss,0.1,{autoAlpha:1,delay:(j*50)/1000}),0);
							mtl.add(subtl);
						});

						actsh.find(&#x27;.slotslide&#x27;).each(function(j) {
							var ss=jQuery(this);
							var rot = -90;
							if (direction==1) rot = 90;

							subtl.add(punchgs.TweenLite.fromTo(ss,masterspeed/1000,
											{transformStyle:&quot;flat&quot;,backfaceVisibility:&quot;hidden&quot;,autoAlpha:1,rotationY:0,top:0,z:0,scale:1,force3D:&quot;auto&quot;,transformPerspective:600,transformOrigin:torig, rotationX:0},
											{autoAlpha:1,rotationY:opt.rotate,top:0,z:10, scale:1,rotationX:rot, delay:(j*50)/1000,force3D:&quot;auto&quot;,ease:punchgs.Power2.easeInOut}),0);

							mtl.add(subtl);
						});
			}




			////////////////////////////////////////
			// THE SLOTSLIDE - TRANSITION XX.  //
			///////////////////////////////////////
			if (nexttrans==20 ) {								// FLYIN


						setTimeout(function() {
							actsh.find(&#x27;.defaultimg&#x27;).css({opacity:0});
						},100);
						var chix=nextli.css(&#x27;z-index&#x27;),
							chix2=actli.css(&#x27;z-index&#x27;);

						if (direction==1) {
						   var ofx = -opt.width
						   var rot  =70;
						   var torig = &quot;left center -&quot;+opt.height/2;
						} else {
							var ofx = opt.width;
							var rot = -70;
							var torig = &quot;right center -&quot;+opt.height/2;
						}


						nextsh.find(&#x27;.slotslide&#x27;).each(function(j) {
							var ss=jQuery(this);

							mtl.add(punchgs.TweenLite.fromTo(ss,masterspeed/1500,
											{left:ofx,rotationX:40,z:-600, opacity:op,top:0,force3D:&quot;auto&quot;,transformPerspective:600,transformOrigin:torig,rotationY:rot},
											{left:0, delay:(j*50)/1000,ease:punchgs.Power2.easeInOut}),0);

							mtl.add(punchgs.TweenLite.fromTo(ss,masterspeed/1000,
											{rotationX:40,z:-600, opacity:op,top:0,scale:1,force3D:&quot;auto&quot;,transformPerspective:600,transformOrigin:torig,rotationY:rot},
											{rotationX:0,opacity:1,top:0,z:0, scale:1,rotationY:0, delay:(j*50)/1000,ease:punchgs.Power2.easeInOut}),0);

							mtl.add(punchgs.TweenLite.to(ss,0.1,{opacity:1,force3D:&quot;auto&quot;,delay:(j*50)/1000+masterspeed/2000}),0);

						});
						actsh.find(&#x27;.slotslide&#x27;).each(function(j) {
							var ss=jQuery(this);

							if (direction!=1) {
							   var ofx = -opt.width
							   var rot  =70;
							   var torig = &quot;left center -&quot;+opt.height/2;
							} else {
								var ofx = opt.width;
								var rot = -70;
								var torig = &quot;right center -&quot;+opt.height/2;
							}
							mtl.add(punchgs.TweenLite.fromTo(ss,masterspeed/1000,
											{opacity:1,rotationX:0,top:0,z:0,scale:1,left:0, force3D:&quot;auto&quot;,transformPerspective:600,transformOrigin:torig, rotationY:0},
											{opacity:1,rotationX:40,top:0, z:-600, left:ofx, force3D:&quot;auto&quot;,scale:0.8,rotationY:rot, delay:(j*50)/1000,ease:punchgs.Power2.easeInOut}),0);
							mtl.add(punchgs.TweenLite.to(ss,0.1,{force3D:&quot;auto&quot;,opacity:0,delay:(j*50)/1000+(masterspeed/1000 - (masterspeed/10000))}),0);
						});
			}

			////////////////////////////////////////
			// THE SLOTSLIDE - TRANSITION XX.  //
			///////////////////////////////////////
			if (nexttrans==21 || nexttrans==25) {								// TURNOFF


						//SET DEFAULT IMG UNVISIBLE

						setTimeout(function() {
							actsh.find(&#x27;.defaultimg&#x27;).css({opacity:0});
						},100);
						var chix=nextli.css(&#x27;z-index&#x27;),
							chix2=actli.css(&#x27;z-index&#x27;),
							rot = 90,
							ofx = -opt.width,
							rot2 = -rot;

						if (direction==1) {
						   if (nexttrans==25) {
						   	 var torig = &quot;center top 0&quot;;
						   	 rot = opt.rotate;
						   } else {
						     var torig = &quot;left center 0&quot;;
						     rot2 = opt.rotate;
						   }

						} else {
							ofx = opt.width;
							rot = -90;
							if (nexttrans==25) {
						   	 var torig = &quot;center bottom 0&quot;
						   	 rot2 = -rot;
						   	 rot = opt.rotate;
						   } else {
						     var torig = &quot;right center 0&quot;;
						     rot2 = opt.rotate;
						   }
						}

						nextsh.find(&#x27;.slotslide&#x27;).each(function(j) {
							var ss=jQuery(this);


							mtl.add(punchgs.TweenLite.fromTo(ss,masterspeed/1000,
											{left:0,transformStyle:&quot;flat&quot;,rotationX:rot2,z:0, autoAlpha:0,top:0,scale:1,force3D:&quot;auto&quot;,transformPerspective:600,transformOrigin:torig,rotationY:rot},
											{left:0,rotationX:0,top:0,z:0, autoAlpha:1,scale:1,rotationY:0,force3D:&quot;auto&quot;, ease:punchgs.Power3.easeInOut}),0);
						});


						if (direction!=1) {
						   	ofx = -opt.width
						   	rot  = 90;

						   if (nexttrans==25) {
						   	 torig = &quot;center top 0&quot;
						   	 rot2 = -rot;
						   	 rot = opt.rotate;
						   } else {
						     torig = &quot;left center 0&quot;;
						     rot2 = opt.rotate;
						   }

						} else {
							ofx = opt.width;
							rot = -90;
							if (nexttrans==25) {
						   	 torig = &quot;center bottom 0&quot;
						   	 rot2 = -rot;
						   	 rot = opt.rotate;
						   } else {
						     torig = &quot;right center 0&quot;;
						     rot2 = opt.rotate;
						   }
						}

						actsh.find(&#x27;.slotslide&#x27;).each(function(j) {
							var ss=jQuery(this);
							mtl.add(punchgs.TweenLite.fromTo(ss,masterspeed/1000,
											{left:0,transformStyle:&quot;flat&quot;,rotationX:0,z:0, autoAlpha:1,top:0,scale:1,force3D:&quot;auto&quot;,transformPerspective:600,transformOrigin:torig,rotationY:0},
											{left:0,rotationX:rot2,top:0,z:0,autoAlpha:1,force3D:&quot;auto&quot;, scale:1,rotationY:rot,ease:punchgs.Power1.easeInOut}),0);
						});
			}



			////////////////////////////////////////
			// THE SLOTSLIDE - TRANSITION XX.  //
			///////////////////////////////////////
			if (nexttrans==23 || nexttrans == 24) {								// cube-horizontal - inboxhorizontal


						//SET DEFAULT IMG UNVISIBLE
						setTimeout(function() {
							actsh.find(&#x27;.defaultimg&#x27;).css({opacity:0});
						},100);
						var chix=nextli.css(&#x27;z-index&#x27;),
							chix2=actli.css(&#x27;z-index&#x27;),
							rot = -90,
							op = 1,
							opx=0;

						if (direction==1) rot = 90;
						if (nexttrans==23) {
							var torig = &quot;center center -&quot;+opt.width/2;
							op=0;
						} else
							var torig = &quot;center center &quot;+opt.width/2;

						punchgs.TweenLite.set(container,{transformStyle:&quot;preserve-3d&quot;,backfaceVisibility:&quot;hidden&quot;,perspective:2500});
										nextsh.find(&#x27;.slotslide&#x27;).each(function(j) {
							var ss=jQuery(this);
							mtl.add(punchgs.TweenLite.fromTo(ss,masterspeed/1000,
											{left:opx,rotationX:opt.rotate,force3D:&quot;auto&quot;,opacity:op,top:0,scale:1,transformPerspective:600,transformOrigin:torig,rotationY:rot},
											{left:0,rotationX:0,autoAlpha:1,top:0,z:0, scale:1,rotationY:0, delay:(j*50)/500,ease:punchgs.Power2.easeInOut}),0);
						});

						rot = 90;
						if (direction==1) rot = -90;

						actsh.find(&#x27;.slotslide&#x27;).each(function(j) {
							var ss=jQuery(this);
							mtl.add(punchgs.TweenLite.fromTo(ss,masterspeed/1000,
											{left:0,autoAlpha:1,rotationX:0,top:0,z:0,scale:1,force3D:&quot;auto&quot;,transformPerspective:600,transformOrigin:torig, rotationY:0},
											{left:opx,autoAlpha:1,rotationX:opt.rotate,top:0, scale:1,rotationY:rot, delay:(j*50)/500,ease:punchgs.Power2.easeInOut}),0);



						});
								}


			// SHOW FIRST LI &amp;&amp; ANIMATE THE CAPTIONS
			mtl.pause();
			animateTheCaptions(nextli, opt,null,mtl);
			punchgs.TweenLite.to(nextli,0.001,{autoAlpha:1});

			var data={};
			data.slideIndex=opt.next+1;
			data.slide = nextli;
			container.trigger(&#x27;revolution.slide.onchange&#x27;,data);
			setTimeout(function() { container.trigger(&#x27;revolution.slide.onafterswap&#x27;); },masterspeed);
			container.trigger(&#x27;revolution.slide.onvideostop&#x27;);

		}






		/**************************************
			-	GIVE FREE THE TRANSITIOSN	-
		**************************************/
		var letItFree = function(container,opt,nextsh,actsh,nextli,actli,mtl) {
					punchgs.TweenLite.to(nextsh.find(&#x27;.defaultimg&#x27;),0.001,{autoAlpha:1,onComplete:function() {
						removeSlots(container,opt,nextli);
					}});
					if (nextli.index()!=actli.index()) {
						punchgs.TweenLite.to(actli,0.2,{autoAlpha:0,onComplete:function() {
							removeSlots(container,opt,actli);
						}});
					}
					opt.act=opt.next;
					if (opt.navigationType==&quot;thumb&quot;) moveSelectedThumb(container);
					if (nextsh.data(&#x27;kenburns&#x27;)==&quot;on&quot;) {
						startKenBurn(container,opt);
					}
					container.find(&#x27;.current-sr-slide-visible&#x27;).removeClass(&quot;current-sr-slide-visible&quot;);
					nextli.addClass(&quot;current-sr-slide-visible&quot;);
					if (opt.parallax==&quot;scroll&quot; || opt.parallax==&quot;scroll+mouse&quot; || opt.parallax==&quot;mouse+scroll&quot;) {
								scrollParallax(container,opt);
					}

					mtl.clear();

			}


		//////////////////////////////////////////
		// CHANG THE YOUTUBE PLAYER STATE HERE //
		////////////////////////////////////////
		var  onPlayerStateChange = function(event) {

			 var embedCode = event.target.getVideoEmbedCode();
			 var ytcont = jQuery(&#x27;#&#x27;+embedCode.split(&#x27;id=&quot;&#x27;)[1].split(&#x27;&quot;&#x27;)[0])
			 var container = ytcont.closest(&#x27;.tp-simpleresponsive&#x27;);
			 var player = ytcont.parent().data(&#x27;player&#x27;);

			if (event.data == YT.PlayerState.PLAYING) {

				var bt = container.find(&#x27;.tp-bannertimer&#x27;);
				var opt = bt.data(&#x27;opt&#x27;);


				if (ytcont.closest(&#x27;.tp-caption&#x27;).data(&#x27;volume&#x27;)==&quot;mute&quot;)
					  player.mute();

				opt.videoplaying=true;
				container.trigger(&#x27;stoptimer&#x27;);
				container.trigger(&#x27;revolution.slide.onvideoplay&#x27;);

			} else {

				var bt = container.find(&#x27;.tp-bannertimer&#x27;);
				var opt = bt.data(&#x27;opt&#x27;);

				if ((event.data!=-1 &amp;&amp; event.data!=3)) {

					opt.videoplaying=false;
					container.trigger(&#x27;starttimer&#x27;);
					container.trigger(&#x27;revolution.slide.onvideostop&#x27;);

				}

				if (event.data==0 &amp;&amp; opt.nextslideatend==true)
					opt.container.revnext();
				else {

					opt.videoplaying=false;
					container.trigger(&#x27;starttimer&#x27;);
					container.trigger(&#x27;revolution.slide.onvideostop&#x27;);
				}

			}


		  }



		 ////////////////////////
		// VIMEO ADD EVENT /////
		////////////////////////
		var addEvent = function(element, eventName, callback) {

					if (element.addEventListener)
						element.addEventListener(eventName, callback, false);
					else
						element.attachEvent(eventName, callback, false);
		}





		/////////////////////////////////////
		// EVENT HANDLING FOR VIMEO VIDEOS //
		/////////////////////////////////////

		var vimeoready_auto = function(player_id,autoplay) {

			var froogaloop = $f(player_id),
				vimcont = jQuery(&#x27;#&#x27;+player_id),
				container = vimcont.closest(&#x27;.tp-simpleresponsive&#x27;),
				nextcaption = vimcont.closest(&#x27;.tp-caption&#x27;);

			setTimeout(function() {
				froogaloop.addEvent(&#x27;ready&#x27;, function(data) {
						if(autoplay) froogaloop.api(&#x27;play&#x27;);


							froogaloop.addEvent(&#x27;play&#x27;, function(data) {
								var bt = container.find(&#x27;.tp-bannertimer&#x27;);
								var opt = bt.data(&#x27;opt&#x27;);

								opt.videoplaying=true;
								container.trigger(&#x27;stoptimer&#x27;);
								if (nextcaption.data(&#x27;volume&#x27;)==&quot;mute&quot;)
								  froogaloop.api(&#x27;setVolume&#x27;,&quot;0&quot;);
							});

							froogaloop.addEvent(&#x27;finish&#x27;, function(data) {
									var bt = container.find(&#x27;.tp-bannertimer&#x27;);
									var opt = bt.data(&#x27;opt&#x27;);
									opt.videoplaying=false;
									container.trigger(&#x27;starttimer&#x27;);

									container.trigger(&#x27;revolution.slide.onvideoplay&#x27;); //opt.videostartednow=1;
									if (opt.nextslideatend==true)
										opt.container.revnext();

							});

							froogaloop.addEvent(&#x27;pause&#x27;, function(data) {
									var bt = container.find(&#x27;.tp-bannertimer&#x27;);
									var opt = bt.data(&#x27;opt&#x27;);
									opt.videoplaying=false;
									container.trigger(&#x27;starttimer&#x27;);
									container.trigger(&#x27;revolution.slide.onvideostop&#x27;); //opt.videostoppednow=1;
							});

						// PLAY VIDEO IF THUMBNAIL HAS BEEN CLICKED
						 nextcaption.find(&#x27;.tp-thumb-image&#x27;).click(function() {
							 punchgs.TweenLite.to(jQuery(this),0.3,{autoAlpha:0,force3D:&quot;auto&quot;,ease:punchgs.Power3.easeInOut})
							 froogaloop.api(&quot;play&quot;);
						 })
					});
				},150);
			}



			/////////////////////////////////////
			// RESIZE HTML5VIDEO FOR FULLSCREEN//
			/////////////////////////////////////
			var updateHTML5Size = function(pc,container) {
					var windowW = container.width();
					var windowH = container.height();
					var mediaAspect = pc.data(&#x27;mediaAspect&#x27;);
					if (mediaAspect == undefined) mediaAspect = 1;


					var windowAspect = windowW/windowH;

					pc.css({position:&quot;absolute&quot;});
					var video = pc.find(&#x27;video&#x27;);


					if (windowAspect &lt; mediaAspect) {
						// taller
						punchgs.TweenLite.to(pc,0.0001,{width:windowH*mediaAspect,force3D:&quot;auto&quot;,top:0,
												left:0-(windowH*mediaAspect-windowW)/2,
												height:windowH});

					} else {
						// wider
						punchgs.TweenLite.to(pc,0.0001,{width:windowW,force3D:&quot;auto&quot;,top:0-(windowW/mediaAspect-windowH)/2,
												left:0,
												height:windowW/mediaAspect});
					}
				}



				/////////////////////////////////////
				//	-	CREATE ANIMATION OBJECT	-  //
				/////////////////////////////////////
				var newAnimObject = function() {
										var a = new Object();
										a.x=0;
										a.y=0;
										a.rotationX = 0;
										a.rotationY = 0;
										a.rotationZ = 0;
										a.scale = 1;
										a.scaleX = 1;
										a.scaleY = 1;
										a.skewX = 0;
										a.skewY = 0;
										a.opacity=0;
										a.transformOrigin = &quot;center, center&quot;;
										a.transformPerspective = 400;
										a.rotation = 0;
										return a;
									}

				///////////////////////////////////////////////////
				// ANALYSE AND READ OUT DATAS FROM HTML CAPTIONS //
				///////////////////////////////////////////////////
				var getAnimDatas = function(frm,data) {

									var customarray = data.split(&#x27;;&#x27;);
									jQuery.each(customarray,function(index,param) {

										param = param.split(&quot;:&quot;)

										var w = param[0],
											v = param[1];
										if (w==&quot;rotationX&quot;) frm.rotationX = parseInt(v,0);
										if (w==&quot;rotationY&quot;) frm.rotationY = parseInt(v,0);
										if (w==&quot;rotationZ&quot;) frm.rotationZ = parseInt(v,0);
										if (w==&quot;rotationZ&quot;) frm.rotation = parseInt(v,0);
										if (w==&quot;scaleX&quot;)  frm.scaleX = parseFloat(v);
										if (w==&quot;scaleY&quot;)  frm.scaleY = parseFloat(v);
										if (w==&quot;opacity&quot;) frm.opacity = parseFloat(v);
										if (w==&quot;skewX&quot;)   frm.skewX = parseInt(v,0);
										if (w==&quot;skewY&quot;)   frm.skewY = parseInt(v,0);
										if (w==&quot;x&quot;) frm.x = parseInt(v,0);
										if (w==&quot;y&quot;) frm.y = parseInt(v,0);
										if (w==&quot;z&quot;) frm.z = parseInt(v,0);
										if (w==&quot;transformOrigin&quot;) frm.transformOrigin = v.toString();
										if (w==&quot;transformPerspective&quot;) frm.transformPerspective=parseInt(v,0);
									})

									return frm;
								}
				///////////////////////////////////////////////////////////////////
				// ANALYSE AND READ OUT DATAS FROM HTML CAPTIONS ANIMATION STEPS //
				///////////////////////////////////////////////////////////////////
				var getAnimSteps = function(data) {

						var paramarray = data.split(&quot;animation:&quot;);
						var params = new Object();

						params.animation = getAnimDatas(newAnimObject(),paramarray[1]);
						var customarray = paramarray[0].split(&#x27;;&#x27;);

						jQuery.each(customarray,function(index,param) {
							param = param.split(&quot;:&quot;)
							var w = param[0],
								v = param[1];
							if (w==&quot;typ&quot;) params.typ = v;
							if (w==&quot;speed&quot;) params.speed = parseInt(v,0)/1000;
							if (w==&quot;start&quot;) params.start = parseInt(v,0)/1000;
							if (w==&quot;elementdelay&quot;)  params.elementdelay = parseFloat(v);
							if (w==&quot;ease&quot;)  params.ease = v;
						})

					return params;
				}




				////////////////////////
				// SHOW THE CAPTION  //
				///////////////////////
				var animateTheCaptions = function(nextli, opt,recalled,mtl) {

						// MAKE SURE THE ANIMATION ENDS WITH A CLEANING ON MOZ TRANSFORMS
						function animcompleted() {
						}

						function tlstart() {
						}

						if (nextli.data(&#x27;ctl&#x27;)==undefined) {
							nextli.data(&#x27;ctl&#x27;,new punchgs.TimelineLite());
						}

						var ctl = nextli.data(&#x27;ctl&#x27;),
							offsetx=0,
							offsety=0,
							allcaptions = nextli.find(&#x27;.tp-caption&#x27;),
							allstaticcaptions = opt.container.find(&#x27;.tp-static-layers&#x27;).find(&#x27;.tp-caption&#x27;);


						ctl.pause();

						jQuery.each(allstaticcaptions, function(index,staticcapt) {
							allcaptions.push(staticcapt);
						});

						allcaptions.each(function(i) {
								var internrecalled = recalled,
							    	staticdirection = -1,	// 1 -&gt; In,  2-&gt; Out  0-&gt; Ignore  -1-&gt; Not Static
									nextcaption=jQuery(this);

								if (nextcaption.hasClass(&quot;tp-static-layer&quot;)) {
										var nss = nextcaption.data(&#x27;startslide&#x27;),
											nes = nextcaption.data(&#x27;endslide&#x27;);

									if ( nss == -1 || nss == &quot;-1&quot;)
										nextcaption.data(&#x27;startslide&#x27;,0);

									if ( nes== -1 || nes == &quot;-1&quot;)
										nextcaption.data(&#x27;endslide&#x27;,opt.slideamount);

									if (nss==0 &amp;&amp; nes==opt.slideamount-1)
										nextcaption.data(&#x27;endslide&#x27;,opt.slideamount+1);


									// RESET SETTIGNS AFTER SETTING THEM AGAIN
									nss = nextcaption.data(&#x27;startslide&#x27;),
									nes = nextcaption.data(&#x27;endslide&#x27;);


									// IF STATIC ITEM CURRENTLY NOT VISIBLE
									if (!nextcaption.hasClass(&quot;tp-is-shown&quot;)) {
										// IF ITEM SHOULD BECOME VISIBLE


										if ((nss&lt;=opt.next &amp;&amp; nes&gt;=opt.next) ||
											(nss == opt.next) || (nes == opt.next)){

												nextcaption.addClass(&quot;tp-is-shown&quot;);
												staticdirection = 1;
										} else {

											staticdirection = 0;
										}
									// IF STATIC ITEM ALREADY VISIBLE
									} else {
										if ((nes==opt.next) ||
											(nss &gt; opt.next) ||
											(nes &lt; opt.next)) {

											staticdirection = 2;
											//nextcaption.removeClass(&quot;tp-is-shown&quot;);
										} else {
											staticdirection = 0;
										}

									}

									//if (staticdirection==2) staticdirection = 0;

								}

								offsetx = opt.width/2 - (opt.startwidth*opt.bw)/2;

								var xbw = opt.bw;
								var xbh = opt.bh;

								if (opt.fullScreen==&quot;on&quot;)
									  offsety = opt.height/2 - (opt.startheight*opt.bh)/2;

								if (opt.autoHeight==&quot;on&quot; || (opt.minHeight!=undefined &amp;&amp; opt.minHeight&gt;0))
									  offsety = opt.container.height()/2 - (opt.startheight*opt.bh)/2;;


								if (offsety&lt;0) offsety=0;



								var handlecaption=0;

								// HIDE CAPTION IF RESOLUTION IS TOO LOW
								if (opt.width&lt;opt.hideCaptionAtLimit &amp;&amp; nextcaption.data(&#x27;captionhidden&#x27;)==&quot;on&quot;) {
									nextcaption.addClass(&quot;tp-hidden-caption&quot;)
									handlecaption=1;
								} else {
									if (opt.width&lt;opt.hideAllCaptionAtLimit || opt.width&lt;opt.hideAllCaptionAtLilmit)	{
										nextcaption.addClass(&quot;tp-hidden-caption&quot;)
										handlecaption=1;
									} else {
										nextcaption.removeClass(&quot;tp-hidden-caption&quot;)
									}
								}



								if (handlecaption==0) {

									// ADD A CLICK LISTENER TO THE CAPTION
									if (nextcaption.data(&#x27;linktoslide&#x27;)!=undefined &amp;&amp; !nextcaption.hasClass(&quot;hasclicklistener&quot;)) {
										nextcaption.addClass(&quot;hasclicklistener&quot;)
										nextcaption.css({&#x27;cursor&#x27;:&#x27;pointer&#x27;});
										if (nextcaption.data(&#x27;linktoslide&#x27;)!=&quot;no&quot;) {
											nextcaption.click(function() {
												var nextcaption=jQuery(this);
												var dir = nextcaption.data(&#x27;linktoslide&#x27;);
												if (dir!=&quot;next&quot; &amp;&amp; dir!=&quot;prev&quot;) {
													opt.container.data(&#x27;showus&#x27;,dir);
													opt.container.parent().find(&#x27;.tp-rightarrow&#x27;).click();
												} else
													if (dir==&quot;next&quot;)
														opt.container.parent().find(&#x27;.tp-rightarrow&#x27;).click();
												else
													if (dir==&quot;prev&quot;)
														opt.container.parent().find(&#x27;.tp-leftarrow&#x27;).click();
											});
										}
									}// END OF CLICK LISTENER


									if (offsetx&lt;0) offsetx=0;


									if (nextcaption.hasClass(&quot;tp-videolayer&quot;) || nextcaption.find(&#x27;iframe&#x27;).length&gt;0 || nextcaption.find(&#x27;video&#x27;).length&gt;0 ) {

										// YOUTUBE AND VIMEO LISTENRES INITIALISATION
										var frameID = &quot;iframe&quot;+Math.round(Math.random()*100000+1),
											vidw = nextcaption.data(&quot;videowidth&quot;),
											vidh = nextcaption.data(&quot;videoheight&quot;),
											vida = nextcaption.data(&quot;videoattributes&quot;),
											vidytid = nextcaption.data(&#x27;ytid&#x27;),
											vimeoid = nextcaption.data(&#x27;vimeoid&#x27;),
											videopreload = nextcaption.data(&#x27;videpreload&#x27;),
											videomp = nextcaption.data(&#x27;videomp4&#x27;),
											videowebm = nextcaption.data(&#x27;videowebm&#x27;),
											videoogv = nextcaption.data(&#x27;videoogv&#x27;),
											videocontrols = nextcaption.data(&#x27;videocontrols&#x27;),
											httpprefix = &quot;http&quot;,
											videoloop = nextcaption.data(&#x27;videoloop&#x27;)==&quot;loop&quot; ? &quot;loop&quot; : nextcaption.data(&#x27;videoloop&#x27;)==&quot;loopandnoslidestop&quot; ? &quot;loop&quot; : &quot;&quot;;

										if (nextcaption.data(&#x27;thumbimage&#x27;)!=undefined &amp;&amp; nextcaption.data(&#x27;videoposter&#x27;)==undefined)
											nextcaption.data(&#x27;videoposter&#x27;,nextcaption.data(&#x27;thumbimage&#x27;))

										// ADD YOUTUBE IFRAME IF NEEDED
										if (vidytid!=undefined &amp;&amp; String(vidytid).length&gt;1 &amp;&amp; nextcaption.find(&#x27;iframe&#x27;).length==0) {
											httpprefix = &quot;https&quot;;

											if (videocontrols==&quot;none&quot;) {
										 		vida = vida.replace(&quot;controls=1&quot;,&quot;controls=0&quot;);
										 		if (vida.toLowerCase().indexOf(&#x27;controls&#x27;)==-1)
										 		  vida = vida+&quot;&amp;controls=0&quot;;
										 	}
											nextcaption.append(&#x27;&lt;iframe style=&quot;visible:hidden&quot; src=&quot;&#x27;+httpprefix+&#x27;://www.youtube.com/embed/&#x27;+vidytid+&#x27;?&#x27;+vida+&#x27;&quot; width=&quot;&#x27;+vidw+&#x27;&quot; height=&quot;&#x27;+vidh+&#x27;&quot; style=&quot;width:&#x27;+vidw+&#x27;px;height:&#x27;+vidh+&#x27;px&quot;&gt;&lt;/iframe&gt;&#x27;);
										}

										// ADD VIMEO IFRAME IF NEEDED
										if (vimeoid!=undefined &amp;&amp; String(vimeoid).length&gt;1 &amp;&amp; nextcaption.find(&#x27;iframe&#x27;).length==0) {
											if (location.protocol === &#x27;https:&#x27;)
												httpprefix = &quot;https&quot;;

											nextcaption.append(&#x27;&lt;iframe style=&quot;visible:hidden&quot; src=&quot;&#x27;+httpprefix+&#x27;://player.vimeo.com/video/&#x27;+vimeoid+&#x27;?&#x27;+vida+&#x27;&quot; width=&quot;&#x27;+vidw+&#x27;&quot; height=&quot;&#x27;+vidh+&#x27;&quot; style=&quot;width:&#x27;+vidw+&#x27;px;height:&#x27;+vidh+&#x27;px&quot;&gt;&lt;/iframe&gt;&#x27;);
										}

										// ADD HTML5 VIDEO IF NEEDED
										if ((videomp!=undefined || videowebm!=undefined) &amp;&amp; nextcaption.find(&#x27;video&#x27;).length==0) {

											if (videocontrols!=&quot;controls&quot;) videocontrols=&quot;&quot;;
											var apptxt = &#x27;&lt;video style=&quot;visible:hidden&quot; class=&quot;&quot; &#x27;+videoloop+&#x27; preload=&quot;&#x27;+videopreload+&#x27;&quot; width=&quot;&#x27;+vidw+&#x27;&quot; height=&quot;&#x27;+vidh+&#x27;&quot;&#x27;;
											/*if (nextcaption.data(&#x27;videoposter&#x27;)!=undefined)
												apptxt = apptxt + &#x27;poster=&quot;&#x27;+nextcaption.data(&#x27;videoposter&#x27;)+&#x27;&quot;&gt;&#x27;;
												apptxt = apptxt + &#x27;&lt;source src=&quot;&#x27;+videomp+&#x27;&quot; type=&quot;video/mp4&quot; /&gt;&#x27;;
												apptxt = apptxt + &#x27;&lt;source src=&quot;&#x27;+videowebm+&#x27;&quot; type=&quot;video/webm&quot; /&gt;&#x27;;
												apptxt = apptxt + &#x27;&lt;source src=&quot;&#x27;+videoogv+&#x27;&quot; type=&quot;video/ogg&quot; /&gt;&#x27;;
												apptxt = apptxt + &#x27;&lt;/video&gt;&#x27;;
											nextcaption.append(apptxt);*/
											
											if (nextcaption.data(&#x27;videoposter&#x27;)!=undefined)
												if (nextcaption.data(&#x27;videoposter&#x27;) != undefined) apptxt = apptxt + &#x27;poster=&quot;&#x27;+nextcaption.data(&#x27;videoposter&#x27;)+&#x27;&quot;&gt;&#x27;;
												if (videowebm!=undefined &amp;&amp; get_browser().toLowerCase()==&quot;firefox&quot;) apptxt = apptxt + &#x27;&lt;source src=&quot;&#x27;+videowebm+&#x27;&quot; type=&quot;video/webm&quot; /&gt;&#x27;;
												if (videomp!=undefined) apptxt = apptxt + &#x27;&lt;source src=&quot;&#x27;+videomp+&#x27;&quot; type=&quot;video/mp4&quot; /&gt;&#x27;;
												if (videoogv!=undefined) apptxt = apptxt + &#x27;&lt;source src=&quot;&#x27;+videoogv+&#x27;&quot; type=&quot;video/ogg&quot; /&gt;&#x27;;
												apptxt = apptxt + &#x27;&lt;/video&gt;&#x27;;
											nextcaption.append(apptxt);

											if (videocontrols==&quot;controls&quot;)
												nextcaption.append(&#x27;&lt;div class=&quot;tp-video-controls&quot;&gt;&#x27;+
																		&#x27;&lt;div class=&quot;tp-video-button-wrap&quot;&gt;&lt;button type=&quot;button&quot; class=&quot;tp-video-button tp-vid-play-pause&quot;&gt;Play&lt;/button&gt;&lt;/div&gt;&#x27;+
																		&#x27;&lt;div class=&quot;tp-video-seek-bar-wrap&quot;&gt;&lt;input  type=&quot;range&quot; class=&quot;tp-seek-bar&quot; value=&quot;0&quot;&gt;&lt;/div&gt;&#x27;+
																		&#x27;&lt;div class=&quot;tp-video-button-wrap&quot;&gt;&lt;button  type=&quot;button&quot; class=&quot;tp-video-button tp-vid-mute&quot;&gt;Mute&lt;/button&gt;&lt;/div&gt;&#x27;+
																		&#x27;&lt;div class=&quot;tp-video-vol-bar-wrap&quot;&gt;&lt;input  type=&quot;range&quot; class=&quot;tp-volume-bar&quot; min=&quot;0&quot; max=&quot;1&quot; step=&quot;0.1&quot; value=&quot;1&quot;&gt;&lt;/div&gt;&#x27;+
																		&#x27;&lt;div class=&quot;tp-video-button-wrap&quot;&gt;&lt;button  type=&quot;button&quot; class=&quot;tp-video-button tp-vid-full-screen&quot;&gt;Full-Screen&lt;/button&gt;&lt;/div&gt;&#x27;+
																	&#x27;&lt;/div&gt;&#x27;);
										}

										// RESET DEFAULTS
										var autoplaywason = false;
										if (nextcaption.data(&#x27;autoplayonlyfirsttime&#x27;) == true || nextcaption.data(&#x27;autoplayonlyfirsttime&#x27;)==&quot;true&quot; || nextcaption.data(&#x27;autoplay&#x27;)==true) {
											nextcaption.data(&#x27;autoplay&#x27;,true);
											autoplaywason = true;
										}


										nextcaption.find(&#x27;iframe&#x27;).each(function() {
												var ifr=jQuery(this);

												punchgs.TweenLite.to(ifr,0.1,{autoAlpha:1, zIndex:0, transformStyle:&quot;preserve-3d&quot;,z:0,rotationX:0,force3D:&quot;auto&quot;});
												if (is_mobile()) {
													var oldsrc = ifr.attr(&#x27;src&#x27;);
													ifr.attr(&#x27;src&#x27;,&quot;&quot;);
													ifr.attr(&#x27;src&#x27;,oldsrc);
												}


												// START YOUTUBE HANDLING
												opt.nextslideatend = nextcaption.data(&#x27;nextslideatend&#x27;);

												// IF VIDEOPOSTER EXISTING
												if (nextcaption.data(&#x27;videoposter&#x27;)!=undefined &amp;&amp; nextcaption.data(&#x27;videoposter&#x27;).length&gt;2 &amp;&amp; nextcaption.data(&#x27;autoplay&#x27;)!=true &amp;&amp; !internrecalled) {
													if (nextcaption.find(&#x27;.tp-thumb-image&#x27;).length==0)
														nextcaption.append(&#x27;&lt;div class=&quot;tp-thumb-image&quot; style=&quot;cursor:pointer; position:absolute;top:0px;left:0px;width:100%;height:100%;background-image:url(&#x27;+nextcaption.data(&#x27;videoposter&#x27;)+&#x27;); background-size:cover&quot;&gt;&lt;/div&gt;&#x27;);
													else
													  punchgs.TweenLite.set(nextcaption.find(&#x27;.tp-thumb-image&#x27;),{autoAlpha:1});
												}

												// IF IFRAME IS A YOUTUBE FRAME
												if (ifr.attr(&#x27;src&#x27;).toLowerCase().indexOf(&#x27;youtube&#x27;)&gt;=0) {

														// IF LISTENER DOES NOT EXIST YET
														 if (!ifr.hasClass(&quot;HasListener&quot;)) {
															try {
																ifr.attr(&#x27;id&#x27;,frameID);
																var player;
																var ytint = setInterval(function() {
																	if (YT !=undefined)
																		if (typeof YT.Player != undefined &amp;&amp; typeof YT.Player !=&quot;undefined&quot;) {
																			player = new YT.Player(frameID, {
																				events: {
																					&quot;onStateChange&quot;: onPlayerStateChange,
																					&#x27;onReady&#x27;: function(event) {
																						var embedCode = event.target.getVideoEmbedCode(),
																							ytcont = jQuery(&#x27;#&#x27;+embedCode.split(&#x27;id=&quot;&#x27;)[1].split(&#x27;&quot;&#x27;)[0]),
																							nextcaption = ytcont.closest(&#x27;.tp-caption&#x27;),
																							videorate = nextcaption.data(&#x27;videorate&#x27;),
																							videostart = nextcaption.data(&#x27;videostart&#x27;);


																						if (videorate!=undefined)
																							event.target.setPlaybackRate(parseFloat(videorate));

																						/*if (nextcaption.data(&#x27;autoplay&#x27;)==true || autoplaywason)
																							event.target.playVideo();*/

																						if (!is_mobile() &amp;&amp; nextcaption.data(&#x27;autoplay&#x27;)==true || autoplaywason) {
																								nextcaption.data(&#x27;timerplay&#x27;,setTimeout(function() {
																									event.target.playVideo();
																								},nextcaption.data(&#x27;start&#x27;)));
																						}

																						// PLAY VIDEO IF THUMBNAIL HAS BEEN CLICKED
																						 nextcaption.find(&#x27;.tp-thumb-image&#x27;).click(function() {
																							 punchgs.TweenLite.to(jQuery(this),0.3,{autoAlpha:0,force3D:&quot;auto&quot;,ease:punchgs.Power3.easeInOut})
																							 if (!is_mobile()) {
																								 player.playVideo();
																							}
																						 })

																					}
																				}
																			});
																		}
																		ifr.addClass(&quot;HasListener&quot;);
																		nextcaption.data(&#x27;player&#x27;,player);
																		clearInterval(ytint);
																}, 100)
															} catch(e) {}
													 } else {
													 	if (!recalled) {
														 	var player=nextcaption.data(&#x27;player&#x27;);
															if (nextcaption.data(&#x27;forcerewind&#x27;)==&quot;on&quot; &amp;&amp; !is_mobile())
																	player.seekTo(0);

															if (!is_mobile() &amp;&amp; nextcaption.data(&#x27;autoplay&#x27;)==true || autoplaywason) {
																	nextcaption.data(&#x27;timerplay&#x27;,setTimeout(function() {
																		player.playVideo();
																	},nextcaption.data(&#x27;start&#x27;)));
															}
														}
													 } // END YOUTUBE HANDLING


												} else

												// START VIMEO HANDLING
												if (ifr.attr(&#x27;src&#x27;).toLowerCase().indexOf(&#x27;vimeo&#x27;)&gt;=0) {
														   if (!ifr.hasClass(&quot;HasListener&quot;)) {
																ifr.addClass(&quot;HasListener&quot;);
																ifr.attr(&#x27;id&#x27;,frameID);
																var isrc = ifr.attr(&#x27;src&#x27;);
																var queryParameters = {}, queryString = isrc,
																re = /([^&amp;=]+)=([^&amp;]*)/g, m;
																// Creates a map with the query string parameters
																while (m = re.exec(queryString)) {
																	queryParameters[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
																}

																if (queryParameters[&#x27;player_id&#x27;]!=undefined)
																	isrc = isrc.replace(queryParameters[&#x27;player_id&#x27;],frameID);
																else
																	isrc=isrc+&quot;&amp;player_id=&quot;+frameID;

																try{ isrc = isrc.replace(&#x27;api=0&#x27;,&#x27;api=1&#x27;); } catch(e) {}

																isrc=isrc+&quot;&amp;api=1&quot;;

																ifr.attr(&#x27;src&#x27;,isrc);
																var player = nextcaption.find(&#x27;iframe&#x27;)[0];
																var vimint = setInterval(function() {
																	if ($f !=undefined){
																		if (typeof $f(frameID).api != undefined &amp;&amp; typeof $f(frameID).api !=&quot;undefined&quot;) {

																			$f(player).addEvent(&#x27;ready&#x27;, function(){
																				vimeoready_auto(frameID,autoplaywason)
																			});
																			clearInterval(vimint);
																		}
																	}
																},100);

															 } else {
															 		if (!recalled) {
																		if (!is_mobile() &amp;&amp; (nextcaption.data(&#x27;autoplay&#x27;)==true || nextcaption.data(&#x27;forcerewind&#x27;)==&quot;on&quot;)) {

																			var ifr = nextcaption.find(&#x27;iframe&#x27;);
																			var id = ifr.attr(&#x27;id&#x27;);
																			var froogaloop = $f(id);
																			if (nextcaption.data(&#x27;forcerewind&#x27;)==&quot;on&quot;)
																					froogaloop.api(&quot;seekTo&quot;,0);
																			nextcaption.data(&#x27;timerplay&#x27;,setTimeout(function() {
																				if (nextcaption.data(&#x27;autoplay&#x27;)==true)
																					froogaloop.api(&quot;play&quot;);
																			},nextcaption.data(&#x27;start&#x27;)));
																		}
																	}
															 }// END HAS LISTENER HANDLING
												}  // END OF VIMEO HANDLING
										}); // END OF LOOP THROUGH IFRAMES



										// START OF HTML5 VIDEOS
										if ((is_mobile() &amp;&amp; nextcaption.data(&#x27;disablevideoonmobile&#x27;)==1) ||isIE(8)) nextcaption.find(&#x27;video&#x27;).remove();
										//if (is_mobile() &amp;&amp; jQuery(window).width()&lt;569)  nextcaption.find(&#x27;video&#x27;).remove()

										if (nextcaption.find(&#x27;video&#x27;).length&gt;0) {
											nextcaption.find(&#x27;video&#x27;).each(function(i) {

												var video = this,
													jvideo = jQuery(this);


												if (!jvideo.parent().hasClass(&quot;html5vid&quot;))
													jvideo.wrap(&#x27;&lt;div class=&quot;html5vid&quot; style=&quot;position:relative;top:0px;left:0px;width:auto;height:auto&quot;&gt;&lt;/div&gt;&#x27;);

												var html5vid = jvideo.parent();

												// WAITING FOR META DATAS

												addEvent(video,&#x27;loadedmetadata&#x27;,function(html5vid) {
														html5vid.data(&#x27;metaloaded&#x27;,1);
												}(html5vid));


												clearInterval(html5vid.data(&#x27;interval&#x27;));
												html5vid.data(&#x27;interval&#x27;,setInterval(function() {
													if (html5vid.data(&#x27;metaloaded&#x27;)==1 || video.duration!=NaN) {
														clearInterval(html5vid.data(&#x27;interval&#x27;));
														// FIRST TIME LOADED THE HTML5 VIDEO
														if (!html5vid.hasClass(&quot;HasListener&quot;)) {
																html5vid.addClass(&quot;HasListener&quot;);

																if (nextcaption.data(&#x27;dottedoverlay&#x27;)!=&quot;none&quot; &amp;&amp; nextcaption.data(&#x27;dottedoverlay&#x27;)!=undefined)
																if (nextcaption.find(&#x27;.tp-dottedoverlay&#x27;).length!=1)
																	html5vid.append(&#x27;&lt;div class=&quot;tp-dottedoverlay &#x27;+nextcaption.data(&#x27;dottedoverlay&#x27;)+&#x27;&quot;&gt;&lt;/div&gt;&#x27;);

																if (jvideo.attr(&#x27;control&#x27;) == undefined ) {
																	if (html5vid.find(&#x27;.tp-video-play-button&#x27;).length==0)
																		html5vid.append(&#x27;&lt;div class=&quot;tp-video-play-button&quot;&gt;&lt;i class=&quot;revicon-right-dir&quot;&gt;&lt;/i&gt;&lt;div class=&quot;tp-revstop&quot;&gt;&lt;/div&gt;&lt;/div&gt;&#x27;);
																	html5vid.find(&#x27;video, .tp-poster, .tp-video-play-button&#x27;).click(function() {
																		if (html5vid.hasClass(&quot;videoisplaying&quot;))
																			video.pause();
																		else
																			video.play();
																	})
																}

																if (nextcaption.data(&#x27;forcecover&#x27;)==1 || nextcaption.hasClass(&#x27;fullscreenvideo&#x27;))  {
																	if (nextcaption.data(&#x27;forcecover&#x27;)==1) {
																		updateHTML5Size(html5vid,opt.container);
																		html5vid.addClass(&quot;fullcoveredvideo&quot;);
																		nextcaption.addClass(&quot;fullcoveredvideo&quot;);
																	}
																	html5vid.css({width:&quot;100%&quot;, height:&quot;100%&quot;});
																}



																var playButton = nextcaption.find(&#x27;.tp-vid-play-pause&#x27;)[0],
																	muteButton = nextcaption.find(&#x27;.tp-vid-mute&#x27;)[0],
																	fullScreenButton = nextcaption.find(&#x27;.tp-vid-full-screen&#x27;)[0],
																	seekBar = nextcaption.find(&#x27;.tp-seek-bar&#x27;)[0],
																	volumeBar = nextcaption.find(&#x27;.tp-volume-bar&#x27;)[0];

																if (playButton!=undefined) {
																	// Event listener for the play/pause button
																	addEvent(playButton,&quot;click&quot;, function() {
																		if (video.paused == true)
																			// Play the video
																			video.play();
																		else
																			// Pause the video
																			video.pause();
																	});

																	// Event listener for the mute button
																	addEvent(muteButton,&quot;click&quot;, function() {
																		if (video.muted == false) {
																			// Mute the video
																			video.muted = true;

																			// Update the button text
																			muteButton.innerHTML = &quot;Unmute&quot;;
																		} else {
																			// Unmute the video
																			video.muted = false;

																			// Update the button text
																			muteButton.innerHTML = &quot;Mute&quot;;
																		}
																	});

																	// Event listener for the full-screen button
																	addEvent(fullScreenButton,&quot;click&quot;, function() {
																		if (video.requestFullscreen) {
																			video.requestFullscreen();
																		} else if (video.mozRequestFullScreen) {
																			video.mozRequestFullScreen(); // Firefox
																		} else if (video.webkitRequestFullscreen) {
																			video.webkitRequestFullscreen(); // Chrome and Safari
																		}
																	});


																	// Event listener for the seek bar
																	addEvent(seekBar,&quot;change&quot;, function() {
																		// Calculate the new time
																		var time = video.duration * (seekBar.value / 100);
																		// Update the video time
																		video.currentTime = time;
																	});


																	// Update the seek bar as the video plays
																	addEvent(video,&quot;timeupdate&quot;, function() {
																		// Calculate the slider value
																		var value = (100 / video.duration) * video.currentTime;

																		// Update the slider value
																		seekBar.value = value;
																	});

																	// Pause the video when the seek handle is being dragged
																	addEvent(seekBar,&quot;mousedown&quot;, function() {
																		video.pause();
																	});

																	// Play the video when the seek handle is dropped
																	addEvent(seekBar,&quot;mouseup&quot;, function() {
																		video.play();
																	});

																	// Event listener for the volume bar
																	addEvent(volumeBar,&quot;change&quot;, function() {
																		// Update the video volume
																		video.volume = volumeBar.value;
																	});
																}


																// VIDEO EVENT LISTENER FOR &quot;PLAY&quot;
																addEvent(video,&quot;play&quot;,function() {
																		if (nextcaption.data(&#x27;volume&#x27;)==&quot;mute&quot;)
																			  video.muted=true;

																		html5vid.addClass(&quot;videoisplaying&quot;);

			 															if (nextcaption.data(&#x27;videoloop&#x27;)==&quot;loopandnoslidestop&quot;) {
																			opt.videoplaying=false;
																			opt.container.trigger(&#x27;starttimer&#x27;);
																			opt.container.trigger(&#x27;revolution.slide.onvideostop&#x27;);
																		} else {

																			opt.videoplaying=true;
																			opt.container.trigger(&#x27;stoptimer&#x27;);
																			opt.container.trigger(&#x27;revolution.slide.onvideoplay&#x27;);
																		}

																		var playButton = nextcaption.find(&#x27;.tp-vid-play-pause&#x27;)[0],
																			muteButton = nextcaption.find(&#x27;.tp-vid-mute&#x27;)[0];
																		if (playButton!=undefined)
																			playButton.innerHTML = &quot;Pause&quot;;
																		if (muteButton!=undefined &amp;&amp; video.muted)
																			muteButton.innerHTML = &quot;Unmute&quot;;
																	});

																// VIDEO EVENT LISTENER FOR &quot;PAUSE&quot;
																addEvent(video,&quot;pause&quot;,function() {
																			html5vid.removeClass(&quot;videoisplaying&quot;);
																			opt.videoplaying=false;
																			opt.container.trigger(&#x27;starttimer&#x27;);
																			opt.container.trigger(&#x27;revolution.slide.onvideostop&#x27;);
																			var playButton = nextcaption.find(&#x27;.tp-vid-play-pause&#x27;)[0];
																			if (playButton!=undefined)
																				playButton.innerHTML = &quot;Play&quot;;

																	});

																// VIDEO EVENT LISTENER FOR &quot;END&quot;
																addEvent(video,&quot;ended&quot;,function() {
																			html5vid.removeClass(&quot;videoisplaying&quot;);
																			opt.videoplaying=false;
																			opt.container.trigger(&#x27;starttimer&#x27;);
																			opt.container.trigger(&#x27;revolution.slide.onvideostop&#x27;);
																			if (opt.nextslideatend==true)
																				opt.container.revnext();
																	});

															} // END OF LISTENER DECLARATION

															var autoplaywason = false;
															if (nextcaption.data(&#x27;autoplayonlyfirsttime&#x27;) == true || nextcaption.data(&#x27;autoplayonlyfirsttime&#x27;)==&quot;true&quot;)
																autoplaywason = true;

															var mediaaspect=16/9;
															if (nextcaption.data(&#x27;aspectratio&#x27;)==&quot;4:3&quot;) mediaaspect=4/3;
															html5vid.data(&#x27;mediaAspect&#x27;,mediaaspect);

															if (html5vid.closest(&#x27;.tp-caption&#x27;).data(&#x27;forcecover&#x27;)==1) {
																updateHTML5Size(html5vid,opt.container);
																html5vid.addClass(&quot;fullcoveredvideo&quot;);
															}

															jvideo.css({display:&quot;block&quot;});
															opt.nextslideatend = nextcaption.data(&#x27;nextslideatend&#x27;);

															// IF VIDEO SHOULD BE AUTOPLAYED
															if (nextcaption.data(&#x27;autoplay&#x27;)==true || autoplaywason==true) {


																if (nextcaption.data(&#x27;videoloop&#x27;)==&quot;loopandnoslidestop&quot;) {
																	opt.videoplaying=false;
																	opt.container.trigger(&#x27;starttimer&#x27;);
																	opt.container.trigger(&#x27;revolution.slide.onvideostop&#x27;);
																} else {
																	opt.videoplaying=true;
																	opt.container.trigger(&#x27;stoptimer&#x27;);
																	opt.container.trigger(&#x27;revolution.slide.onvideoplay&#x27;);
																}


																if (nextcaption.data(&#x27;forcerewind&#x27;)==&quot;on&quot; &amp;&amp; !html5vid.hasClass(&quot;videoisplaying&quot;))
																	if (video.currentTime&gt;0) video.currentTime=0;

																if (nextcaption.data(&#x27;volume&#x27;)==&quot;mute&quot;)
																	video.muted = true;

																html5vid.data(&#x27;timerplay&#x27;,setTimeout(function() {

																	if (nextcaption.data(&#x27;forcerewind&#x27;)==&quot;on&quot; &amp;&amp; !html5vid.hasClass(&quot;videoisplaying&quot;))
																		if (video.currentTime&gt;0) video.currentTime=0;

																	if (nextcaption.data(&#x27;volume&#x27;)==&quot;mute&quot;)
																			video.muted = true;


																		video.play();
																},10+nextcaption.data(&#x27;start&#x27;)));
															}

															if (html5vid.data(&#x27;ww&#x27;) == undefined) html5vid.data(&#x27;ww&#x27;,jvideo.attr(&#x27;width&#x27;));
															if (html5vid.data(&#x27;hh&#x27;) == undefined) html5vid.data(&#x27;hh&#x27;,jvideo.attr(&#x27;height&#x27;));

															if (!nextcaption.hasClass(&quot;fullscreenvideo&quot;) &amp;&amp; nextcaption.data(&#x27;forcecover&#x27;)==1) {
																try{
																	html5vid.width(html5vid.data(&#x27;ww&#x27;)*opt.bw);
																	html5vid.height(html5vid.data(&#x27;hh&#x27;)*opt.bh);
																} catch(e) {}
															}

															clearInterval(html5vid.data(&#x27;interval&#x27;));
													}
												}),100); // END OF SET INTERVAL

											});
										} // END OF HTML5 VIDEO FUNCTIONS

										// IF AUTOPLAY IS ON, WE NEED SOME STOP FUNCTION ON
										if (nextcaption.data(&#x27;autoplay&#x27;)==true) {
											setTimeout(function() {

												if (nextcaption.data(&#x27;videoloop&#x27;)!=&quot;loopandnoslidestop&quot;) {
													opt.videoplaying=true;
													opt.container.trigger(&#x27;stoptimer&#x27;);
												}
											},200)
											if (nextcaption.data(&#x27;videoloop&#x27;)!=&quot;loopandnoslidestop&quot;) {
												opt.videoplaying=true;
												opt.container.trigger(&#x27;stoptimer&#x27;);
											}

											if (nextcaption.data(&#x27;autoplayonlyfirsttime&#x27;) == true || nextcaption.data(&#x27;autoplayonlyfirsttime&#x27;)==&quot;true&quot; ) {
												nextcaption.data(&#x27;autoplay&#x27;,false);
												nextcaption.data(&#x27;autoplayonlyfirsttime&#x27;,false);
											}
										}
									}




									// NEW ENGINE
									//if (nextcaption.hasClass(&quot;randomrotate&quot;) &amp;&amp; (opt.ie || opt.ie9)) nextcaption.removeClass(&quot;randomrotate&quot;).addClass(&quot;sfb&quot;);
									//	nextcaption.removeClass(&#x27;noFilterClass&#x27;);



								    var imw =0;
								    var imh = 0;

									if (nextcaption.find(&#x27;img&#x27;).length&gt;0) {
														var im = nextcaption.find(&#x27;img&#x27;);
														if (im.width()==0) im.css({width:&quot;auto&quot;});
														if (im.height()==0) im.css({height:&quot;auto&quot;});

														if (im.data(&#x27;ww&#x27;) == undefined &amp;&amp; im.width()&gt;0) im.data(&#x27;ww&#x27;,im.width());
														if (im.data(&#x27;hh&#x27;) == undefined &amp;&amp; im.height()&gt;0) im.data(&#x27;hh&#x27;,im.height());

														var ww = im.data(&#x27;ww&#x27;);
														var hh = im.data(&#x27;hh&#x27;);

														if (ww==undefined) ww=0;
														if (hh==undefined) hh=0;

														im.width(ww*opt.bw);
														im.height(hh*opt.bh);
														imw = im.width();
														imh = im.height();
									} else {

									if (nextcaption.find(&#x27;iframe&#x27;).length&gt;0 || nextcaption.find(&#x27;video&#x27;).length&gt;0) {

															var html5vid = false,
																im = nextcaption.find(&#x27;iframe&#x27;);
															if (im.length==0) {
																	im = nextcaption.find(&#x27;video&#x27;);
																	html5vid = true;
															}
															im.css({display:&quot;block&quot;});

															if (nextcaption.data(&#x27;ww&#x27;) == undefined) nextcaption.data(&#x27;ww&#x27;,im.width());
															if (nextcaption.data(&#x27;hh&#x27;) == undefined) nextcaption.data(&#x27;hh&#x27;,im.height());

															var ww = nextcaption.data(&#x27;ww&#x27;),
																hh = nextcaption.data(&#x27;hh&#x27;);

															var nc =nextcaption;
																if (nc.data(&#x27;fsize&#x27;) == undefined) nc.data(&#x27;fsize&#x27;,parseInt(nc.css(&#x27;font-size&#x27;),0) || 0);
																if (nc.data(&#x27;pt&#x27;) == undefined) nc.data(&#x27;pt&#x27;,parseInt(nc.css(&#x27;paddingTop&#x27;),0) || 0);
																if (nc.data(&#x27;pb&#x27;) == undefined) nc.data(&#x27;pb&#x27;,parseInt(nc.css(&#x27;paddingBottom&#x27;),0) || 0);
																if (nc.data(&#x27;pl&#x27;) == undefined) nc.data(&#x27;pl&#x27;,parseInt(nc.css(&#x27;paddingLeft&#x27;),0) || 0);
																if (nc.data(&#x27;pr&#x27;) == undefined) nc.data(&#x27;pr&#x27;,parseInt(nc.css(&#x27;paddingRight&#x27;),0) || 0);

																if (nc.data(&#x27;mt&#x27;) == undefined) nc.data(&#x27;mt&#x27;,parseInt(nc.css(&#x27;marginTop&#x27;),0) || 0);
																if (nc.data(&#x27;mb&#x27;) == undefined) nc.data(&#x27;mb&#x27;,parseInt(nc.css(&#x27;marginBottom&#x27;),0) || 0);
																if (nc.data(&#x27;ml&#x27;) == undefined) nc.data(&#x27;ml&#x27;,parseInt(nc.css(&#x27;marginLeft&#x27;),0) || 0);
																if (nc.data(&#x27;mr&#x27;) == undefined) nc.data(&#x27;mr&#x27;,parseInt(nc.css(&#x27;marginRight&#x27;),0) || 0);

																if (nc.data(&#x27;bt&#x27;) == undefined) nc.data(&#x27;bt&#x27;,parseInt(nc.css(&#x27;borderTop&#x27;),0) || 0);
																if (nc.data(&#x27;bb&#x27;) == undefined) nc.data(&#x27;bb&#x27;,parseInt(nc.css(&#x27;borderBottom&#x27;),0) || 0);
																if (nc.data(&#x27;bl&#x27;) == undefined) nc.data(&#x27;bl&#x27;,parseInt(nc.css(&#x27;borderLeft&#x27;),0) || 0);
																if (nc.data(&#x27;br&#x27;) == undefined) nc.data(&#x27;br&#x27;,parseInt(nc.css(&#x27;borderRight&#x27;),0) || 0);

																if (nc.data(&#x27;lh&#x27;) == undefined) nc.data(&#x27;lh&#x27;,parseInt(nc.css(&#x27;lineHeight&#x27;),0) || 0);

																// IE8 FIX FOR AUTO LINEHEIGHT
																if (nc.data(&#x27;lh&#x27;)==&quot;auto&quot;) nc.data(&#x27;lh&#x27;,nc.data(&#x27;fsize&#x27;)+4);

																var fvwidth=opt.width,
																	fvheight=opt.height;
																if (fvwidth&gt;opt.startwidth) fvwidth=opt.startwidth;
																if (fvheight&gt;opt.startheight) fvheight=opt.startheight;

																if (!nextcaption.hasClass(&#x27;fullscreenvideo&#x27;))
																			nextcaption.css({

																				 &#x27;font-size&#x27;: (nc.data(&#x27;fsize&#x27;) * opt.bw)+&quot;px&quot;,

																				 &#x27;padding-top&#x27;: (nc.data(&#x27;pt&#x27;) * opt.bh) + &quot;px&quot;,
																				 &#x27;padding-bottom&#x27;: (nc.data(&#x27;pb&#x27;) * opt.bh) + &quot;px&quot;,
																				 &#x27;padding-left&#x27;: (nc.data(&#x27;pl&#x27;) * opt.bw) + &quot;px&quot;,
																				 &#x27;padding-right&#x27;: (nc.data(&#x27;pr&#x27;) * opt.bw) + &quot;px&quot;,

																				 &#x27;margin-top&#x27;: (nc.data(&#x27;mt&#x27;) * opt.bh) + &quot;px&quot;,
																				 &#x27;margin-bottom&#x27;: (nc.data(&#x27;mb&#x27;) * opt.bh) + &quot;px&quot;,
																				 &#x27;margin-left&#x27;: (nc.data(&#x27;ml&#x27;) * opt.bw) + &quot;px&quot;,
																				 &#x27;margin-right&#x27;: (nc.data(&#x27;mr&#x27;) * opt.bw) + &quot;px&quot;,

																				 &#x27;border-top&#x27;: (nc.data(&#x27;bt&#x27;) * opt.bh) + &quot;px&quot;,
																				 &#x27;border-bottom&#x27;: (nc.data(&#x27;bb&#x27;) * opt.bh) + &quot;px&quot;,
																				 &#x27;border-left&#x27;: (nc.data(&#x27;bl&#x27;) * opt.bw) + &quot;px&quot;,
																				 &#x27;border-right&#x27;: (nc.data(&#x27;br&#x27;) * opt.bw) + &quot;px&quot;,

																				 &#x27;line-height&#x27;: (nc.data(&#x27;lh&#x27;) * opt.bh) + &quot;px&quot;,
																				 &#x27;height&#x27;:(hh*opt.bh)+&#x27;px&#x27;
																				});
																	else  {

																		   offsetx=0; offsety=0;
																		   nextcaption.data(&#x27;x&#x27;,0)
																		   nextcaption.data(&#x27;y&#x27;,0)

																		   var ovhh = opt.height
																		   if (opt.autoHeight==&quot;on&quot;)
																		   		ovhh = opt.container.height()
																			nextcaption.css({

																				&#x27;width&#x27;:opt.width,
																				&#x27;height&#x27;:ovhh
																			});
																		}

															if (html5vid == false) {
																im.width(ww*opt.bw);
																im.height(hh*opt.bh);
															}

															else

															if (nextcaption.data(&#x27;forcecover&#x27;)!=1 &amp;&amp; !nextcaption.hasClass(&#x27;fullscreenvideo&#x27;)) {
																im.width(ww*opt.bw);
																im.height(hh*opt.bh);
															}


															imw = im.width();
															imh = im.height();
														}

											else {


												nextcaption.find(&#x27;.tp-resizeme, .tp-resizeme *&#x27;).each(function() {
														calcCaptionResponsive(jQuery(this),opt);
												});

												if (nextcaption.hasClass(&quot;tp-resizeme&quot;)) {
													nextcaption.find(&#x27;*&#x27;).each(function() {
														calcCaptionResponsive(jQuery(this),opt);
													});
												}

												calcCaptionResponsive(nextcaption,opt);

												imh=nextcaption.outerHeight(true);
												imw=nextcaption.outerWidth(true);

												// NEXTCAPTION FRONTCORNER CHANGES
												var ncch = nextcaption.outerHeight();
												var bgcol = nextcaption.css(&#x27;backgroundColor&#x27;);
												nextcaption.find(&#x27;.frontcorner&#x27;).css({
																&#x27;borderWidth&#x27;:ncch+&quot;px&quot;,
																&#x27;left&#x27;:(0-ncch)+&#x27;px&#x27;,
																&#x27;borderRight&#x27;:&#x27;0px solid transparent&#x27;,
																&#x27;borderTopColor&#x27;:bgcol
												});

												nextcaption.find(&#x27;.frontcornertop&#x27;).css({
																&#x27;borderWidth&#x27;:ncch+&quot;px&quot;,
																&#x27;left&#x27;:(0-ncch)+&#x27;px&#x27;,
																&#x27;borderRight&#x27;:&#x27;0px solid transparent&#x27;,
																&#x27;borderBottomColor&#x27;:bgcol
												});

												// NEXTCAPTION BACKCORNER CHANGES
												nextcaption.find(&#x27;.backcorner&#x27;).css({
																&#x27;borderWidth&#x27;:ncch+&quot;px&quot;,
																&#x27;right&#x27;:(0-ncch)+&#x27;px&#x27;,
																&#x27;borderLeft&#x27;:&#x27;0px solid transparent&#x27;,
																&#x27;borderBottomColor&#x27;:bgcol
												});

												// NEXTCAPTION BACKCORNER CHANGES
												nextcaption.find(&#x27;.backcornertop&#x27;).css({
																&#x27;borderWidth&#x27;:ncch+&quot;px&quot;,
																&#x27;right&#x27;:(0-ncch)+&#x27;px&#x27;,
																&#x27;borderLeft&#x27;:&#x27;0px solid transparent&#x27;,
																&#x27;borderTopColor&#x27;:bgcol
												});

											 }


									}

									if (opt.fullScreenAlignForce == &quot;on&quot;) {
										//xbw = 1;
										//xbh = 1;
										offsetx=0;
										offsety=0;
									}



									if (nextcaption.data(&#x27;voffset&#x27;)==undefined) nextcaption.data(&#x27;voffset&#x27;,0);
									if (nextcaption.data(&#x27;hoffset&#x27;)==undefined) nextcaption.data(&#x27;hoffset&#x27;,0);

									var vofs= nextcaption.data(&#x27;voffset&#x27;)*xbw;
									var hofs= nextcaption.data(&#x27;hoffset&#x27;)*xbw;

									var crw = opt.startwidth*xbw;
									var crh = opt.startheight*xbw;

									if (opt.fullScreenAlignForce == &quot;on&quot;) {
										crw = opt.container.width();
										crh = opt.container.height();
									}



									// CENTER THE CAPTION HORIZONTALLY
									if (nextcaption.data(&#x27;x&#x27;)==&quot;center&quot; || nextcaption.data(&#x27;xcenter&#x27;)==&#x27;center&#x27;) {
										nextcaption.data(&#x27;xcenter&#x27;,&#x27;center&#x27;);
										//nextcaption.data(&#x27;x&#x27;,(crw/2 - nextcaption.outerWidth(true)/2)/xbw+  hofs);
										nextcaption.data(&#x27;x&#x27;,(crw/2 - nextcaption.outerWidth(true)/2) +  hofs);


									}

									// ALIGN LEFT THE CAPTION HORIZONTALLY
									if (nextcaption.data(&#x27;x&#x27;)==&quot;left&quot; || nextcaption.data(&#x27;xleft&#x27;)==&#x27;left&#x27;) {
										nextcaption.data(&#x27;xleft&#x27;,&#x27;left&#x27;);

										nextcaption.data(&#x27;x&#x27;,(0)/xbw+hofs);

									}

									// ALIGN RIGHT THE CAPTION HORIZONTALLY
									if (nextcaption.data(&#x27;x&#x27;)==&quot;right&quot; || nextcaption.data(&#x27;xright&#x27;)==&#x27;right&#x27;) {
										nextcaption.data(&#x27;xright&#x27;,&#x27;right&#x27;);
										nextcaption.data(&#x27;x&#x27;,((crw - nextcaption.outerWidth(true))+hofs)/xbw);
										//konsole.log(&quot;crw:&quot;+crw+&quot;  width:&quot;+nextcaption.outerWidth(true)+&quot;  xbw:&quot;+xbw);
										//konsole.log(&quot;x-pos:&quot;+nextcaption.data(&#x27;x&#x27;))
									}


									// CENTER THE CAPTION VERTICALLY
									if (nextcaption.data(&#x27;y&#x27;)==&quot;center&quot; || nextcaption.data(&#x27;ycenter&#x27;)==&#x27;center&#x27;) {
										nextcaption.data(&#x27;ycenter&#x27;,&#x27;center&#x27;);
										nextcaption.data(&#x27;y&#x27;,(crh/2 - nextcaption.outerHeight(true)/2) + vofs);
									}

									// ALIGN TOP THE CAPTION VERTICALLY
									if (nextcaption.data(&#x27;y&#x27;)==&quot;top&quot; || nextcaption.data(&#x27;ytop&#x27;)==&#x27;top&#x27;) {
										nextcaption.data(&#x27;ytop&#x27;,&#x27;top&#x27;);
										nextcaption.data(&#x27;y&#x27;,(0)/opt.bh+vofs);

									}

									// ALIGN BOTTOM THE CAPTION VERTICALLY
									if (nextcaption.data(&#x27;y&#x27;)==&quot;bottom&quot; || nextcaption.data(&#x27;ybottom&#x27;)==&#x27;bottom&#x27;) {
										nextcaption.data(&#x27;ybottom&#x27;,&#x27;bottom&#x27;);
										nextcaption.data(&#x27;y&#x27;,((crh - nextcaption.outerHeight(true))+vofs)/xbw);

									}



									// THE TRANSITIONS OF CAPTIONS
									// MDELAY AND MSPEED
									if (nextcaption.data(&#x27;start&#x27;) == undefined) nextcaption.data(&#x27;start&#x27;,1000);



									var easedata=nextcaption.data(&#x27;easing&#x27;);
									if (easedata==undefined) easedata=&quot;punchgs.Power1.easeOut&quot;;


									var mdelay = nextcaption.data(&#x27;start&#x27;)/1000,
										mspeed = nextcaption.data(&#x27;speed&#x27;)/1000;


									if (nextcaption.data(&#x27;x&#x27;)==&quot;center&quot; || nextcaption.data(&#x27;xcenter&#x27;)==&#x27;center&#x27;)
										var calcx = (nextcaption.data(&#x27;x&#x27;)+offsetx);
									else {

										var calcx = (xbw*nextcaption.data(&#x27;x&#x27;)+offsetx);
									}


									if (nextcaption.data(&#x27;y&#x27;)==&quot;center&quot; || nextcaption.data(&#x27;ycenter&#x27;)==&#x27;center&#x27;)
										var calcy = (nextcaption.data(&#x27;y&#x27;)+offsety);
									else {
										//if (opt.fullScreenAlignForce == &quot;on&quot; &amp;&amp; (nextcaption.data(&#x27;y&#x27;)==&quot;bottom&quot; || nextcaption.data(&#x27;ybottom&#x27;)==&#x27;bottom&#x27;))
										//	opt.bh = 1;

										var calcy = (opt.bh*nextcaption.data(&#x27;y&#x27;)+offsety);
									}


							punchgs.TweenLite.set(nextcaption,{top:calcy,left:calcx,overwrite:&quot;auto&quot;});

							if (staticdirection == 0)
								internrecalled = true;

							if (nextcaption.data(&#x27;timeline&#x27;)!=undefined &amp;&amp; !internrecalled) {
								if (staticdirection!=2)
									nextcaption.data(&#x27;timeline&#x27;).gotoAndPlay(0);
								internrecalled = true;
							}

							if (!internrecalled) {



									// CLEAR THE TIMELINE, SINCE IT CAN BE DAMAGED, OR PAUSED AT A FEW PART
									if (nextcaption.data(&#x27;timeline&#x27;)!=undefined) {
										//nextcaption.data(&#x27;timeline&#x27;).clear();
									 }

									var tl = new punchgs.TimelineLite({smoothChildTiming:true,onStart:tlstart});
									tl.pause();


									if (opt.fullScreenAlignForce == &quot;on&quot;) {
										//calcy = nextcaption.data(&#x27;y&#x27;)+offsety;
									}

									var animobject = nextcaption;
									if (nextcaption.data(&#x27;mySplitText&#x27;) !=undefined) nextcaption.data(&#x27;mySplitText&#x27;).revert();


									if (nextcaption.data(&#x27;splitin&#x27;) == &quot;chars&quot; || nextcaption.data(&#x27;splitin&#x27;) == &quot;words&quot; || nextcaption.data(&#x27;splitin&#x27;) == &quot;lines&quot; || nextcaption.data(&#x27;splitout&#x27;) == &quot;chars&quot; || nextcaption.data(&#x27;splitout&#x27;) == &quot;words&quot; || nextcaption.data(&#x27;splitout&#x27;) == &quot;lines&quot;) {
										if (nextcaption.find(&#x27;a&#x27;).length&gt;0)
											nextcaption.data(&#x27;mySplitText&#x27;,new punchgs.SplitText(nextcaption.find(&#x27;a&#x27;),{type:&quot;lines,words,chars&quot;,charsClass:&quot;tp-splitted&quot;,wordsClass:&quot;tp-splitted&quot;,linesClass:&quot;tp-splitted&quot;}));
										else
										if (nextcaption.find(&#x27;.tp-layer-inner-rotation&#x27;).length&gt;0)
											nextcaption.data(&#x27;mySplitText&#x27;,new punchgs.SplitText(nextcaption.find(&#x27;.tp-layer-inner-rotation&#x27;),{type:&quot;lines,words,chars&quot;,charsClass:&quot;tp-splitted&quot;,wordsClass:&quot;tp-splitted&quot;,linesClass:&quot;tp-splitted&quot;}));
										else
											nextcaption.data(&#x27;mySplitText&#x27;,new punchgs.SplitText(nextcaption,{type:&quot;lines,words,chars&quot;,charsClass:&quot;tp-splitted&quot;,wordsClass:&quot;tp-splitted&quot;,linesClass:&quot;tp-splitted&quot;}));

										nextcaption.addClass(&quot;splitted&quot;);
									}

									if (nextcaption.data(&#x27;splitin&#x27;) == &quot;chars&quot;)
										animobject = nextcaption.data(&#x27;mySplitText&#x27;).chars;


									if (nextcaption.data(&#x27;splitin&#x27;) == &quot;words&quot;)
										animobject = nextcaption.data(&#x27;mySplitText&#x27;).words;


									if (nextcaption.data(&#x27;splitin&#x27;) == &quot;lines&quot;)
										animobject = nextcaption.data(&#x27;mySplitText&#x27;).lines;



									var frm = newAnimObject();
									var endfrm = newAnimObject();


									if (nextcaption.data(&#x27;repeat&#x27;)!=undefined) repeatV = nextcaption.data(&#x27;repeat&#x27;);
									if (nextcaption.data(&#x27;yoyo&#x27;)!=undefined) yoyoV = nextcaption.data(&#x27;yoyo&#x27;);
									if (nextcaption.data(&#x27;repeatdelay&#x27;)!=undefined) repeatdelayV = nextcaption.data(&#x27;repeatdelay&#x27;);

									var ncc = nextcaption.attr(&#x27;class&#x27;);

									// WHICH ANIMATION TYPE SHOULD BE USED
									if (ncc.match(&quot;customin&quot;)) frm = getAnimDatas(frm,nextcaption.data(&#x27;customin&#x27;));
									else
									if (ncc.match(&quot;randomrotate&quot;)) {

												frm.scale = Math.random()*3+1;
												frm.rotation = Math.round(Math.random()*200-100);
												frm.x = Math.round(Math.random()*200-100);
												frm.y = Math.round(Math.random()*200-100);
									}
									else
									if (ncc.match(&#x27;lfr&#x27;) || ncc.match(&#x27;skewfromright&#x27;)) frm.x = 15+opt.width;
									else
									if (ncc.match(&#x27;lfl&#x27;) || ncc.match(&#x27;skewfromleft&#x27;)) frm.x = -15-imw;
									else
									if (ncc.match(&#x27;sfl&#x27;) || ncc.match(&#x27;skewfromleftshort&#x27;)) frm.x = -50;
									else
									if (ncc.match(&#x27;sfr&#x27;) || ncc.match(&#x27;skewfromrightshort&#x27;)) frm.x = 50;
									else
									if (ncc.match(&#x27;lft&#x27;)) frm.y = -25 - imh;
									else
									if (ncc.match(&#x27;lfb&#x27;)) frm.y = 25 + opt.height;
									else
									if (ncc.match(&#x27;sft&#x27;)) frm.y = -50;
									else
									if (ncc.match(&#x27;sfb&#x27;)) frm.y = 50;


									if (ncc.match(&#x27;skewfromright&#x27;) || nextcaption.hasClass(&#x27;skewfromrightshort&#x27;)) frm.skewX = -85
									else
									if (ncc.match(&#x27;skewfromleft&#x27;) || nextcaption.hasClass(&#x27;skewfromleftshort&#x27;)) frm.skewX =  85


									if (ncc.match(&quot;fade&quot;) || ncc.match(&#x27;sft&#x27;) || ncc.match(&#x27;sfl&#x27;) || ncc.match(&#x27;sfb&#x27;) || ncc.match(&#x27;skewfromleftshort&#x27;)  || ncc.match(&#x27;sfr&#x27;) || ncc.match(&#x27;skewfromrightshort&#x27;))
										frm.opacity = 0;

									// FOR SAFARI WE NEED TO REMOVE 3D ROTATIONS
									if (get_browser().toLowerCase()==&quot;safari&quot;) {
										//frm.rotationX=0;frm.rotationY=0;
									}

									var elemdelay = (nextcaption.data(&#x27;elementdelay&#x27;) == undefined) ? 0 : nextcaption.data(&#x27;elementdelay&#x27;);
									endfrm.ease = frm.ease = (nextcaption.data(&#x27;easing&#x27;) == undefined) ? punchgs.Power1.easeInOut : nextcaption.data(&#x27;easing&#x27;);


									// DISTANCES SHOULD BE RESIZED ALSO

									frm.data = new Object();
									frm.data.oldx = frm.x;
									frm.data.oldy = frm.y;

									endfrm.data = new Object();
									endfrm.data.oldx = endfrm.x;
									endfrm.data.oldy = endfrm.y;

									frm.x = frm.x * xbw;
									frm.y = frm.y * xbw;

									var newtl = new punchgs.TimelineLite();


									if (staticdirection != 2) {

										// CHANGE to punchgs.TweenLite.  if Yoyo and Repeat is used. Dont forget to laod the Right Tools for it !!
										if (ncc.match(&quot;customin&quot;)) {
											  if (animobject != nextcaption)
												  tl.add(punchgs.TweenLite.set(nextcaption, { force3D:&quot;auto&quot;,opacity:1,scaleX:1,scaleY:1,rotationX:0,rotationY:0,rotationZ:0,skewX:0,skewY:0,z:0,x:0,y:0,visibility:&#x27;visible&#x27;,delay:0,overwrite:&quot;all&quot;}));
											  frm.visibility = &quot;hidden&quot;;
											  endfrm.visibility = &quot;visible&quot;;
											  endfrm.overwrite = &quot;all&quot;;
											  endfrm.opacity = 1;
											  endfrm.onComplete = animcompleted();
											  endfrm.delay = mdelay;
											  endfrm.force3D=&quot;auto&quot;

											  tl.add(newtl.staggerFromTo(animobject,mspeed,frm,endfrm,elemdelay),&quot;frame0&quot;);

										} else {

												frm.visibility = &quot;visible&quot;;
												frm.transformPerspective = 600;
												if (animobject != nextcaption)
												  tl.add(punchgs.TweenLite.set(nextcaption, { force3D:&quot;auto&quot;,opacity:1,scaleX:1,scaleY:1,rotationX:0,rotationY:0,rotationZ:0,skewX:0,skewY:0,z:0,x:0,y:0,visibility:&#x27;visible&#x27;,delay:0,overwrite:&quot;all&quot;}));

												endfrm.visibility = &quot;visible&quot;;
												endfrm.delay = mdelay;
												endfrm.onComplete = animcompleted();
												endfrm.opacity = 1;
												endfrm.force3D=&quot;auto&quot;;
												if (ncc.match(&quot;randomrotate&quot;) &amp;&amp; animobject != nextcaption) {

													for (var i=0;i&lt;animobject.length;i++) {
														var obj =new Object();
														var endobj = new Object();
														jQuery.extend(obj,frm);
														jQuery.extend(endobj,endfrm);
														frm.scale = Math.random()*3+1;
														frm.rotation = Math.round(Math.random()*200-100);
														frm.x = Math.round(Math.random()*200-100);
														frm.y = Math.round(Math.random()*200-100);

														if (i!=0) endobj.delay = mdelay + (i*elemdelay);


														tl.append(punchgs.TweenLite.fromTo(animobject[i],mspeed,obj,endobj),&quot;frame0&quot;);
													}



												}	else
												tl.add(newtl.staggerFromTo(animobject,mspeed,frm,endfrm,elemdelay),&quot;frame0&quot;);
												//tl.add(punchgs.TweenLite.fromTo(nextcaption,mspeed,frm,endfrm),&quot;frame0&quot;);
										}
									}

									// SAVE IT TO NCAPTION BEFORE NEW STEPS WILL BE ADDED
									nextcaption.data(&#x27;timeline&#x27;,tl);

									// FURTHER ANIMATIONS IN CASE THERE ARE MORE THAN ONE STEP IN THE ANIMATION CHAIN
									var frames = new Array();
									if (nextcaption.data(&#x27;frames&#x27;)!=undefined) {
										var rowtext = nextcaption.data(&#x27;frames&#x27;);
										rowtext = rowtext.replace(/\s+/g, &#x27;&#x27;);
										rowtext = rowtext.replace(&quot;{&quot;,&quot;&quot;);
										var spframes = rowtext.split(&#x27;}&#x27;);
										jQuery.each(spframes,function(index,spframe){
											if (spframe.length&gt;0) {
												var params = getAnimSteps(spframe);

												addMoveCaption(nextcaption,opt,params,&quot;frame&quot;+(index+10),xbw)

											}
										})
									} // END OF ANIMATION STEPS

									tl = nextcaption.data(&#x27;timeline&#x27;);
									// IF THERE IS ANY EXIT ANIM DEFINED
									// For Static Layers -&gt; 1 -&gt; In,  2-&gt; Out  0-&gt; Ignore  -1-&gt; Not Static
									if ((nextcaption.data(&#x27;end&#x27;)!=undefined) &amp;&amp; (staticdirection==-1 || staticdirection==2)) {
										endMoveCaption(nextcaption,opt,nextcaption.data(&#x27;end&#x27;)/1000,frm,&quot;frame99&quot;,xbw);
									} else {
										if (staticdirection==-1 || staticdirection==2)
											endMoveCaption(nextcaption,opt,999999,frm,&quot;frame99&quot;,xbw);
										else
											endMoveCaption(nextcaption,opt,200,frm,&quot;frame99&quot;,xbw);
									}

									// SAVE THE TIMELINE IN DOM ELEMENT
									tl = nextcaption.data(&#x27;timeline&#x27;);
									nextcaption.data(&#x27;timeline&#x27;,tl);
									callCaptionLoops(nextcaption,xbw);
									tl.resume();
							 }
						  }

						  if (internrecalled) {
						  			killCaptionLoops(nextcaption);
						  			callCaptionLoops(nextcaption,xbw);

							  		if (nextcaption.data(&#x27;timeline&#x27;) != undefined) {
								  		var tweens = nextcaption.data(&#x27;timeline&#x27;).getTweensOf();
								  		jQuery.each(tweens,function(index,tween) {
									  		if (tween.vars.data != undefined) {
									  			var newx =  tween.vars.data.oldx * xbw;
									  			var newy =  tween.vars.data.oldy * xbw;
									  			if (tween.progress() !=1 &amp;&amp; tween.progress()!=0) {
									  				try{
											  			//tween.updateTo({x:newx, y:newy},true);
											  			tween.vars.x = newx;
											  			tween.vary.y = newy;
											  		  } catch(e) {

											  		  }
										  		} else {
										  			if (tween.progress()==1) {
											  				punchgs.TweenLite.set(tween.target,{x:newx,y:newy});
											  		}
											  	}
									  		}
								  		})
								  	}
						  }

					})

						var bt=jQuery(&#x27;body&#x27;).find(&#x27;#&#x27;+opt.container.attr(&#x27;id&#x27;)).find(&#x27;.tp-bannertimer&#x27;);
						bt.data(&#x27;opt&#x27;,opt);



					if (mtl != undefined) setTimeout(function() {
						mtl.resume();
					},30);

				}


				var get_browser = function(){
				    var N=navigator.appName, ua=navigator.userAgent, tem;
				    var M=ua.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);
				    if(M &amp;&amp; (tem= ua.match(/version\/([\.\d]+)/i))!= null) M[2]= tem[1];
				    M=M? [M[1], M[2]]: [N, navigator.appVersion, &#x27;-?&#x27;];
				    return M[0];
				    }
				var get_browser_version  = function(){
				    var N=navigator.appName, ua=navigator.userAgent, tem;
				    var M=ua.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);
				    if(M &amp;&amp; (tem= ua.match(/version\/([\.\d]+)/i))!= null) M[2]= tem[1];
				    M=M? [M[1], M[2]]: [N, navigator.appVersion, &#x27;-?&#x27;];
				    return M[1];
				    }

				/////////////////////////////////////////////////////////////////
				//	-	CALCULATE THE RESPONSIVE SIZES OF THE CAPTIONS	-	  //
				/////////////////////////////////////////////////////////////////
				var calcCaptionResponsive = function(nc,opt) {
								if (nc.data(&#x27;fsize&#x27;) == undefined) nc.data(&#x27;fsize&#x27;,parseInt(nc.css(&#x27;font-size&#x27;),0) || 0);
								if (nc.data(&#x27;pt&#x27;) == undefined) nc.data(&#x27;pt&#x27;,parseInt(nc.css(&#x27;paddingTop&#x27;),0) || 0);
								if (nc.data(&#x27;pb&#x27;) == undefined) nc.data(&#x27;pb&#x27;,parseInt(nc.css(&#x27;paddingBottom&#x27;),0) || 0);
								if (nc.data(&#x27;pl&#x27;) == undefined) nc.data(&#x27;pl&#x27;,parseInt(nc.css(&#x27;paddingLeft&#x27;),0) || 0);
								if (nc.data(&#x27;pr&#x27;) == undefined) nc.data(&#x27;pr&#x27;,parseInt(nc.css(&#x27;paddingRight&#x27;),0) || 0);

								if (nc.data(&#x27;mt&#x27;) == undefined) nc.data(&#x27;mt&#x27;,parseInt(nc.css(&#x27;marginTop&#x27;),0) || 0);
								if (nc.data(&#x27;mb&#x27;) == undefined) nc.data(&#x27;mb&#x27;,parseInt(nc.css(&#x27;marginBottom&#x27;),0) || 0);
								if (nc.data(&#x27;ml&#x27;) == undefined) nc.data(&#x27;ml&#x27;,parseInt(nc.css(&#x27;marginLeft&#x27;),0) || 0);
								if (nc.data(&#x27;mr&#x27;) == undefined) nc.data(&#x27;mr&#x27;,parseInt(nc.css(&#x27;marginRight&#x27;),0) || 0);

								if (nc.data(&#x27;bt&#x27;) == undefined) nc.data(&#x27;bt&#x27;,parseInt(nc.css(&#x27;borderTopWidth&#x27;),0) || 0);
								if (nc.data(&#x27;bb&#x27;) == undefined) nc.data(&#x27;bb&#x27;,parseInt(nc.css(&#x27;borderBottomWidth&#x27;),0) || 0);
								if (nc.data(&#x27;bl&#x27;) == undefined) nc.data(&#x27;bl&#x27;,parseInt(nc.css(&#x27;borderLeftWidth&#x27;),0) || 0);
								if (nc.data(&#x27;br&#x27;) == undefined) nc.data(&#x27;br&#x27;,parseInt(nc.css(&#x27;borderRightWidth&#x27;),0) || 0);

								if (nc.data(&#x27;ls&#x27;) == undefined) nc.data(&#x27;ls&#x27;,parseInt(nc.css(&#x27;letterSpacing&#x27;),0) || 0);

								if (nc.data(&#x27;lh&#x27;) == undefined) nc.data(&#x27;lh&#x27;,parseInt(nc.css(&#x27;lineHeight&#x27;),0) || &quot;auto&quot;);
								if (nc.data(&#x27;minwidth&#x27;) == undefined) nc.data(&#x27;minwidth&#x27;,parseInt(nc.css(&#x27;minWidth&#x27;),0) || 0);
								if (nc.data(&#x27;minheight&#x27;) == undefined) nc.data(&#x27;minheight&#x27;,parseInt(nc.css(&#x27;minHeight&#x27;),0) || 0);
								if (nc.data(&#x27;maxwidth&#x27;) == undefined) nc.data(&#x27;maxwidth&#x27;,parseInt(nc.css(&#x27;maxWidth&#x27;),0) || &quot;none&quot;);
								if (nc.data(&#x27;maxheight&#x27;) == undefined) nc.data(&#x27;maxheight&#x27;,parseInt(nc.css(&#x27;maxHeight&#x27;),0) || &quot;none&quot;);
								if (nc.data(&#x27;wii&#x27;) == undefined) nc.data(&#x27;wii&#x27;,parseInt(nc.css(&#x27;width&#x27;),0) || 0);
								if (nc.data(&#x27;hii&#x27;) == undefined) nc.data(&#x27;hii&#x27;,parseInt(nc.css(&#x27;height&#x27;),0) || 0);

								if (nc.data(&#x27;wan&#x27;) == undefined) nc.data(&#x27;wan&#x27;,nc.css(&quot;-webkit-transition&quot;));
								if (nc.data(&#x27;moan&#x27;) == undefined) nc.data(&#x27;moan&#x27;,nc.css(&quot;-moz-animation-transition&quot;));
								if (nc.data(&#x27;man&#x27;) == undefined) nc.data(&#x27;man&#x27;,nc.css(&quot;-ms-animation-transition&quot;));
								if (nc.data(&#x27;ani&#x27;) == undefined) nc.data(&#x27;ani&#x27;,nc.css(&quot;transition&quot;));

								// IE8 FIX FOR AUTO LINEHEIGHT
								if (nc.data(&#x27;lh&#x27;)==&quot;auto&quot;) nc.data(&#x27;lh&#x27;,nc.data(&#x27;fsize&#x27;)+4);




								if (!nc.hasClass(&quot;tp-splitted&quot;)) {


										nc.css(&quot;-webkit-transition&quot;, &quot;none&quot;);
									    nc.css(&quot;-moz-transition&quot;, &quot;none&quot;);
									    nc.css(&quot;-ms-transition&quot;, &quot;none&quot;);
									    nc.css(&quot;transition&quot;, &quot;none&quot;);

										punchgs.TweenLite.set(nc,{
														 fontSize: Math.round((nc.data(&#x27;fsize&#x27;) * opt.bw))+&quot;px&quot;,

														 letterSpacing:Math.floor((nc.data(&#x27;ls&#x27;) * opt.bw))+&quot;px&quot;,

														 paddingTop: Math.round((nc.data(&#x27;pt&#x27;) * opt.bh)) + &quot;px&quot;,
														 paddingBottom: Math.round((nc.data(&#x27;pb&#x27;) * opt.bh)) + &quot;px&quot;,
														 paddingLeft: Math.round((nc.data(&#x27;pl&#x27;) * opt.bw)) + &quot;px&quot;,
														 paddingRight: Math.round((nc.data(&#x27;pr&#x27;) * opt.bw)) + &quot;px&quot;,

														 marginTop: (nc.data(&#x27;mt&#x27;) * opt.bh) + &quot;px&quot;,
														 marginBottom: (nc.data(&#x27;mb&#x27;) * opt.bh) + &quot;px&quot;,
														 marginLeft: (nc.data(&#x27;ml&#x27;) * opt.bw) + &quot;px&quot;,
														 marginRight: (nc.data(&#x27;mr&#x27;) * opt.bw) + &quot;px&quot;,

														 borderTopWidth: Math.round((nc.data(&#x27;bt&#x27;) * opt.bh)) + &quot;px&quot;,
														 borderBottomWidth: Math.round((nc.data(&#x27;bb&#x27;) * opt.bh)) + &quot;px&quot;,
														 borderLeftWidth: Math.round((nc.data(&#x27;bl&#x27;) * opt.bw)) + &quot;px&quot;,
														 borderRightWidth: Math.round((nc.data(&#x27;br&#x27;) * opt.bw)) + &quot;px&quot;,

														 lineHeight: Math.round((nc.data(&#x27;lh&#x27;) * opt.bh)) + &quot;px&quot;,
														 minWidth:(nc.data(&#x27;minwidth&#x27;) * opt.bw) + &quot;px&quot;,
														 minHeight:(nc.data(&#x27;minheight&#x27;) * opt.bh) + &quot;px&quot;,

														/* width:(nc.data(&#x27;wii&#x27;) * opt.bw) + &quot;px&quot;,
														 height:(nc.data(&#x27;hii&#x27;) * opt.bh) + &quot;px&quot;,														 */

														 overwrite:&quot;auto&quot;
										});
										setTimeout(function() {
											nc.css(&quot;-webkit-transition&quot;, nc.data(&#x27;wan&#x27;));
										    nc.css(&quot;-moz-transition&quot;, nc.data(&#x27;moan&#x27;));
										    nc.css(&quot;-ms-transition&quot;, nc.data(&#x27;man&#x27;));
										    nc.css(&quot;transition&quot;, nc.data(&#x27;ani&#x27;));

										},30);

										//konsole.log(nc.data(&#x27;maxwidth&#x27;)+&quot;  &quot;+nc.data(&#x27;maxheight&#x27;));
										if (nc.data(&#x27;maxheight&#x27;)!=&#x27;none&#x27;)
											nc.css({&#x27;maxHeight&#x27;:(nc.data(&#x27;maxheight&#x27;) * opt.bh) + &quot;px&quot;});


										if (nc.data(&#x27;maxwidth&#x27;)!=&#x27;none&#x27;)
											nc.css({&#x27;maxWidth&#x27;:(nc.data(&#x27;maxwidth&#x27;) * opt.bw) + &quot;px&quot;});
								}
						}


				/******************************
					-	CAPTION LOOPS	-
				********************************/


				var callCaptionLoops = function(nextcaption,factor) {

									// SOME LOOPING ANIMATION ON INTERNAL ELEMENTS
									nextcaption.find(&#x27;.rs-pendulum&#x27;).each(function() {
										var el = jQuery(this);
										if (el.data(&#x27;timeline&#x27;)==undefined) {
											el.data(&#x27;timeline&#x27;,new punchgs.TimelineLite);
											var startdeg = el.data(&#x27;startdeg&#x27;)==undefined ? -20 : el.data(&#x27;startdeg&#x27;),
												enddeg = el.data(&#x27;enddeg&#x27;)==undefined ? 20 : el.data(&#x27;enddeg&#x27;),
												speed = el.data(&#x27;speed&#x27;)==undefined ? 2 : el.data(&#x27;speed&#x27;),
												origin = el.data(&#x27;origin&#x27;)==undefined ? &quot;50% 50%&quot; : el.data(&#x27;origin&#x27;),
												easing = el.data(&#x27;easing&#x27;)==undefined ? punchgs.Power2.easeInOut : el.data(&#x27;ease&#x27;);

											startdeg = startdeg * factor;
											enddeg = enddeg * factor;

											el.data(&#x27;timeline&#x27;).append(new punchgs.TweenLite.fromTo(el,speed,{force3D:&quot;auto&quot;,rotation:startdeg,transformOrigin:origin},{rotation:enddeg,ease:easing}));
											el.data(&#x27;timeline&#x27;).append(new punchgs.TweenLite.fromTo(el,speed,{force3D:&quot;auto&quot;,rotation:enddeg,transformOrigin:origin},{rotation:startdeg,ease:easing,onComplete:function() {
												el.data(&#x27;timeline&#x27;).restart();
											}}));
										}

									})

									// SOME LOOPING ANIMATION ON INTERNAL ELEMENTS
									nextcaption.find(&#x27;.rs-rotate&#x27;).each(function() {
										var el = jQuery(this);
										if (el.data(&#x27;timeline&#x27;)==undefined) {
											el.data(&#x27;timeline&#x27;,new punchgs.TimelineLite);
											var startdeg = el.data(&#x27;startdeg&#x27;)==undefined ? 0 : el.data(&#x27;startdeg&#x27;),
												enddeg = el.data(&#x27;enddeg&#x27;)==undefined ? 360 : el.data(&#x27;enddeg&#x27;);
												speed = el.data(&#x27;speed&#x27;)==undefined ? 2 : el.data(&#x27;speed&#x27;),
												origin = el.data(&#x27;origin&#x27;)==undefined ? &quot;50% 50%&quot; : el.data(&#x27;origin&#x27;),
												easing = el.data(&#x27;easing&#x27;)==undefined ? punchgs.Power2.easeInOut : el.data(&#x27;easing&#x27;);

											startdeg = startdeg * factor;
											enddeg = enddeg * factor;

											el.data(&#x27;timeline&#x27;).append(new punchgs.TweenLite.fromTo(el,speed,{force3D:&quot;auto&quot;,rotation:startdeg,transformOrigin:origin},{rotation:enddeg,ease:easing,onComplete:function() {
												el.data(&#x27;timeline&#x27;).restart();
											}}));
										}

									})

									// SOME LOOPING ANIMATION ON INTERNAL ELEMENTS
									nextcaption.find(&#x27;.rs-slideloop&#x27;).each(function() {
										var el = jQuery(this);
										if (el.data(&#x27;timeline&#x27;)==undefined) {
											el.data(&#x27;timeline&#x27;,new punchgs.TimelineLite);
											var xs = el.data(&#x27;xs&#x27;)==undefined ? 0 : el.data(&#x27;xs&#x27;),
												ys = el.data(&#x27;ys&#x27;)==undefined ? 0 : el.data(&#x27;ys&#x27;),
												xe = el.data(&#x27;xe&#x27;)==undefined ? 0 : el.data(&#x27;xe&#x27;),
												ye = el.data(&#x27;ye&#x27;)==undefined ? 0 : el.data(&#x27;ye&#x27;),
												speed = el.data(&#x27;speed&#x27;)==undefined ? 2 : el.data(&#x27;speed&#x27;),
												easing = el.data(&#x27;easing&#x27;)==undefined ? punchgs.Power2.easeInOut : el.data(&#x27;easing&#x27;);

												xs = xs * factor;
												ys = ys * factor;
												xe = xe * factor;
												ye = ye * factor;

											el.data(&#x27;timeline&#x27;).append(new punchgs.TweenLite.fromTo(el,speed,{force3D:&quot;auto&quot;,x:xs,y:ys},{x:xe,y:ye,ease:easing}));
											el.data(&#x27;timeline&#x27;).append(new punchgs.TweenLite.fromTo(el,speed,{force3D:&quot;auto&quot;,x:xe,y:ye},{x:xs,y:ys,onComplete:function() {
												el.data(&#x27;timeline&#x27;).restart();
											}}));
										}

									})

									// SOME LOOPING ANIMATION ON INTERNAL ELEMENTS
									nextcaption.find(&#x27;.rs-pulse&#x27;).each(function() {
										var el = jQuery(this);
										if (el.data(&#x27;timeline&#x27;)==undefined) {
											el.data(&#x27;timeline&#x27;,new punchgs.TimelineLite);
											var zoomstart = el.data(&#x27;zoomstart&#x27;)==undefined ? 0 : el.data(&#x27;zoomstart&#x27;),
												zoomend = el.data(&#x27;zoomend&#x27;)==undefined ? 0 : el.data(&#x27;zoomend&#x27;),
												speed = el.data(&#x27;speed&#x27;)==undefined ? 2 : el.data(&#x27;speed&#x27;),
												easing = el.data(&#x27;easing&#x27;)==undefined ? punchgs.Power2.easeInOut : el.data(&#x27;easing&#x27;);

											el.data(&#x27;timeline&#x27;).append(new punchgs.TweenLite.fromTo(el,speed,{force3D:&quot;auto&quot;,scale:zoomstart},{scale:zoomend,ease:easing}));
											el.data(&#x27;timeline&#x27;).append(new punchgs.TweenLite.fromTo(el,speed,{force3D:&quot;auto&quot;,scale:zoomend},{scale:zoomstart,onComplete:function() {
												el.data(&#x27;timeline&#x27;).restart();
											}}));
										}

									})

									nextcaption.find(&#x27;.rs-wave&#x27;).each(function() {
										var el = jQuery(this);
										if (el.data(&#x27;timeline&#x27;)==undefined) {
											el.data(&#x27;timeline&#x27;,new punchgs.TimelineLite);

											var angle= el.data(&#x27;angle&#x27;)==undefined ? 10 : el.data(&#x27;angle&#x27;),
												radius = el.data(&#x27;radius&#x27;)==undefined ? 10 : el.data(&#x27;radius&#x27;),
												speed = el.data(&#x27;speed&#x27;)==undefined ? -20 : el.data(&#x27;speed&#x27;),
												origin = el.data(&#x27;origin&#x27;)==undefined ? -20 : el.data(&#x27;origin&#x27;);

												angle = angle*factor;
												radius = radius * factor;

											var angobj = {a:0, ang : angle, element:el, unit:radius};


												el.data(&#x27;timeline&#x27;).append(new punchgs.TweenLite.fromTo(angobj,speed,
																			{	a:360	},
																			{	a:0,
																				force3D:&quot;auto&quot;,
																				ease:punchgs.Linear.easeNone,
																				onUpdate:function() {

																					var rad = angobj.a * (Math.PI / 180);
																		            punchgs.TweenLite.to(angobj.element,0.1,{force3D:&quot;auto&quot;,x:Math.cos(rad) * angobj.unit, y:angobj.unit * (1 - Math.sin(rad))});

																				},
																				onComplete:function() {
																					el.data(&#x27;timeline&#x27;).restart();
																				}
																			}
																			));
										}

									})
				}

				var killCaptionLoops = function(nextcaption) {
							// SOME LOOPING ANIMATION ON INTERNAL ELEMENTS
							nextcaption.find(&#x27;.rs-pendulum, .rs-slideloop, .rs-pulse, .rs-wave&#x27;).each(function() {
								var el = jQuery(this);
								if (el.data(&#x27;timeline&#x27;)!=undefined) {
										el.data(&#x27;timeline&#x27;).pause();
										el.data(&#x27;timeline&#x27;,null);
									}
								});
				}

				//////////////////////////
				//	REMOVE THE CAPTIONS //
				/////////////////////////
				var removeTheCaptions = function(actli,opt) {

						var removetime = 0;

						var allcaptions = actli.find(&#x27;.tp-caption&#x27;),
							allstaticcaptions = opt.container.find(&#x27;.tp-static-layers&#x27;).find(&#x27;.tp-caption&#x27;);


						jQuery.each(allstaticcaptions, function(index,staticcapt) {
							allcaptions.push(staticcapt);
						});

						allcaptions.each(function(i) {



							    var staticdirection = -1;	// 1 -&gt; In,  2-&gt; Out  0-&gt; Ignore  -1-&gt; Not Static

								var nextcaption=jQuery(this);
								if (nextcaption.hasClass(&quot;tp-static-layer&quot;)) {

									if (nextcaption.data(&#x27;startslide&#x27;) == -1 || nextcaption.data(&#x27;startslide&#x27;) == &quot;-1&quot;)
										nextcaption.data(&#x27;startslide&#x27;,0);

									if (nextcaption.data(&#x27;endslide&#x27;) == -1 || nextcaption.data(&#x27;endslide&#x27;) == &quot;-1&quot;)
										nextcaption.data(&#x27;endslide&#x27;,opt.slideamount);



									// IF STATIC ITEM CURRENTLY NOT VISIBLE
									if (nextcaption.hasClass(&quot;tp-is-shown&quot;)) {

										if ((nextcaption.data(&#x27;startslide&#x27;) &gt; opt.next) ||
											(nextcaption.data(&#x27;endslide&#x27;) &lt; opt.next)) {

											staticdirection = 2;
											nextcaption.removeClass(&quot;tp-is-shown&quot;);
										} else {
											staticdirection = 0;
										}
									} else {
										staticdirection = 2;
									}



								}



							if (staticdirection != 0 ) {

									killCaptionLoops(nextcaption);

									if (nextcaption.find(&#x27;iframe&#x27;).length&gt;0) {
																	// VIMEO VIDEO PAUSE
																	//if (nextcaption.data(&#x27;vimeoid&#x27;)!=undefined &amp;&amp; String(nextcaption.data(&#x27;vimeoid&#x27;)).length&gt;0)
																	  	punchgs.TweenLite.to(nextcaption.find(&#x27;iframe&#x27;),0.2,{autoAlpha:0});
																	  	if (is_mobile()) nextcaption.find(&#x27;iframe&#x27;).remove();
																	try {
																		var ifr = nextcaption.find(&#x27;iframe&#x27;);
																		var id = ifr.attr(&#x27;id&#x27;);
																		var froogaloop = $f(id);
																		froogaloop.api(&quot;pause&quot;);
																		clearTimeout(nextcaption.data(&#x27;timerplay&#x27;));
																	} catch(e) {}

																	try {
																		var player=nextcaption.data(&#x27;player&#x27;);
																		player.stopVideo();
																		clearTimeout(nextcaption.data(&#x27;timerplay&#x27;));
																	} catch(e) {}
																}

									// IF HTML5 VIDEO IS EMBEDED
									if (nextcaption.find(&#x27;video&#x27;).length&gt;0) {
													try{
														nextcaption.find(&#x27;video&#x27;).each(function(i) {
															var html5vid = jQuery(this).parent();
															var videoID =html5vid.attr(&#x27;id&#x27;);
															clearTimeout(html5vid.data(&#x27;timerplay&#x27;));
															var video = this;
															video.pause();
														})
													}catch(e) {}
												} // END OF VIDEO JS FUNCTIONS
									try {

											//var tl = punchgs.TimelineLite.exportRoot();
											var tl = nextcaption.data(&#x27;timeline&#x27;);
											var endstarts = tl.getLabelTime(&quot;frame99&quot;);
											var curtime = tl.time();
											if (endstarts&gt;curtime) {

												// WE NEED TO STOP ALL OTHER NIMATIONS
												var tweens = tl.getTweensOf(nextcaption);
												jQuery.each(tweens,function(index,tw) {

													if (index!=0)
														tw.pause();
												});
												if (nextcaption.css(&#x27;opacity&#x27;)!=0) {
													var spp = nextcaption.data(&#x27;endspeed&#x27;) == undefined ? nextcaption.data(&#x27;speed&#x27;) : nextcaption.data(&#x27;endspeed&#x27;);
													if (spp&gt;removetime) removetime =spp;
													tl.play(&quot;frame99&quot;);
												} else
													tl.progress(1,false);
											}

										} catch(e) {}

							}

						});

						return removetime;
				}

				//////////////////////////////
				//	MOVE THE CAPTIONS  //
				////////////////////////////
				var addMoveCaption = function(nextcaption,opt,params,frame,downscale) {
							var tl = nextcaption.data(&#x27;timeline&#x27;);

							var newtl = new punchgs.TimelineLite();

							var animobject = nextcaption;

							if (params.typ == &quot;chars&quot;) animobject = nextcaption.data(&#x27;mySplitText&#x27;).chars;
							else
							if (params.typ == &quot;words&quot;) animobject = nextcaption.data(&#x27;mySplitText&#x27;).words;
							else
							if (params.typ == &quot;lines&quot;) animobject = nextcaption.data(&#x27;mySplitText&#x27;).lines;
							params.animation.ease = params.ease;

							if (params.animation.rotationZ !=undefined) params.animation.rotation = params.animation.rotationZ;
							params.animation.data = new Object();
							params.animation.data.oldx = params.animation.x;
							params.animation.data.oldy = params.animation.y;

							params.animation.x = params.animation.x * downscale;
							params.animation.y = params.animation.y * downscale;


							tl.add(newtl.staggerTo(animobject,params.speed,params.animation,params.elementdelay),params.start);
							tl.addLabel(frame,params.start);

							nextcaption.data(&#x27;timeline&#x27;,tl);

				}
				//////////////////////////////
				//	MOVE OUT THE CAPTIONS  //
				////////////////////////////
				var endMoveCaption = function(nextcaption,opt,mdelay,backwards,frame,downscale) {

									var tl = nextcaption.data(&#x27;timeline&#x27;),
										newtl = new punchgs.TimelineLite();

									var frm = newAnimObject(),
										mspeed= (nextcaption.data(&#x27;endspeed&#x27;) == undefined) ? nextcaption.data(&#x27;speed&#x27;) : nextcaption.data(&#x27;endspeed&#x27;),
										ncc = nextcaption.attr(&#x27;class&#x27;);

									frm.ease = (nextcaption.data(&#x27;endeasing&#x27;) == undefined) ? punchgs.Power1.easeInOut : nextcaption.data(&#x27;endeasing&#x27;);

									mspeed = mspeed/1000;



									if (ncc.match(&#x27;ltr&#x27;) ||
										ncc.match(&#x27;ltl&#x27;) ||
										ncc.match(&#x27;str&#x27;) ||
										ncc.match(&#x27;stl&#x27;) ||
										ncc.match(&#x27;ltt&#x27;) ||
										ncc.match(&#x27;ltb&#x27;) ||
										ncc.match(&#x27;stt&#x27;) ||
										ncc.match(&#x27;stb&#x27;) ||
										ncc.match(&#x27;skewtoright&#x27;) ||
										ncc.match(&#x27;skewtorightshort&#x27;) ||
										ncc.match(&#x27;skewtoleft&#x27;) ||
										ncc.match(&#x27;skewtoleftshort&#x27;) ||
										ncc.match(&#x27;fadeout&#x27;) ||
										ncc.match(&quot;randomrotateout&quot;))
									{

										if (ncc.match(&#x27;skewtoright&#x27;) || ncc.match(&#x27;skewtorightshort&#x27;)) frm.skewX = 35
										else
										if (ncc.match(&#x27;skewtoleft&#x27;) || ncc.match(&#x27;skewtoleftshort&#x27;)) frm.skewX =  -35


										if (ncc.match(&#x27;ltr&#x27;) || ncc.match(&#x27;skewtoright&#x27;))
											frm.x=opt.width+60;
										else if (ncc.match(&#x27;ltl&#x27;) || ncc.match(&#x27;skewtoleft&#x27;))
											frm.x=0-(opt.width+60);
										else if (ncc.match(&#x27;ltt&#x27;))
											frm.y=0-(opt.height+60);
										else if (ncc.match(&#x27;ltb&#x27;))
											frm.y=opt.height+60;
										else if (ncc.match(&#x27;str&#x27;) || ncc.match(&#x27;skewtorightshort&#x27;)) {
											frm.x=50;frm.opacity=0;
										} else if (ncc.match(&#x27;stl&#x27;) || ncc.match(&#x27;skewtoleftshort&#x27;)) {
											frm.x=-50;frm.opacity=0;
										} else if (ncc.match(&#x27;stt&#x27;)) {
											frm.y=-50;frm.opacity=0;
										} else if (ncc.match(&#x27;stb&#x27;)) {
											frm.y=50;frm.opacity=0;
										} else if (ncc.match(&quot;randomrotateout&quot;)) {
											frm.x = Math.random()*opt.width;
											frm.y = Math.random()*opt.height;
											frm.scale = Math.random()*2+0.3;
											frm.rotation = Math.random()*360-180;
											frm.opacity = 0;
										} else if (ncc.match(&#x27;fadeout&#x27;)) {
											frm.opacity = 0;
										}

										if (ncc.match(&#x27;skewtorightshort&#x27;)) frm.x = 270;
										else
										if (ncc.match(&#x27;skewtoleftshort&#x27;)) frm.x =  -270
										frm.data = new Object();
										frm.data.oldx = frm.x;
										frm.data.oldy = frm.y;
										frm.x = frm.x * downscale;
										frm.y = frm.y * downscale;

										frm.overwrite=&quot;auto&quot;;
										var animobject = nextcaption;
										var animobject = nextcaption;
										if (nextcaption.data(&#x27;splitout&#x27;) == &quot;chars&quot;) animobject = nextcaption.data(&#x27;mySplitText&#x27;).chars;
										else
										if (nextcaption.data(&#x27;splitout&#x27;) == &quot;words&quot;) animobject = nextcaption.data(&#x27;mySplitText&#x27;).words;
										else
										if (nextcaption.data(&#x27;splitout&#x27;) == &quot;lines&quot;) animobject = nextcaption.data(&#x27;mySplitText&#x27;).lines;
										var elemdelay = (nextcaption.data(&#x27;endelementdelay&#x27;) == undefined) ? 0 : nextcaption.data(&#x27;endelementdelay&#x27;);
										//tl.add(punchgs.TweenLite.to(nextcaption,mspeed,frm),mdelay);
										tl.add(newtl.staggerTo(animobject,mspeed,frm,elemdelay),mdelay);

									}

									else

									if (nextcaption.hasClass(&quot;customout&quot;)) {

										frm = getAnimDatas(frm,nextcaption.data(&#x27;customout&#x27;));
										var animobject = nextcaption;
										if (nextcaption.data(&#x27;splitout&#x27;) == &quot;chars&quot;) animobject = nextcaption.data(&#x27;mySplitText&#x27;).chars;
										else
										if (nextcaption.data(&#x27;splitout&#x27;) == &quot;words&quot;) animobject = nextcaption.data(&#x27;mySplitText&#x27;).words;
										else
										if (nextcaption.data(&#x27;splitout&#x27;) == &quot;lines&quot;) animobject = nextcaption.data(&#x27;mySplitText&#x27;).lines;

										var elemdelay = (nextcaption.data(&#x27;endelementdelay&#x27;) == undefined) ? 0 : nextcaption.data(&#x27;endelementdelay&#x27;);
										frm.onStart = function() {

																 punchgs.TweenLite.set(nextcaption,{
																	  transformPerspective:frm.transformPerspective,
																	  transformOrigin:frm.transformOrigin,
																	  overwrite:&quot;auto&quot;
																  });
										}

										frm.data = new Object();
										frm.data.oldx = frm.x;
										frm.data.oldy = frm.y;

										frm.x = frm.x * downscale;
										frm.y = frm.y * downscale;

										tl.add(newtl.staggerTo(animobject,mspeed,frm,elemdelay),mdelay);
									}

									else {
										backwards.delay = 0;
										tl.add(punchgs.TweenLite.to(nextcaption,mspeed,backwards),mdelay);
									}


								tl.addLabel(frame,mdelay);

								nextcaption.data(&#x27;timeline&#x27;,tl);
			}

		///////////////////////////
		//	REMOVE THE LISTENERS //
		///////////////////////////
		var removeAllListeners = function(container,opt) {
			container.children().each(function() {
			  try{ jQuery(this).die(&#x27;click&#x27;); } catch(e) {}
			  try{ jQuery(this).die(&#x27;mouseenter&#x27;);} catch(e) {}
			  try{ jQuery(this).die(&#x27;mouseleave&#x27;);} catch(e) {}
			  try{ jQuery(this).unbind(&#x27;hover&#x27;);} catch(e) {}
			})
			try{ container.die(&#x27;click&#x27;,&#x27;mouseenter&#x27;,&#x27;mouseleave&#x27;);} catch(e) {}
			clearInterval(opt.cdint);
			container=null;
		}

		///////////////////////////
		//	-	countDown	-	//
		/////////////////////////
		var countDown = function(container,opt) {
			opt.cd=0;
			opt.loop=0;
			if (opt.stopAfterLoops!=undefined &amp;&amp; opt.stopAfterLoops&gt;-1)
					opt.looptogo=opt.stopAfterLoops;
			else
				opt.looptogo=9999999;

			if (opt.stopAtSlide!=undefined &amp;&amp; opt.stopAtSlide&gt;-1)
					opt.lastslidetoshow=opt.stopAtSlide;
			else
					opt.lastslidetoshow=999;

			opt.stopLoop=&quot;off&quot;;

			if (opt.looptogo==0) opt.stopLoop=&quot;on&quot;;


			if (opt.slideamount &gt;1 &amp;&amp; !(opt.stopAfterLoops==0 &amp;&amp; opt.stopAtSlide==1) ) {
					var bt=container.find(&#x27;.tp-bannertimer&#x27;);


					// LISTENERS  //container.trigger(&#x27;stoptimer&#x27;);
					container.on(&#x27;stoptimer&#x27;,function() {
						var bt = jQuery(this).find(&#x27;.tp-bannertimer&#x27;);
						bt.data(&#x27;tween&#x27;).pause();
						if (opt.hideTimerBar==&quot;on&quot;) bt.css({visibility:&quot;hidden&quot;});
					});
					container.on(&#x27;starttimer&#x27;,function() {

						if (opt.conthover!=1 &amp;&amp; opt.videoplaying!=true &amp;&amp; opt.width&gt;opt.hideSliderAtLimit &amp;&amp; opt.bannertimeronpause != true &amp;&amp; opt.overnav !=true)
							if ((opt.stopLoop==&quot;on&quot; &amp;&amp; opt.next==opt.lastslidetoshow-1) || opt.noloopanymore == 1)
							   opt.noloopanymore = 1;
							else {

								bt.css({visibility:&quot;visible&quot;});
								bt.data(&#x27;tween&#x27;).resume();
							}

							if (opt.hideTimerBar==&quot;on&quot;) bt.css({visibility:&quot;hidden&quot;});
					});
					container.on(&#x27;restarttimer&#x27;,function() {
						var bt = jQuery(this).find(&#x27;.tp-bannertimer&#x27;);
						if ((opt.stopLoop==&quot;on&quot; &amp;&amp; opt.next==opt.lastslidetoshow-1) || opt.noloopanymore == 1)
							   	opt.noloopanymore = 1;
							else {

								bt.css({visibility:&quot;visible&quot;});
								bt.data(&#x27;tween&#x27;).kill();
								bt.data(&#x27;tween&#x27;,punchgs.TweenLite.fromTo(bt,opt.delay/1000,{width:&quot;0%&quot;},{force3D:&quot;auto&quot;,width:&quot;100%&quot;,ease:punchgs.Linear.easeNone,onComplete:countDownNext,delay:1}));

							}
							if (opt.hideTimerBar==&quot;on&quot;) bt.css({visibility:&quot;hidden&quot;});
					});

					container.on(&#x27;nulltimer&#x27;,function() {
							bt.data(&#x27;tween&#x27;).pause(0);
							if (opt.hideTimerBar==&quot;on&quot;) bt.css({visibility:&quot;hidden&quot;});
					});



					 var countDownNext = function() {
						if (jQuery(&#x27;body&#x27;).find(container).length==0) {
							removeAllListeners(container,opt);
							clearInterval(opt.cdint);
						}

						container.trigger(&quot;revolution.slide.slideatend&quot;);

						//STATE OF API CHANGED -&gt; MOVE TO AIP BETTER
						if (container.data(&#x27;conthover-changed&#x27;) == 1) {
							opt.conthover=	container.data(&#x27;conthover&#x27;);
							container.data(&#x27;conthover-changed&#x27;,0);
						}

						// SWAP TO NEXT BANNER
						opt.act=opt.next;
						opt.next=opt.next+1;

						if (opt.next&gt;container.find(&#x27;&gt;ul &gt;li&#x27;).length-1) {
								opt.next=0;
								opt.looptogo=opt.looptogo-1;

								if (opt.looptogo&lt;=0) {
										opt.stopLoop=&quot;on&quot;;

								}
							}

						// STOP TIMER IF NO LOOP NO MORE NEEDED.

						if (opt.stopLoop==&quot;on&quot; &amp;&amp; opt.next==opt.lastslidetoshow-1) {
								container.find(&#x27;.tp-bannertimer&#x27;).css({&#x27;visibility&#x27;:&#x27;hidden&#x27;});
								container.trigger(&#x27;revolution.slide.onstop&#x27;);
								opt.noloopanymore = 1;
						} else {
							bt.data(&#x27;tween&#x27;).restart();
						}

						// SWAP THE SLIDES
						swapSlide(container,opt);

					}

					bt.data(&#x27;tween&#x27;,punchgs.TweenLite.fromTo(bt,opt.delay/1000,{width:&quot;0%&quot;},{force3D:&quot;auto&quot;,width:&quot;100%&quot;,ease:punchgs.Linear.easeNone,onComplete:countDownNext,delay:1}));
					bt.data(&#x27;opt&#x27;,opt);


					container.hover(
						function() {

							if (opt.onHoverStop==&quot;on&quot; &amp;&amp; (!is_mobile())) {
								container.trigger(&#x27;stoptimer&#x27;);

								container.trigger(&#x27;revolution.slide.onpause&#x27;);
								var nextsh = container.find(&#x27;&gt;ul &gt;li:eq(&#x27;+opt.next+&#x27;) .slotholder&#x27;);
								nextsh.find(&#x27;.defaultimg&#x27;).each(function() {
									var dimg = jQuery(this);
									if (dimg.data(&#x27;kenburn&#x27;)!=undefined) {
									   dimg.data(&#x27;kenburn&#x27;).pause();
									 }
								});
							}
						},
						function() {
							if (container.data(&#x27;conthover&#x27;)!=1) {
								container.trigger(&#x27;revolution.slide.onresume&#x27;);
								container.trigger(&#x27;starttimer&#x27;);

								var nextsh = container.find(&#x27;&gt;ul &gt;li:eq(&#x27;+opt.next+&#x27;) .slotholder&#x27;);
								nextsh.find(&#x27;.defaultimg&#x27;).each(function() {
									var dimg = jQuery(this);
									if (dimg.data(&#x27;kenburn&#x27;)!=undefined) {
									   dimg.data(&#x27;kenburn&#x27;).play();
									 }
								});
							}
						});
			}
		}


	//////////////////
	// IS MOBILE ?? //
	//////////////////
	var is_mobile = function() {
	    var agents = [&#x27;android&#x27;, &#x27;webos&#x27;, &#x27;iphone&#x27;, &#x27;ipad&#x27;, &#x27;blackberry&#x27;,&#x27;Android&#x27;, &#x27;webos&#x27;, ,&#x27;iPod&#x27;, &#x27;iPhone&#x27;, &#x27;iPad&#x27;, &#x27;Blackberry&#x27;, &#x27;BlackBerry&#x27;];
		var ismobile=false;
	    for(var i in agents) {

		    if (navigator.userAgent.split(agents[i]).length&gt;1) {
	            ismobile = true;

	          }
	    }
	    return ismobile;
	}



/**************************************************************************
 * Revolution Slider - PAN ZOOM MODULE
 * @version: 1.0 (03.06.2013)
 * @author ThemePunch
**************************************************************************/

	/***********************************************
		-	KEN BURN BACKGROUND FIT CALCULATOR	-
	***********************************************/
	var calculateKenBurnScales = function(proc,sloth,opt) {
				var ow = sloth.data(&#x27;owidth&#x27;);
				var oh = sloth.data(&#x27;oheight&#x27;);

				if (ow / oh &gt; opt.width / opt.height) {
					var factor = (opt.container.width() /ow);
					var nheight = oh * factor;
					var hfactor = (nheight / opt.container.height())*proc;
					proc = proc * (100/hfactor);
					hfactor = 100;
					proc = proc;
					return (proc+&quot;% &quot;+hfactor+&quot;%&quot;+&quot; 1&quot;);
				} else {
					var factor = (opt.container.width() /ow);
					var nheight = oh * factor;
					var hfactor = (nheight / opt.container.height())*proc;
					return (proc+&quot;% &quot;+hfactor+&quot;%&quot;);
				}
			}



	/******************************
		-	startKenBurn	-
	********************************/
	var startKenBurn = function(container,opt,recalc,prepareonly) {

		try{
			var actli = container.find(&#x27;&gt;ul:first-child &gt;li:eq(&#x27;+opt.act+&#x27;)&#x27;);
		} catch(e) {
			var actli=container.find(&#x27;&gt;ul:first-child &gt;li:eq(1)&#x27;);
		}

		opt.lastslide=opt.act;


		var nextli = container.find(&#x27;&gt;ul:first-child &gt;li:eq(&#x27;+opt.next+&#x27;)&#x27;),
			nextsh = nextli.find(&#x27;.slotholder&#x27;),
			bgps = nextsh.data(&#x27;bgposition&#x27;),
			bgpe = nextsh.data(&#x27;bgpositionend&#x27;),
			zos = nextsh.data(&#x27;zoomstart&#x27;)/100,
			zoe = nextsh.data(&#x27;zoomend&#x27;)/100,
			ros = nextsh.data(&#x27;rotationstart&#x27;),
			roe = nextsh.data(&#x27;rotationend&#x27;),
			bgfs = nextsh.data(&#x27;bgfit&#x27;),
			bgfe = nextsh.data(&#x27;bgfitend&#x27;),
			easeme = nextsh.data(&#x27;easeme&#x27;),
			dur = nextsh.data(&#x27;duration&#x27;)/1000,
			bgfb = 100;


			if (bgfs==undefined) bgfs=100;
			if (bgfe==undefined) bgfe=100;
			var obgfs = bgfs,
				obgfe = bgfe;

			bgfs = calculateKenBurnScales(bgfs,nextsh,opt);
			bgfe = calculateKenBurnScales(bgfe,nextsh,opt);
			bgfb = calculateKenBurnScales(100,nextsh,opt);


			if (zos==undefined) zos=1;
			if (zoe==undefined) zoe=1;
			if (ros==undefined) ros=0;
			if (roe==undefined) roe=0;

			if (zos&lt;1) zos=1;
			if (zoe&lt;1) zoe=1;


			var imgobj = new Object();
			imgobj.w = parseInt(bgfb.split(&quot; &quot;)[0],0),
			imgobj.h = parseInt(bgfb.split(&quot; &quot;)[1],0);

			var turned = false;
			if (bgfb.split(&quot; &quot;)[2] == &quot;1&quot;) {
				turned = true;
			}

			nextsh.find(&#x27;.defaultimg&#x27;).each(function() {
				var defimg = jQuery(this);
				if (nextsh.find(&#x27;.kenburnimg&#x27;).length==0)
					nextsh.append(&#x27;&lt;div class=&quot;kenburnimg&quot; style=&quot;position:absolute;z-index:1;width:100%;height:100%;top:0px;left:0px;&quot;&gt;&lt;img src=&quot;&#x27;+defimg.attr(&#x27;src&#x27;)+&#x27;&quot; style=&quot;-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;position:absolute;width:&#x27;+imgobj.w+&#x27;%;height:&#x27;+imgobj.h+&#x27;%;&quot;&gt;&lt;/div&gt;&#x27;);
				else {
					nextsh.find(&#x27;.kenburnimg img&#x27;).css({width:imgobj.w+&#x27;%&#x27;,height:imgobj.h+&#x27;%&#x27;});
				}



				var kbimg = nextsh.find(&#x27;.kenburnimg img&#x27;);


				var imgs = calculateKenBurnImgPos(opt,bgps,bgfs,kbimg,turned),
					imge = calculateKenBurnImgPos(opt,bgpe,bgfe,kbimg,turned);

				if (turned) {
					imgs.w = obgfs/100;
					imge.w = obgfe/100;
				}



				if (prepareonly) {

					punchgs.TweenLite.set(kbimg,{autoAlpha:0,
											transformPerspective:1200,
											transformOrigin:&quot;0% 0%&quot;,
											top:0,left:0,
											scale:imgs.w,
											x:imgs.x,
											y:imgs.y});
					var sx = imgs.w,
						ww = (sx * kbimg.width()) - opt.width,
						hh = (sx * kbimg.height()) - opt.height,
						hor = Math.abs((imgs.x / ww)*100),
						ver = Math.abs((imgs.y / hh)*100);
						if (hh==0) ver =0;
						if (ww == 0) hor = 0;
					defimg.data(&#x27;bgposition&#x27;,hor+&quot;% &quot;+ver+&quot;%&quot;);
					if (!isIE(8)) defimg.data(&#x27;currotate&#x27;,getRotationDegrees(kbimg));
					if (!isIE(8)) defimg.data(&#x27;curscale&#x27;,(imgobj.w*sx)+&quot;%  &quot;+(imgobj.h*sx+&quot;%&quot;));

					nextsh.find(&#x27;.kenburnimg&#x27;).remove();
				}
				else
					defimg.data(&#x27;kenburn&#x27;,punchgs.TweenLite.fromTo(kbimg,dur,{autoAlpha:1, force3D:punchgs.force3d, transformOrigin:&quot;0% 0%&quot;, top:0,left:0, scale:imgs.w, x:imgs.x, y:imgs.y},{autoAlpha:1,rotationZ:roe,ease:easeme, x:imge.x, y:imge.y,scale:imge.w,onUpdate:function() {
							var sx = kbimg[0]._gsTransform.scaleX;
							var ww = (sx * kbimg.width()) - opt.width,
								hh = (sx * kbimg.height()) - opt.height,
								hor = Math.abs((kbimg[0]._gsTransform.x / ww)*100),
								ver = Math.abs((kbimg[0]._gsTransform.y / hh)*100);
								if (hh==0) ver =0;
								if (ww == 0) hor = 0;

							defimg.data(&#x27;bgposition&#x27;,hor+&quot;% &quot;+ver+&quot;%&quot;);

							if (!isIE(8)) defimg.data(&#x27;currotate&#x27;,getRotationDegrees(kbimg));
							if (!isIE(8)) defimg.data(&#x27;curscale&#x27;,(imgobj.w*sx)+&quot;%  &quot;+(imgobj.h*sx+&quot;%&quot;));
							//punchgs.TweenLite.set(defimg,{rotation:defimg.data(&#x27;currotate&#x27;), backgroundPosition:defimg.data(&#x27;bgposition&#x27;), backgroundSize:defimg.data(&#x27;curscale&#x27;)});
					}}));
		})
	}

	/*************************************************
		-	CALCULATE KENBURNS IMAGE POSITIONS	-
	**************************************************/

	var calculateKenBurnImgPos = function(opt,bgp,bgf,img,turned) {
			var imgobj = new Object;

			if (!turned)
				imgobj.w = parseInt(bgf.split(&quot; &quot;)[0],0) / 100;
			else
				imgobj.w = parseInt(bgf.split(&quot; &quot;)[1],0) / 100;

			switch(bgp) {
							case &quot;left top&quot;:
							case &quot;top left&quot;:
								imgobj.x = 0;
								imgobj.y = 0;
							break;
							case &quot;center top&quot;:
							case &quot;top center&quot;:
								imgobj.x = (((0-img.width()) * imgobj.w) + parseInt(opt.width,0))/2;
								imgobj.y = 0;
							break;
							case &quot;top right&quot;:
							case &quot;right top&quot;:
								imgobj.x = ((0-img.width()) * imgobj.w) + parseInt(opt.width,0);
								imgobj.y = 0;

							break;
							case &quot;center left&quot;:
							case &quot;left center&quot;:
								imgobj.x = 0;
								imgobj.y = (((0-img.height()) * imgobj.w) + parseInt(opt.height,0)) / 2;
							break;
							case &quot;center center&quot;:
								imgobj.x = (((0-img.width()) * imgobj.w) + parseInt(opt.width,0))/2;
								imgobj.y = (((0-img.height()) * imgobj.w) + parseInt(opt.height,0)) / 2;

							break;
							case &quot;center right&quot;:
							case &quot;right center&quot;:
								imgobj.x = ((0-img.width()) * imgobj.w) + parseInt(opt.width,0);
								imgobj.y = (((0-img.height()) * imgobj.w) + parseInt(opt.height,0)) / 2;

							break;
							case &quot;bottom left&quot;:
							case &quot;left bottom&quot;:
								imgobj.x =0;
								imgobj.y = ((0-img.height()) * imgobj.w) + parseInt(opt.height,0);

							break;
							case &quot;bottom center&quot;:
							case &quot;center bottom&quot;:
								imgobj.x = (((0-img.width()) * imgobj.w) + parseInt(opt.width,0))/2;
								imgobj.y = ((0-img.height()) * imgobj.w) + parseInt(opt.height,0);
							break;
							case &quot;bottom right&quot;:
							case &quot;right bottom&quot;:
								imgobj.x = ((0-img.width()) * imgobj.w) + parseInt(opt.width,0);
								imgobj.y = ((0-img.height()) * imgobj.w) + parseInt(opt.height,0);
							break;
						}



			return imgobj;
		}

		/******************************
			-	GET ROTATION DEGREES	-
		********************************/
		var getRotationDegrees = function(obj) {
				    var matrix = obj.css(&quot;-webkit-transform&quot;) ||
				    obj.css(&quot;-moz-transform&quot;)    ||
				    obj.css(&quot;-ms-transform&quot;)     ||
				    obj.css(&quot;-o-transform&quot;)      ||
				    obj.css(&quot;transform&quot;);
				    if(matrix !== &#x27;none&#x27;) {
				        var values = matrix.split(&#x27;(&#x27;)[1].split(&#x27;)&#x27;)[0].split(&#x27;,&#x27;);
				        var a = values[0];
				        var b = values[1];
				        var angle = Math.round(Math.atan2(b, a) * (180/Math.PI));
				    } else { var angle = 0; }
				    return (angle &lt; 0) ? angle +=360 : angle;
				}


		/******************************
			-	STOP KEN BURN	-
		********************************/
		var stopKenBurn = function(container,opt) {

			try{
				var actli = container.find(&#x27;&gt;ul:first-child &gt;li:eq(&#x27;+opt.act+&#x27;)&#x27;);
			} catch(e) {
				var actli=container.find(&#x27;&gt;ul:first-child &gt;li:eq(1)&#x27;);
			}

			opt.lastslide=opt.act;

			var nextli = container.find(&#x27;&gt;ul:first-child &gt;li:eq(&#x27;+opt.next+&#x27;)&#x27;);


			var actsh = actli.find(&#x27;.slotholder&#x27;);
			var nextsh = nextli.find(&#x27;.slotholder&#x27;);

			container.find(&#x27;.defaultimg&#x27;).each(function() {
				var defimg = jQuery(this);
				punchgs.TweenLite.killTweensOf(defimg,false);
				punchgs.TweenLite.set(defimg,{scale:1,rotationZ:0});
				punchgs.TweenLite.killTweensOf(defimg.data(&#x27;kenburn img&#x27;),false);
				if (defimg.data(&#x27;kenburn&#x27;) != undefined) {
					defimg.data(&#x27;kenburn&#x27;).pause();
				}
				if (defimg.data(&#x27;currotate&#x27;) != undefined &amp;&amp; defimg.data(&#x27;bgposition&#x27;) !=undefined &amp;&amp; defimg.data(&#x27;curscale&#x27;) != undefined)
					punchgs.TweenLite.set(defimg,{rotation:defimg.data(&#x27;currotate&#x27;), backgroundPosition:defimg.data(&#x27;bgposition&#x27;), backgroundSize:defimg.data(&#x27;curscale&#x27;)});
				if (defimg!= undefined &amp;&amp; defimg.data(&#x27;kenburn img&#x27;) != undefined &amp;&amp; defimg.data(&#x27;kenburn img&#x27;).length&gt;0) punchgs.TweenLite.set(defimg.data(&#x27;kenburn img&#x27;),{autoAlpha:0});

			});
		}

//// END OF KENBURNS EXTNESION




/**************************************************************************
 * Revolution Slider - PARALLAX MODULE
 * @version: 1.1 (23.06.2013)
 * @author ThemePunch
**************************************************************************/

		/******************************
			-	PARALLAX EFFECT	-
		********************************/
		var checkForParallax = function(container,opt) {
			if (is_mobile() &amp;&amp; opt.parallaxDisableOnMobile==&quot;on&quot;) return false;

			container.find(&#x27;&gt;ul:first-child &gt;li&#x27;).each(function() {
				var li = jQuery(this);
				for (var i = 1; i&lt;=10;i++)
					li.find(&#x27;.rs-parallaxlevel-&#x27;+i).each(function() {
						var pw = jQuery(this);
						pw.wrap(&#x27;&lt;div style=&quot;position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:&#x27;+pw.css(&#x27;zIndex&#x27;)+&#x27;&quot; class=&quot;tp-parallax-container&quot; data-parallaxlevel=&quot;&#x27;+opt.parallaxLevels[i-1]+&#x27;&quot;&gt;&lt;/div&gt;&#x27;);
					});
			})



			if (opt.parallax==&quot;mouse&quot; || opt.parallax==&quot;scroll+mouse&quot; || opt.parallax==&quot;mouse+scroll&quot;) {

						container.mouseenter(function(event) {
							var currslide = container.find(&#x27;.current-sr-slide-visible&#x27;);
									var t = container.offset().top,
										l = container.offset().left,
										ex = (event.pageX-l),
										ey =  (event.pageY-t);
									currslide.data(&quot;enterx&quot;,ex);
									currslide.data(&quot;entery&quot;,ey);

						})

						container.on(&#x27;mousemove.hoverdir, mouseleave.hoverdir&#x27;,function(event) {
							var currslide = container.find(&#x27;.current-sr-slide-visible&#x27;);
							switch (event.type) {

								case &quot;mousemove&quot;:

										var	t = container.offset().top,
											l = container.offset().left,
											mh = currslide.data(&quot;enterx&quot;),
											mv = currslide.data(&quot;entery&quot;),
											diffh = (mh - (event.pageX  - l)),
											diffv = (mv - (event.pageY - t));

										currslide.find(&quot;.tp-parallax-container&quot;).each(function() {
											var pc = jQuery(this),
												pl = parseInt(pc.data(&#x27;parallaxlevel&#x27;),0)/100,
												offsh =	diffh * pl,
												offsv =	diffv * pl;
											if (opt.parallax==&quot;scroll+mouse&quot; || opt.parallax==&quot;mouse+scroll&quot;)
												punchgs.TweenLite.to(pc,0.4,{force3D:&quot;auto&quot;,x:offsh,ease:punchgs.Power3.easeOut,overwrite:&quot;all&quot;});
											else
												punchgs.TweenLite.to(pc,0.4,{force3D:&quot;auto&quot;,x:offsh,y:offsv,ease:punchgs.Power3.easeOut,overwrite:&quot;all&quot;});
										})

								break;
								case &quot;mouseleave&quot;:
										currslide.find(&quot;.tp-parallax-container&quot;).each(function() {
											var pc = jQuery(this);
											if (opt.parallax==&quot;scroll+mouse&quot; || opt.parallax==&quot;mouse+scroll&quot;)
												punchgs.TweenLite.to(pc,1.5,{force3D:&quot;auto&quot;,x:0,ease:punchgs.Power3.easeOut});
											else
												punchgs.TweenLite.to(pc,1.5,{force3D:&quot;auto&quot;,x:0,y:0,ease:punchgs.Power3.easeOut});
										})
								break;
							}
						});

						if (is_mobile())
							window.ondeviceorientation = function(event) {
							  var 	y = Math.round(event.beta  || 0),
							  		x = Math.round(event.gamma || 0);

							  var currslide = container.find(&#x27;.current-sr-slide-visible&#x27;);


							  if (jQuery(window).width() &gt; jQuery(window).height()){
							  		var xx = x;
							  		x = y;
							  		y = xx;

							  }

								var curh = 360/container.width() * x,
							  		curv = 180/container.height() * y;




							  currslide.find(&quot;.tp-parallax-container&quot;).each(function() {
												var pc = jQuery(this),
													pl = parseInt(pc.data(&#x27;parallaxlevel&#x27;),0)/100,
													offsh =	curh * pl,
													offsv =	curv * pl;
												punchgs.TweenLite.to(pc,0.2,{force3D:&quot;auto&quot;,x:offsh,y:offsv,ease:punchgs.Power3.easeOut});
											})

							  // y: -90 -&gt; +90,  x:-180 -&gt; +180

							  //jQuery(&#x27;.logo-container&#x27;).html(&quot;h:&quot;+curh+&quot;  v:&quot;+curv);
							  }
			}
			if (opt.parallax==&quot;scroll&quot; || opt.parallax==&quot;scroll+mouse&quot; || opt.parallax==&quot;mouse+scroll&quot;) {

						jQuery(window).on(&#x27;scroll&#x27;,function(event) {
							scrollParallax(container,opt);
						});
			}
		}

		/***************************************
			-	SET POST OF SCROLL PARALLAX	-
		***************************************/
		var scrollParallax = function(container,opt) {
			if (is_mobile() &amp;&amp; opt.parallaxDisableOnMobile==&quot;on&quot;) return false;
			var t = container.offset().top,
					st = jQuery(window).scrollTop(),
					dist = t+container.height()/2,
					mv = t+container.height()/2 - st,
					wh = jQuery(window).height()/2,
					diffv= wh - mv;

			if (dist&lt;wh) diffv = diffv - (wh-dist);
			var currslide = container.find(&#x27;.current-sr-slide-visible&#x27;);
			container.find(&quot;.tp-parallax-container&quot;).each(function(i) {
				var pc = jQuery(this),
					pl = parseInt(pc.data(&#x27;parallaxlevel&#x27;),0)/100,
					offsv =	diffv * pl;
				pc.data(&#x27;parallaxoffset&#x27;,offsv);
				punchgs.TweenLite.to(pc,0.2,{force3D:&quot;auto&quot;,y:offsv,ease:punchgs.Power3.easeOut});
			})

			if (opt.parallaxBgFreeze!=&quot;on&quot;) {
				var pl = opt.parallaxLevels[0]/100,
					offsv =	diffv * pl;
				punchgs.TweenLite.to(container,0.2,{force3D:&quot;auto&quot;,y:offsv,ease:punchgs.Power3.easeOut});
			}
		}

		/**************************************************************************
		 * Revolution Slider - THUMBNAIL MODULE
		 * @version: 1.0 (03.06.2013)
		 * @author ThemePunch
		**************************************************************************/


		////////////////////////////////
		//	-	CREATE THE BULLETS -  //
		////////////////////////////////
		var createThumbs = function(container,opt) {

			var cap=container.parent();



			if (opt.navigationType==&quot;thumb&quot; || opt.navsecond==&quot;both&quot;) {
						cap.append(&#x27;&lt;div class=&quot;tp-bullets tp-thumbs &#x27;+opt.navigationStyle+&#x27;&quot;&gt;&lt;div class=&quot;tp-mask&quot;&gt;&lt;div class=&quot;tp-thumbcontainer&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&#x27;);
			}
			var bullets = cap.find(&#x27;.tp-bullets.tp-thumbs .tp-mask .tp-thumbcontainer&#x27;);
			var bup = bullets.parent();

			bup.width(opt.thumbWidth*opt.thumbAmount);
			bup.height(opt.thumbHeight);
			bup.parent().width(opt.thumbWidth*opt.thumbAmount);
			bup.parent().height(opt.thumbHeight);

			container.find(&#x27;&gt;ul:first &gt;li&#x27;).each(function(i) {
							var li= container.find(&quot;&gt;ul:first &gt;li:eq(&quot;+i+&quot;)&quot;);
							var bgcolor = li.find(&quot;.defaultimg&quot;).css(&quot;backgroundColor&quot;);
							if (li.data(&#x27;thumb&#x27;) !=undefined)
								var src= li.data(&#x27;thumb&#x27;)
							else
								var src=li.find(&quot;img:first&quot;).attr(&#x27;src&#x27;);


							bullets.append(&#x27;&lt;div class=&quot;bullet thumb&quot; style=&quot;background-color:&#x27;+bgcolor+&#x27;;position:relative;width:&#x27;+opt.thumbWidth+&#x27;px;height:&#x27;+opt.thumbHeight+&#x27;px;background-image:url(&#x27;+src+&#x27;) !important;background-size:cover;background-position:center center;&quot;&gt;&lt;/div&gt;&#x27;);
							var bullet= bullets.find(&#x27;.bullet:first&#x27;);
				});
			//bullets.append(&#x27;&lt;div style=&quot;clear:both&quot;&gt;&lt;/div&gt;&#x27;);
			var minwidth=10;


			// ADD THE BULLET CLICK FUNCTION HERE
			bullets.find(&#x27;.bullet&#x27;).each(function(i) {
				var bul = jQuery(this);

				if (i==opt.slideamount-1) bul.addClass(&#x27;last&#x27;);
				if (i==0) bul.addClass(&#x27;first&#x27;);
				bul.width(opt.thumbWidth);
				bul.height(opt.thumbHeight);

				if (minwidth&lt;bul.outerWidth(true)) minwidth=bul.outerWidth(true);
				bul.click(function() {
					if (opt.transition==0 &amp;&amp; bul.index() != opt.act) {
						opt.next = bul.index();
						callingNewSlide(opt,container);
					}
				});
			});


			var max=minwidth*container.find(&#x27;&gt;ul:first &gt;li&#x27;).length;

			var thumbconwidth=bullets.parent().width();
			opt.thumbWidth = minwidth;



			////////////////////////
			// SLIDE TO POSITION  //
			////////////////////////
			if (thumbconwidth&lt;max) {
				jQuery(document).mousemove(function(e) {
					jQuery(&#x27;body&#x27;).data(&#x27;mousex&#x27;,e.pageX);
				});



				// ON MOUSE MOVE ON THE THUMBNAILS EVERYTHING SHOULD MOVE :)

				bullets.parent().mouseenter(function() {
						var $this=jQuery(this);

						var offset = $this.offset(),
							x = jQuery(&#x27;body&#x27;).data(&#x27;mousex&#x27;)-offset.left,
							thumbconwidth=$this.width(),
							minwidth=$this.find(&#x27;.bullet:first&#x27;).outerWidth(true),
							max=minwidth*container.find(&#x27;&gt;ul:first &gt;li&#x27;).length,
							diff=(max- thumbconwidth)+15,
							steps = diff / thumbconwidth;

						$this.addClass(&quot;over&quot;);
						x=x-30;

						//ANIMATE TO POSITION
						var pos=(0-((x)*steps));
						if (pos&gt;0) pos =0;
						if (pos&lt;0-max+thumbconwidth) pos=0-max+thumbconwidth;
						moveThumbSliderToPosition($this,pos,200);
				});

				bullets.parent().mousemove(function() {

								var $this=jQuery(this),
									offset = $this.offset(),
									x = jQuery(&#x27;body&#x27;).data(&#x27;mousex&#x27;)-offset.left,
									thumbconwidth=$this.width(),
									minwidth=$this.find(&#x27;.bullet:first&#x27;).outerWidth(true),
									max=minwidth*container.find(&#x27;&gt;ul:first &gt;li&#x27;).length-1,
									diff=(max- thumbconwidth)+15,
									steps = diff / thumbconwidth;

								x=x-3;
								if (x&lt;6) x=0;
								if (x+3&gt;thumbconwidth-6) x=thumbconwidth;

								//ANIMATE TO POSITION
								var pos=(0-((x)*steps));
								if (pos&gt;0) pos =0;
								if (pos&lt;0-max+thumbconwidth) pos=0-max+thumbconwidth;
								moveThumbSliderToPosition($this,pos,0);

				});

				bullets.parent().mouseleave(function() {
								var $this=jQuery(this);
								$this.removeClass(&quot;over&quot;);
								moveSelectedThumb(container);
				});
			}


		}


		///////////////////////////////
		//	SelectedThumbInPosition //
		//////////////////////////////
		var moveSelectedThumb = function(container) {

									var bullets=container.parent().find(&#x27;.tp-bullets.tp-thumbs .tp-mask .tp-thumbcontainer&#x27;),
										$this=bullets.parent(),
										offset = $this.offset(),
										minwidth=$this.find(&#x27;.bullet:first&#x27;).outerWidth(true),
										x = $this.find(&#x27;.bullet.selected&#x27;).index() * minwidth,
										thumbconwidth=$this.width(),
										minwidth=$this.find(&#x27;.bullet:first&#x27;).outerWidth(true),
										max=minwidth*container.find(&#x27;&gt;ul:first &gt;li&#x27;).length,
										diff=(max- thumbconwidth),
										steps = diff / thumbconwidth,
										pos=0-x;

									if (pos&gt;0) pos =0;
									if (pos&lt;0-max+thumbconwidth) pos=0-max+thumbconwidth;
									if (!$this.hasClass(&quot;over&quot;)) {
										moveThumbSliderToPosition($this,pos,200);
									}
		}


		////////////////////////////////////
		//	MOVE THUMB SLIDER TO POSITION //
		///////////////////////////////////
		var moveThumbSliderToPosition = function($this,pos,speed) {
			punchgs.TweenLite.to($this.find(&#x27;.tp-thumbcontainer&#x27;),0.2,{force3D:&quot;auto&quot;,left:pos,ease:punchgs.Power3.easeOut,overwrite:&quot;auto&quot;});
		}
})(jQuery);



/// END OF THUMBNAIL EXTNESIONS






// SOME ERROR MESSAGES IN CASE THE PLUGIN CAN NOT BE LOADED
function revslider_showDoubleJqueryError(sliderID) {
	var errorMessage = &quot;Revolution Slider Error: You have some jquery.js library include that comes after the revolution files js include.&quot;;
	errorMessage += &quot;&lt;br&gt; This includes make eliminates the revolution slider libraries, and make it not work.&quot;;
	errorMessage += &quot;&lt;br&gt;&lt;br&gt; To fix it you can:&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1. In the Slider Settings -&gt; Troubleshooting set option:  &lt;strong&gt;&lt;b&gt;Put JS Includes To Body&lt;/b&gt;&lt;/strong&gt; option to true.&quot;;
	errorMessage += &quot;&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 2. Find the double jquery.js include and remove it.&quot;;
	errorMessage = &quot;&lt;span style=&#x27;font-size:16px;color:#BC0C06;&#x27;&gt;&quot; + errorMessage + &quot;&lt;/span&gt;&quot;
		jQuery(sliderID).show().html(errorMessage);
}



    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
